import{_ as e}from"./index-B7Sos0mo.js";import{_ as t}from"./GiCellTag.vue_vue_type_script_setup_true_lang-BFrLDIrR.js";import a from"./RoleAddModal-BzU6z11M.js";import s from"./RoleUpdateDrawer-BR7psJY-.js";import l from"./RoleDetailDrawer-DuGkekGK.js";import{_ as i}from"./RoleAssignModal.vue_vue_type_script_setup_true_lang-CMkWoEZb.js";import{c as o,d as r}from"./role-C1QTvPIM.js";import{d,A as n,Z as p,a1 as u,r as c,b as m,h as _,w as f,f as y,a as g,G as h,c as v,C as S,a0 as k,o as j}from"./index-BAyZi_co.js";import{u as x}from"./useTable-DUTUCT70.js";import{u as w}from"./useDict-ConFaTXJ.js";import{h as b}from"./has-CF2CDZHh.js";import"./index-FaVgdj3V.js";import"./useResetReactive-NMdkdCz2.js";import"./useMenu-C8VM0Jot.js";import"./useDept-CXLwDhMr.js";import"./index-CK_656P1.js";import"./GiCellStatus.vue_vue_type_script_setup_true_lang-27S6yIFO.js";import"./GiCellGender.vue_vue_type_script_setup_true_lang-JUo4QZxx.js";import"./user-D7V0nsbJ.js";import"./useBreakpoint-C2fvcUp5.js";const R={class:"gi_table_page"},C=d({name:"SystemRole",__name:"index",setup(d){const{data_scope_enum:C}=w("data_scope_enum"),I=n({sort:["id,desc"]}),{tableData:D,loading:M,pagination:O,search:A,handleDelete:G}=x((e=>o({...I,...e})),{immediate:!0}),N=[{title:"number",width:66,align:"center",render:({rowIndex:e})=>p("span",{},e+1+(O.current-1)*O.pageSize)},{title:"name",dataIndex:"name",slotName:"name",ellipsis:!0,tooltip:!0},{title:"code",dataIndex:"code",ellipsis:!0,tooltip:!0},{title:"data scope",dataIndex:"dataScope",slotName:"dataScope",ellipsis:!0,tooltip:!0},{title:"sort",dataIndex:"sort",align:"center",show:!1},{title:"system built-in",dataIndex:"isSystem",slotName:"isSystem",align:"center",show:!1},{title:"description",dataIndex:"description",ellipsis:!0,tooltip:!0},{title:"create user",dataIndex:"createUserString",ellipsis:!0,tooltip:!0,show:!1},{title:"create time",dataIndex:"createTime",width:180},{title:"update user",dataIndex:"updateUserString",ellipsis:!0,tooltip:!0,show:!1},{title:"update time",dataIndex:"updateTime",width:180,show:!1},{title:"action",dataIndex:"action",slotName:"action",width:200,align:"center",fixed:u()?void 0:"right",show:b.hasPermOr(["system:role:detail","system:role:update","system:role:delete","system:role:assign"])}],T=()=>{I.description=void 0,A()},U=c(),z=()=>{var e;null==(e=U.value)||e.onOpen()},V=c(),P=c(),$=c();return(o,d)=>{const n=g("a-input-search"),p=g("icon-refresh"),u=g("a-button"),c=g("icon-plus"),x=t,w=g("a-tag"),b=g("a-link"),q=g("a-space"),B=e,J=k("permission");return j(),m("div",R,[_(B,{title:"","row-key":"id",data:y(D),columns:N,loading:y(M),bordered:!1,scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:y(O),"disabled-tools":["size"],"disabled-column-keys":["name"],onRefresh:y(A)},{"toolbar-left":f((()=>[_(n,{modelValue:y(I).description,"onUpdate:modelValue":d[0]||(d[0]=e=>y(I).description=e),placeholder:"search name/code/description","allow-clear":"",onSearch:y(A)},null,8,["modelValue","onSearch"]),_(u,{onClick:T},{icon:f((()=>[_(p)])),default:f((()=>d[1]||(d[1]=[S("reset")]))),_:1})])),"toolbar-right":f((()=>[h((j(),v(u,{type:"primary",onClick:z},{icon:f((()=>[_(c)])),default:f((()=>d[2]||(d[2]=[S("add")]))),_:1})),[[J,["system:role:add"]]])])),dataScope:f((({record:e})=>[_(x,{value:e.dataScope,dict:y(C)},null,8,["value","dict"])])),isSystem:f((({record:e})=>[e.isSystem?(j(),v(w,{key:0,color:"red",size:"small"},{default:f((()=>d[3]||(d[3]=[S("yes")]))),_:1})):(j(),v(w,{key:1,color:"arcoblue",size:"small"},{default:f((()=>d[4]||(d[4]=[S("no")]))),_:1}))])),action:f((({record:e})=>[_(q,null,{default:f((()=>[h((j(),v(b,{title:"detail",onClick:t=>(e=>{var t;null==(t=P.value)||t.onOpen(e.id)})(e)},{default:f((()=>d[5]||(d[5]=[S("detail")]))),_:2},1032,["onClick"])),[[J,["system:role:detail"]]]),h((j(),v(b,{title:"modify",onClick:t=>(e=>{var t;null==(t=V.value)||t.onOpen(e.id)})(e)},{default:f((()=>d[6]||(d[6]=[S("modify")]))),_:2},1032,["onClick"])),[[J,["system:role:update"]]]),h((j(),v(b,{title:"assign",onClick:t=>(e=>{var t;null==(t=$.value)||t.onOpen(e.id)})(e)},{default:f((()=>d[7]||(d[7]=[S("assign")]))),_:2},1032,["onClick"])),[[J,["system:role:assign"]]]),h((j(),v(b,{status:"danger",disabled:e.isSystem,title:e.isSystem?"system built-in data cannot be deleted":"delete",onClick:t=>(e=>G((()=>r(e.id)),{content:`are you sure to delete the role「${e.name}(${e.code})」?`,showModal:!0}))(e)},{default:f((()=>d[8]||(d[8]=[S(" delete ")]))),_:2},1032,["disabled","title","onClick"])),[[J,["system:role:delete"]]])])),_:2},1024)])),_:1},8,["data","loading","pagination","onRefresh"]),_(a,{ref_key:"RoleAddModalRef",ref:U,onSaveSuccess:y(A)},null,8,["onSaveSuccess"]),_(s,{ref_key:"RoleUpdateDrawerRef",ref:V,onSaveSuccess:y(A)},null,8,["onSaveSuccess"]),_(l,{ref_key:"RoleDetailDrawerRef",ref:P},null,512),_(i,{ref_key:"RoleAssignModalRef",ref:$},null,512)])}}});export{C as default};
