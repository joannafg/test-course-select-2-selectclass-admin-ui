import{_ as e}from"./index-B7Sos0mo.js";import{_ as t}from"./GiCellTag.vue_vue_type_script_setup_true_lang-BFrLDIrR.js";import{_ as s}from"./CourseSelectionAddModal.vue_vue_type_script_setup_true_lang-BGqJ4v6w.js";import{_ as l}from"./CourseSelectionDetailDrawer.vue_vue_type_script_setup_true_lang-PWcZkp5W.js";import{l as a,d as o,e as d}from"./courseSelection-2y9Q28ra.js";import{d as i,A as n,r as c,a1 as u,b as r,h as m,w as p,f as _,a as h,G as f,c as v,C as g,a0 as C,o as x}from"./index-BAyZi_co.js";import{u as I}from"./useTable-DUTUCT70.js";import{u as S}from"./useDownload-C-k5xGNE.js";import{u as y}from"./useDict-ConFaTXJ.js";import{h as j}from"./has-CF2CDZHh.js";import"./index-FaVgdj3V.js";import"./GiForm-BWZRNfN-.js";import"./index.vue_vue_type_script_setup_true_lang-Dekw0iDL.js";import"./useResetReactive-NMdkdCz2.js";import"./courseSchedule-C4KTkUU1.js";import"./useBreakpoint-C2fvcUp5.js";const k={class:"gi_table_page"},w=i({name:"CourseSelection",__name:"index",setup(i){const{select_course_status:w}=y("select_course_status"),b=n({studentId:void 0,scheduleId:void 0,selectTime:void 0,status:void 0,sort:["id,desc"]}),{tableData:V,loading:D,pagination:T,search:N,handleDelete:R}=I((e=>a({...b,...e})),{immediate:!0}),M=c([{title:"select course record ID",dataIndex:"id",slotName:"id"},{title:"student",dataIndex:"studentId",slotName:"studentId"},{title:"course schedule",dataIndex:"scheduleId",slotName:"scheduleId"},{title:"select time",dataIndex:"selectTime",slotName:"selectTime"},{title:"score",dataIndex:"score",slotName:"score"},{title:"status",dataIndex:"status",slotName:"status"},{title:"action",dataIndex:"action",slotName:"action",width:160,align:"center",fixed:u()?void 0:"right",show:j.hasPermOr(["selectclass:courseSelection:detail","selectclass:courseSelection:update","selectclass:courseSelection:delete"])}]),U=()=>{b.studentId=void 0,b.scheduleId=void 0,b.selectTime=void 0,b.status=void 0,N()},A=()=>{S((()=>d(b)))},Y=c(),G=()=>{var e;null==(e=Y.value)||e.onAdd()},H=c();return(a,d)=>{const i=h("a-input"),n=h("a-date-picker"),c=h("a-select"),u=h("icon-refresh"),I=h("a-button"),S=h("icon-plus"),y=h("icon-download"),j=t,O=h("a-link"),q=h("a-space"),z=e,B=C("permission");return x(),r("div",k,[m(z,{title:"student course selection","row-key":"id",data:_(V),columns:_(M),loading:_(D),scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:_(T),"disabled-tools":["size"],"disabled-column-keys":["name"],onRefresh:_(N)},{"toolbar-left":p((()=>[m(i,{modelValue:_(b).studentId,"onUpdate:modelValue":d[0]||(d[0]=e=>_(b).studentId=e),options:a.student_id_enum,placeholder:"please select the student","allow-clear":"",style:{width:"150px"},onChange:_(N)},null,8,["modelValue","options","onChange"]),m(i,{modelValue:_(b).scheduleId,"onUpdate:modelValue":d[1]||(d[1]=e=>_(b).scheduleId=e),options:a.schedule_id_enum,placeholder:"please select the course schedule","allow-clear":"",style:{width:"150px"},onChange:_(N)},null,8,["modelValue","options","onChange"]),m(n,{modelValue:_(b).selectTime,"onUpdate:modelValue":d[2]||(d[2]=e=>_(b).selectTime=e),placeholder:"please select the select time","show-time":"",format:"YYYY-MM-DD HH:mm:ss",style:{height:"32px"}},null,8,["modelValue"]),m(c,{modelValue:_(b).status,"onUpdate:modelValue":d[3]||(d[3]=e=>_(b).status=e),options:_(w),placeholder:"please select the status","allow-clear":"",style:{width:"150px"},onChange:_(N)},null,8,["modelValue","options","onChange"]),m(I,{onClick:U},{icon:p((()=>[m(u)])),default:p((()=>d[4]||(d[4]=[g("reset")]))),_:1})])),"toolbar-right":p((()=>[f((x(),v(I,{type:"primary",onClick:G},{icon:p((()=>[m(S)])),default:p((()=>d[5]||(d[5]=[g("select course")]))),_:1})),[[B,["selectclass:courseSelection:add"]]]),f((x(),v(I,{onClick:A},{icon:p((()=>[m(y)])),default:p((()=>d[6]||(d[6]=[g("export")]))),_:1})),[[B,["selectclass:courseSelection:export"]]])])),status:p((({record:e})=>[m(j,{value:e.status,dict:_(w)},null,8,["value","dict"])])),action:p((({record:e})=>[m(q,null,{default:p((()=>[f((x(),v(O,{title:"details",onClick:t=>(e=>{var t;null==(t=H.value)||t.onOpen(e.id)})(e)},{default:p((()=>d[7]||(d[7]=[g("details")]))),_:2},1032,["onClick"])),[[B,["selectclass:courseSelection:detail"]]]),f((x(),v(O,{title:"modify",onClick:t=>(e=>{var t;null==(t=Y.value)||t.onUpdate(e.id)})(e)},{default:p((()=>d[8]||(d[8]=[g("modify")]))),_:2},1032,["onClick"])),[[B,["selectclass:courseSelection:update"]]]),f((x(),v(O,{status:"danger",disabled:e.disabled,title:e.disabled?"cannot delete":"delete",onClick:t=>(e=>R((()=>o(e.id)),{content:"are you sure to delete the data?",showModal:!0}))(e)},{default:p((()=>d[9]||(d[9]=[g(" delete ")]))),_:2},1032,["disabled","title","onClick"])),[[B,["selectclass:courseSelection:delete"]]])])),_:2},1024)])),_:1},8,["data","columns","loading","pagination","onRefresh"]),m(s,{ref_key:"CourseSelectionAddModalRef",ref:Y,onSaveSuccess:_(N)},null,8,["onSaveSuccess"]),m(l,{ref_key:"CourseSelectionDetailDrawerRef",ref:H},null,512)])}}});export{w as default};
