import{_ as e}from"./index-B7Sos0mo.js";import{_ as t}from"./GiCellTag.vue_vue_type_script_setup_true_lang-BFrLDIrR.js";import{d as a,A as l,b as s,h as i,w as o,f as n,a as d,C as r,t as c,g as p,M as u,O as m,o as g,Z as h}from"./index-BAyZi_co.js";import{l as y,d as f,r as _}from"./message-h33Jy4CT.js";import{u as b}from"./useTable-DUTUCT70.js";import{u as w}from"./useDict-ConFaTXJ.js";import"./useBreakpoint-C2fvcUp5.js";import"./index-FaVgdj3V.js";const k={class:"gi_table_page"},v=a({name:"SystemMessage",__name:"index",setup(a){const{message_type:v}=w("message_type"),x=l({sort:["createTime,desc"]}),{tableData:C,loading:R,pagination:j,selectedKeys:S,select:V,selectAll:A,search:I,handleDelete:T}=b((e=>y({...x,...e})),{immediate:!0}),D=[{title:"number",width:66,align:"center",render:({rowIndex:e})=>h("span",{},e+1+(j.current-1)*j.pageSize)},{title:"title",dataIndex:"title",slotName:"title",minWidth:100,ellipsis:!0,tooltip:!0},{title:"status",dataIndex:"isRead",slotName:"isRead",align:"center"},{title:"time",dataIndex:"createTime",width:180},{title:"type",dataIndex:"type",slotName:"type",width:180,ellipsis:!0,tooltip:!0}],M=()=>{x.title=void 0,x.type=void 0,x.isRead=void 0,I()},N=()=>S.value.length?T((()=>f(S.value)),{showModal:!1}):u.warning("please select the data"),z=async()=>{if(!S.value.length)return u.warning("please select the data");await _(S.value),u.success("operation successful"),I()},O=async()=>{m.warning({title:"all read",content:"are you sure to mark all messages as read?",hideCancel:!1,maskClosable:!1,onOk:async()=>{await _([]),u.success("operation successful"),I()}})};return(a,l)=>{const u=d("icon-search"),m=d("a-input"),h=d("a-option"),y=d("a-select"),f=d("icon-refresh"),_=d("a-button"),b=d("icon-delete"),w=d("a-tooltip"),T=d("a-tag"),U=t,W=e;return g(),s("div",k,[i(W,{"row-key":"id",title:"消息中心",data:n(C),columns:D,loading:n(R),scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:n(j),"disabled-tools":["size","setting"],"disabled-column-keys":["name"],"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":n(S),onSelectAll:n(A),onSelect:n(V),onRefresh:n(I)},{"toolbar-left":o((()=>[i(m,{modelValue:n(x).title,"onUpdate:modelValue":l[0]||(l[0]=e=>n(x).title=e),placeholder:"please enter the title","allow-clear":"",onChange:n(I)},{prefix:o((()=>[i(u)])),_:1},8,["modelValue","onChange"]),i(y,{modelValue:n(x).isRead,"onUpdate:modelValue":l[1]||(l[1]=e=>n(x).isRead=e),placeholder:"please select the status","allow-clear":"",style:{width:"150px"},onChange:n(I)},{default:o((()=>[i(h,{value:!1},{default:o((()=>l[2]||(l[2]=[r("unread")]))),_:1}),i(h,{value:!0},{default:o((()=>l[3]||(l[3]=[r("read")]))),_:1})])),_:1},8,["modelValue","onChange"]),i(_,{onClick:M},{icon:o((()=>[i(f)])),default:o((()=>l[4]||(l[4]=[r("reset")]))),_:1})])),"toolbar-right":o((()=>[i(_,{type:"primary",status:"danger",disabled:!n(S).length,title:n(S).length?"":"please select",onClick:N},{icon:o((()=>[i(b)])),default:o((()=>l[5]||(l[5]=[r("delete")]))),_:1},8,["disabled","title"]),i(_,{type:"primary",disabled:!n(S).length,title:n(S).length?"":"please select",onClick:z},{default:o((()=>l[6]||(l[6]=[r("mark as read")]))),_:1},8,["disabled","title"]),i(_,{type:"primary",disabled:n(S).length,title:n(S).length?"":"please select",onClick:O},{default:o((()=>l[7]||(l[7]=[r("all read")]))),_:1},8,["disabled","title"])])),title:o((({record:e})=>[i(w,{content:e.content},{default:o((()=>[p("span",null,c(e.title),1)])),_:2},1032,["content"])])),isRead:o((({record:e})=>[i(T,{color:e.isRead?"":"arcoblue"},{default:o((()=>[r(c(e.isRead?"read":"unread"),1)])),_:2},1032,["color"])])),type:o((({record:e})=>[i(U,{value:e.type,dict:n(v)},null,8,["value","dict"])])),_:1},8,["data","loading","pagination","selected-keys","onSelectAll","onSelect","onRefresh"])])}}});export{v as default};
