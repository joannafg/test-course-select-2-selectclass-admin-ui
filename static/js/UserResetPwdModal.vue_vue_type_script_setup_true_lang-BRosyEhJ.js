import{r as e}from"./user-D7V0nsbJ.js";import{d as s,r as a,A as l,c as o,w as r,J as t,f as u,a as n,h as i,o as d,M as m}from"./index-BAyZi_co.js";import{_ as c}from"./GiForm-BWZRNfN-.js";import{u as p}from"./useResetReactive-NMdkdCz2.js";import{e as f}from"./encrypt-fe7GwHAY.js";const v=s({__name:"UserResetPwdModal",emits:["save-success"],setup(s,{expose:v,emit:w}){const b=w,y=a(""),h=a(!1),R=a(),_={form:{size:"large"},btns:{hide:!0}},[j,x]=p({}),g=l([{label:"password",field:"newPassword",type:"input-password",rules:[{required:!0,message:"please enter the password"}]}]),P=()=>{var e,s;null==(s=null==(e=R.value)?void 0:e.formRef)||s.resetFields(),x()},k=async()=>{var s,a;try{return!(await(null==(a=null==(s=R.value)?void 0:s.formRef)?void 0:a.validate()))&&(await e({newPassword:f(j.newPassword)||""},y.value),m.success("reset successfully"),b("save-success"),!0)}catch(l){return!1}};return v({onOpen:e=>{P(),y.value=e,h.value=!0}}),(e,s)=>{const a=n("a-modal");return d(),o(a,{visible:u(h),"onUpdate:visible":s[1]||(s[1]=e=>t(h)?h.value=e:null),title:"reset password","mask-closable":!1,"esc-to-close":!1,"modal-style":{maxWidth:"520px"},width:"90%",draggable:"",onBeforeOk:k,onClose:P},{default:r((()=>[i(u(c),{ref_key:"formRef",ref:R,modelValue:u(j),"onUpdate:modelValue":s[0]||(s[0]=e=>t(j)?j.value=e:null),options:_,columns:u(g)},null,8,["modelValue","columns"])])),_:1},8,["visible"])}}});export{v as _};
