import{b as e}from"./index-FaVgdj3V.js";import{d as a,r as t,B as s,c as l,a as o,f as i,w as n,h as r,C as u,G as c,e as d,M as f,O as _,a0 as m,o as y,x as A}from"./index-BAyZi_co.js";import{l as v,u as C,r as p}from"./option-1orMv3he.js";import{u as L}from"./useResetReactive-NMdkdCz2.js";const N=A(a({name:"LoginSetting",__name:"LoginSetting",setup(a){const{width:A}=e(),N=t(!1),E=t(),[k]=L({LOGIN_CAPTCHA_ENABLED:1}),g={LOGIN_CAPTCHA_ENABLED:[{required:!0,message:"please select"}]},h=t({LOGIN_CAPTCHA_ENABLED:{}}),O=()=>{var e;null==(e=E.value)||e.resetFields(),k.LOGIN_CAPTCHA_ENABLED=h.value.LOGIN_CAPTCHA_ENABLED.value||0},b=t(!1),w=()=>{b.value=!0},I=()=>{O(),b.value=!1},G={category:"LOGIN"},B=async()=>{try{N.value=!0;const{data:e}=await v(G);h.value=e.reduce(((e,a)=>(e[a.code]={...a,value:Number.parseInt(a.value)},e)),{}),I()}finally{N.value=!1}},D=async()=>{var e;if(await(null==(e=E.value)?void 0:e.validate()))return!1;await C(Object.entries(k).map((([e,a])=>({id:h.value[e].id,code:e,value:a})))),await B(),f.success("save successfully")},H=async()=>{await p(G),f.success("restore successfully"),await B()},P=()=>{_.warning({title:"warning",content:"are you sure to restore the login configuration to the default value?",hideCancel:!1,maskClosable:!1,onOk:H})};return s((()=>{B()})),(e,a)=>{const t=o("a-switch"),s=o("a-form-item"),f=o("icon-edit"),_=o("a-button"),v=o("icon-undo"),C=o("icon-save"),p=o("icon-refresh"),L=o("a-space"),G=o("a-form"),B=o("a-spin"),H=m("permission");return y(),l(B,{loading:i(N)},{default:n((()=>[r(G,{ref_key:"formRef",ref:E,model:i(k),rules:g,"auto-label-width":"","label-align":"left",layout:i(A)>=500?"horizontal":"vertical",disabled:!i(b),"scroll-to-first-error":""},{default:n((()=>[r(s,{field:"LOGIN_CAPTCHA_ENABLED",label:i(h).LOGIN_CAPTCHA_ENABLED.name},{default:n((()=>[r(t,{modelValue:i(k).LOGIN_CAPTCHA_ENABLED,"onUpdate:modelValue":a[0]||(a[0]=e=>i(k).LOGIN_CAPTCHA_ENABLED=e),type:"round","checked-value":1,"unchecked-value":0},{checked:n((()=>a[1]||(a[1]=[u("yes")]))),unchecked:n((()=>a[2]||(a[2]=[u("no")]))),_:1},8,["modelValue"])])),_:1},8,["label"]),r(L,{style:{"margin-bottom":"16px"}},{default:n((()=>[i(b)?d("",!0):c((y(),l(_,{key:0,type:"primary",onClick:w},{icon:n((()=>[r(f)])),default:n((()=>[a[3]||(a[3]=u("modify "))])),_:1})),[[H,["system:config:update"]]]),i(b)?d("",!0):c((y(),l(_,{key:1,onClick:P},{icon:n((()=>[r(v)])),default:n((()=>[a[4]||(a[4]=u("restore "))])),_:1})),[[H,["system:config:reset"]]]),i(b)?(y(),l(_,{key:2,type:"primary",onClick:D},{icon:n((()=>[r(C)])),default:n((()=>[a[5]||(a[5]=u("save "))])),_:1})):d("",!0),i(b)?(y(),l(_,{key:3,onClick:O},{icon:n((()=>[r(p)])),default:n((()=>[a[6]||(a[6]=u("reset "))])),_:1})):d("",!0),i(b)?(y(),l(_,{key:4,onClick:I},{icon:n((()=>[r(v)])),default:n((()=>[a[7]||(a[7]=u("cancel "))])),_:1})):d("",!0)])),_:1})])),_:1},8,["model","layout","disabled"])])),_:1},8,["loading"])}}}),[["__scopeId","data-v-0ca89496"]]);export{N as default};
