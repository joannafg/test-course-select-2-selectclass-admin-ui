import{d as e,r as a,p as s,B as l,b as t,g as o,h as r,w as c,a as n,f as d,C as i,t as u,c as p,W as v,o as h,x as f}from"./index-BAyZi_co.js";import{u as m}from"./useDept-CXLwDhMr.js";const w={class:"container"},k={class:"search"},y={class:"tree-wrapper"},_={class:"tree"},x=f(e({__name:"index",emits:["node-click"],setup(e,{emit:f}){const x=f,g=a(),L=e=>{g.value&&g.value[0]===e[0]||(g.value=e,x("node-click",e))},C=a(),{deptList:I,getDeptList:b}=m({onSuccess:()=>{v((()=>{var e,a;null==(e=C.value)||e.expandAll(!0),L([null==(a=I.value[0])?void 0:a.key])}))}}),D=a(""),V=s((()=>D.value?(e=>{const a=s=>{const l=[];return s.forEach((s=>{var t;if(null==(t=s.title)?void 0:t.toLowerCase().includes(e))l.push({...s});else if(s.children){const e=a(s.children);e.length&&l.push({...s,children:e})}})),l};return a(I.value)})(D.value.toLowerCase()):I.value));return l((()=>{b()})),(e,a)=>{const s=n("icon-search"),l=n("a-input"),v=n("IconCaretDown"),f=n("IconIdcard"),m=n("a-typography-paragraph"),x=n("a-tree");return h(),t("div",w,[o("div",k,[r(l,{modelValue:D.value,"onUpdate:modelValue":a[0]||(a[0]=e=>D.value=e),placeholder:"search the department name","allow-clear":""},{prefix:c((()=>[r(s)])),_:1},8,["modelValue"])]),o("div",y,[o("div",_,[r(x,{ref_key:"treeRef",ref:C,data:d(V),"show-line":"","block-node":"","default-expand-all":"","selected-keys":g.value,onSelect:L},{"switcher-icon":c(((e,{isLeaf:a})=>[a?(h(),p(f,{key:1})):(h(),p(v,{key:0}))])),title:c((e=>[r(m,{ellipsis:{rows:1,showTooltip:!0,css:!0}},{default:c((()=>[i(u(null==e?void 0:e.title),1)])),_:2},1024)])),_:1},8,["data","selected-keys"])])])])}}}),[["__scopeId","data-v-7be31c82"]]);export{x as default};
