import{b as e}from"./index-FaVgdj3V.js";import{g as l,u as a,a as s}from"./dict-BKgVatZ-.js";import{_ as o}from"./GiForm-BWZRNfN-.js";import{d as t,r as u,p as i,A as r,c as d,w as c,f as n,J as m,a as p,h as f,o as v,M as b}from"./index-BAyZi_co.js";import{u as y}from"./useResetReactive-NMdkdCz2.js";const h=t({__name:"DictItemAddModal",emits:["save-success"],setup(t,{expose:h,emit:w}){const V=w,{width:x}=e(),g=u(""),k=u(""),_=u(!1),R=i((()=>!!g.value)),j=i((()=>R.value?"modify dictionary item":"add dictionary item")),U=u(),A={form:{size:"large"},btns:{hide:!0}},[q,z]=y({color:"blue",sort:999,status:1}),F=r([{label:"label",field:"label",type:"input",rules:[{required:!0,message:"please enter the label"}]},{label:"value",field:"value",type:"input",rules:[{required:!0,message:"please enter the value"}]},{label:"label color",field:"color",type:"input"},{label:"sort",field:"sort",type:"input-number",props:{min:1,mode:"button"}},{label:"description",field:"description",type:"textarea",props:{maxLength:200,autoSize:{minRows:3,maxRows:5}}},{label:"status",field:"status",type:"switch",props:{type:"round",checkedValue:1,uncheckedValue:2,checkedText:"enable",uncheckedText:"disable"}}]),I=()=>{var e,l;null==(l=null==(e=U.value)?void 0:e.formRef)||l.resetFields(),z()},M=async()=>{var e,l;try{return!(await(null==(l=null==(e=U.value)?void 0:e.formRef)?void 0:l.validate()))&&(R.value?(await a(q,g.value),b.success("modify successfully")):(await s({...q,dictId:k.value}),b.success("add successfully")),V("save-success"),!0)}catch(o){return!1}};return h({onAdd:e=>{I(),g.value="",k.value=e,_.value=!0},onUpdate:async e=>{I(),g.value=e;const{data:a}=await l(e);Object.assign(q,a),_.value=!0}}),(e,l)=>{const a=p("a-color-picker"),s=p("a-input"),t=p("a-modal");return v(),d(t,{visible:n(_),"onUpdate:visible":l[3]||(l[3]=e=>m(_)?_.value=e:null),title:n(j),"mask-closable":!1,"esc-to-close":!1,width:n(x)>=500?500:"100%",draggable:"",onBeforeOk:M,onClose:I},{default:c((()=>[f(n(o),{ref_key:"formRef",ref:U,modelValue:n(q),"onUpdate:modelValue":l[2]||(l[2]=e=>m(q)?q.value=e:null),options:A,columns:n(F)},{color:c((()=>[f(s,{modelValue:n(q).color,"onUpdate:modelValue":l[1]||(l[1]=e=>n(q).color=e),placeholder:"please select or enter the label color","allow-clear":""},{suffix:c((()=>[f(a,{modelValue:n(q).color,"onUpdate:modelValue":l[0]||(l[0]=e=>n(q).color=e)},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1},8,["modelValue","columns"])])),_:1},8,["visible","title","width"])}}});export{h as _};
