import{_ as e}from"./index-B7Sos0mo.js";import{_ as t}from"./index-5q-8k9YQ.js";import{d as a,A as o,ar as s,c as i,w as l,f as r,a as n,h as d,g as m,G as p,C as c,a0 as u,o as g,Z as f}from"./index-BAyZi_co.js";import{l as h,e as x}from"./log-Zo2beUmC.js";import{_}from"./index.vue_vue_type_script_setup_true_lang-Dekw0iDL.js";import{u as y}from"./useTable-DUTUCT70.js";import{u as Y}from"./useDownload-C-k5xGNE.js";const b=a({name:"LoginLog",__name:"index",setup(a){const b=o({module:"登录",createTime:[s().subtract(6,"day").startOf("day").format("YYYY-MM-DD HH:mm:ss"),s().endOf("day").format("YYYY-MM-DD HH:mm:ss")],sort:["createTime,desc"]}),{tableData:w,loading:I,pagination:C,search:D}=y((e=>h({...b,...e})),{immediate:!0}),H=[{title:"number",width:66,align:"center",render:({rowIndex:e})=>f("span",{},e+1+(C.current-1)*C.pageSize)},{title:"login time",dataIndex:"createTime",width:180},{title:"user nickname",dataIndex:"createUserString",ellipsis:!0,tooltip:!0},{title:"login behavior",dataIndex:"description"},{title:"status",slotName:"status",align:"center",filterable:{filters:[{text:"success",value:"1"},{text:"failed",value:"2"}],filter:()=>!0,alignLeft:!0}},{title:"login IP",dataIndex:"ip",ellipsis:!0,tooltip:!0},{title:"login location",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"browser",dataIndex:"browser",ellipsis:!0,tooltip:!0},{title:"terminal system",dataIndex:"os",ellipsis:!0,tooltip:!0}],M=()=>{b.ip=void 0,b.createUserString=void 0,b.createTime=[s().subtract(6,"day").startOf("day").format("YYYY-MM-DD HH:mm:ss"),s().endOf("day").format("YYYY-MM-DD HH:mm:ss")],b.status=void 0,D()},V=(e,t)=>{try{const a=H[e.split("_").pop()].slotName;b[a]=t.join(","),D()}catch(a){D()}},j=()=>{Y((()=>x(b)))};return(a,o)=>{const s=n("icon-search"),f=n("a-input"),h=n("icon-refresh"),x=n("a-button"),y=n("icon-download"),Y=t,v=n("a-tag"),T=n("a-tooltip"),U=e,k=u("permission");return g(),i(U,{"row-key":"id",data:r(w),columns:H,loading:r(I),scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:r(C),"disabled-tools":["size","setting"],onFilterChange:V,onRefresh:r(D)},{"toolbar-left":l((()=>[d(f,{modelValue:r(b).createUserString,"onUpdate:modelValue":o[0]||(o[0]=e=>r(b).createUserString=e),placeholder:"search login user","allow-clear":"",onChange:r(D)},{prefix:l((()=>[d(s)])),_:1},8,["modelValue","onChange"]),d(f,{modelValue:r(b).ip,"onUpdate:modelValue":o[1]||(o[1]=e=>r(b).ip=e),placeholder:"search login IP or location","allow-clear":"",onChange:r(D)},{prefix:l((()=>[d(s)])),_:1},8,["modelValue","onChange"]),d(_,{modelValue:r(b).createTime,"onUpdate:modelValue":o[2]||(o[2]=e=>r(b).createTime=e),onChange:r(D)},null,8,["modelValue","onChange"]),d(x,{onClick:M},{icon:l((()=>[d(h)])),default:l((()=>o[3]||(o[3]=[c("reset")]))),_:1})])),"toolbar-right":l((()=>[p((g(),i(x,{onClick:j},{icon:l((()=>[d(y)])),default:l((()=>o[4]||(o[4]=[c("export")]))),_:1})),[[k,["monitor:log:export"]]])])),status:l((({record:e})=>[1===e.status?(g(),i(v,{key:0,color:"green"},{default:l((()=>[d(Y,{type:"success",style:{width:"5px",height:"5px"}}),o[5]||(o[5]=m("span",{style:{"margin-left":"5px"}},"success",-1))])),_:1})):(g(),i(T,{key:1,content:e.errorMsg},{default:l((()=>[d(v,{color:"red",style:{cursor:"pointer"}},{default:l((()=>[d(Y,{type:"danger",style:{width:"5px",height:"5px"}}),o[6]||(o[6]=m("span",{style:{"margin-left":"5px"}},"failed",-1))])),_:1})])),_:2},1032,["content"]))])),_:1},8,["data","loading","pagination","onRefresh"])}}});export{b as _};
