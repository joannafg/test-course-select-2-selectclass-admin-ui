import{c as t,e,dD as i,f as n,X as o,t as a,aq as r,G as s,dE as l,U as u,$ as h,dF as d,cQ as c,dG as p,dH as f,dI as g,dJ as m,bT as v,g as y,aM as x,z as _,bi as w,cn as b,i as I,dK as M,aj as S,b as D,a as C,dL as T,bV as A,aO as L,dM as k,dN as P,dO as O,df as N,dP as R,x as B,dQ as E,_ as z,dR as G,aX as W,D as V,dS as H,dT as F,dU as U,dV as Y,dW as X,dX as Z,dY as K,dZ as q,d_ as j,d$ as Q,cY as $,e0 as J,e1 as tt,q as et,e2 as it,e3 as nt,e4 as ot,e5 as at,e6 as rt,e7 as st,e8 as lt,e9 as ut,ea as ht,eb as dt,ec as ct,ed as pt,ee as ft,ef as gt,eg as mt,eh as vt,dd as yt,cq as xt,B as _t,I as wt,aR as bt,aw as It,bb as Mt,b1 as St,ei as Dt,ej as Ct,r as Tt,ek as At,el as Lt,em as kt,en as Pt,eo as Ot,bm as Nt,ep as Rt,eq as Bt,er as Et,es as zt,et as Gt,eu as Wt,co as Vt,cL as Ht,be as Ft,aV as Ut,cE as Yt,dz as Xt,l as Zt,a3 as Kt,a1 as qt,ev as jt,ew as Qt,y as $t,ex as Jt,ey as te,ez as ee,bp as ie,eA as ne,cI as oe,eB as ae,eC as re,eD as se,eE as le,eF as ue,eG as he,eH as de,d2 as ce,b3 as pe,eI as fe,ar as ge,cm as me,v as ve,b7 as ye,aL as xe,a_ as _e,aT as we,H as be,J as Ie,aA as Me,aP as Se,aE as De,aD as Ce,aB as Te,c9 as Ae,d as Le,bG as ke,eJ as Pe,bL as Oe,bO as Ne,bK as Re,S as Be,eK as Ee,au as ze,bY as Ge,bD as We,A as Ve,n as He,b9 as Fe,ba as Ue,aC as Ye,av as Xe,j as Ze,bv as Ke,k as qe,cK as je,bf as Qe,d1 as $e,cr as Je,cs as ti,bo as ei,dk as ii,s as ni,by as oi,bx as ai,ct as ri,aQ as si,dn as li,bW as ui,aK as hi,eL as di,d3 as ci,eM as pi,eN as fi,aN as gi,eO as mi,cB as vi,eP as yi,bN as xi,bh as _i,bu as wi,eQ as bi,eR as Ii,eS as Mi,Q as Si,eT as Di,eU as Ci,eV as Ti,at as Ai,bZ as Li,eW as ki,c3 as Pi,c4 as Oi,dc as Ni,bC as Ri,bq as Bi,b5 as Ei,aY as zi,b6 as Gi}from"./echarts-BUOH3neG.js";function Wi(t){return null==t?0:t.length||1}function Vi(t){return t}var Hi=function(){function t(t,e,i,n,o,a){this._old=t,this._new=e,this._oldKeyGetter=i||Vi,this._newKeyGetter=n||Vi,this.context=o,this._diffModeMultiple="multiple"===a}return t.prototype.add=function(t){return this._add=t,this},t.prototype.update=function(t){return this._update=t,this},t.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},t.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},t.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},t.prototype.remove=function(t){return this._remove=t,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var t=this._old,e=this._new,i={},n=new Array(t.length),o=new Array(e.length);this._initIndexMap(t,null,n,"_oldKeyGetter"),this._initIndexMap(e,i,o,"_newKeyGetter");for(var a=0;a<t.length;a++){var r=n[a],s=i[r],l=Wi(s);if(l>1){var u=s.shift();1===s.length&&(i[r]=s[0]),this._update&&this._update(u,a)}else 1===l?(i[r]=null,this._update&&this._update(s,a)):this._remove&&this._remove(a)}this._performRestAdd(o,i)},t.prototype._executeMultiple=function(){var t=this._old,e=this._new,i={},n={},o=[],a=[];this._initIndexMap(t,i,o,"_oldKeyGetter"),this._initIndexMap(e,n,a,"_newKeyGetter");for(var r=0;r<o.length;r++){var s=o[r],l=i[s],u=n[s],h=Wi(l),d=Wi(u);if(h>1&&1===d)this._updateManyToOne&&this._updateManyToOne(u,l),n[s]=null;else if(1===h&&d>1)this._updateOneToMany&&this._updateOneToMany(u,l),n[s]=null;else if(1===h&&1===d)this._update&&this._update(u,l),n[s]=null;else if(h>1&&d>1)this._updateManyToMany&&this._updateManyToMany(u,l),n[s]=null;else if(h>1)for(var c=0;c<h;c++)this._remove&&this._remove(l[c]);else this._remove&&this._remove(l)}this._performRestAdd(a,n)},t.prototype._performRestAdd=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=e[n],a=Wi(o);if(a>1)for(var r=0;r<a;r++)this._add&&this._add(o[r]);else 1===a&&this._add&&this._add(o);e[n]=null}},t.prototype._initIndexMap=function(t,e,i,n){for(var o=this._diffModeMultiple,a=0;a<t.length;a++){var r="_ec_"+this[n](t[a],a);if(o||(i[a]=r),e){var s=e[r],l=Wi(s);0===l?(e[r]=a,o&&i.push(r)):1===l?e[r]=[s,a]:s.push(a)}}},t}(),Fi=function(){function t(t,e){this._encode=t,this._schema=e}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function Ui(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function Yi(t){return"category"===t?"ordinal":"time"===t?"time":"float"}var Xi=function(){return function(t){this.otherDims={},null!=t&&o(this,t)}}(),Zi=a(),Ki={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},qi=function(){function t(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=$i(this.source)))},t.prototype.getSourceDimensionIndex=function(t){return s(this._dimNameMap.get(t),-1)},t.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},t.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=l(this.source),i=!Ji(t),n="",o=[],a=0,r=0;a<t;a++){var s=void 0,u=void 0,h=void 0,d=this.dimensions[r];if(d&&d.storeDimIndex===a)s=e?d.name:null,u=d.type,h=d.ordinalMeta,r++;else{var c=this.getSourceDimension(a);c&&(s=e?c.name:null,u=c.type)}o.push({property:s,type:u,ordinalMeta:h}),!e||null==s||d&&d.isCalculationCoord||(n+=i?s.replace(/\`/g,"`1").replace(/\$/g,"`2"):s),n+="$",n+=Ki[u]||"f",h&&(n+=h.uid),n+="$"}var p=this.source;return{dimensions:o,hash:[p.seriesLayoutBy,p.startIndex,n].join("$$")}},t.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,i=0;e<this._fullDimCount;e++){var n=void 0,o=this.dimensions[i];if(o&&o.storeDimIndex===e)o.isCalculationCoord||(n=o.name),i++;else{var a=this.getSourceDimension(e);a&&(n=a.name)}t.push(n)}return t},t.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function ji(t){return t instanceof qi}function Qi(e){for(var i=t(),n=0;n<(e||[]).length;n++){var o=e[n],a=r(o)?o.name:o;null!=a&&null==i.get(a)&&i.set(a,n)}return i}function $i(t){var e=Zi(t);return e.dimNameMap||(e.dimNameMap=Qi(t.dimensionsDefine))}function Ji(t){return t>30}var tn,en,nn,on,an,rn,sn,ln=r,un=n,hn="undefined"==typeof Int32Array?Array:Int32Array,dn=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],cn=["_approximateExtent"],pn=function(){function a(i,n){var o;this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var a=!1;ji(i)?(o=i.dimensions,this._dimOmitted=i.isDimensionOmitted(),this._schema=i):(a=!0,o=i),o=o||["x","y"];for(var r={},s=[],l={},h=!1,d={},c=0;c<o.length;c++){var p=o[c],f=u(p)?new Xi({name:p}):p instanceof Xi?p:new Xi(p),g=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=g,f.coordDimIndex=0);var m=f.otherDims=f.otherDims||{};s.push(g),r[g]=f,null!=d[g]&&(h=!0),f.createInvertedIndices&&(l[g]=[]),0===m.itemName&&(this._nameDimIdx=c),0===m.itemId&&(this._idDimIdx=c),a&&(f.storeDimIndex=c)}if(this.dimensions=s,this._dimInfos=r,this._initGetDimensionInfo(h),this.hostModel=n,this._invertedIndicesMap=l,this._dimOmitted){var v=this._dimIdxToName=t();e(s,(function(t){v.set(r[t].storeDimIndex,t)}))}}return a.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(null==e)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var i=this._dimIdxToName.get(e);if(null!=i)return i;var n=this._schema.getSourceDimension(e);return n?n.name:void 0},a.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(null!=e)return e;if(null==t)return-1;var i=this._getDimInfo(t);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},a.prototype._recognizeDimIndex=function(t){if(h(t)||null!=t&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},a.prototype._getStoreDimIndex=function(t){return this.getDimensionIndex(t)},a.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},a.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(t){return e.hasOwnProperty(t)?e[t]:void 0}:function(t){return e[t]}},a.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},a.prototype.mapDimension=function(t,e){var i=this._dimSummary;if(null==e)return i.encodeFirstDimNotExtra[t];var n=i.encode[t];return n?n[e]:null},a.prototype.mapDimensionsAll=function(t){return(this._dimSummary.encode[t]||[]).slice()},a.prototype.getStore=function(){return this._store},a.prototype.initData=function(o,a,r){var s,l=this;if(o instanceof f&&(s=o),!s){var u=this.dimensions,h=d(o)||c(o)?new p(o,u.length):o;s=new f;var g=un(u,(function(t){return{type:l._dimInfos[t].type,property:t}}));s.initData(h,g,r)}this._store=s,this._nameList=(a||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,s.count()),this._dimSummary=function(o,a){var r={},s=r.encode={},l=t(),u=[],h=[],d={};e(o.dimensions,(function(t){var e,n=o.getDimensionInfo(t),a=n.coordDim;if(a){var r=n.coordDimIndex;Ui(s,a)[r]=t,n.isExtraCoord||(l.set(a,1),"ordinal"!==(e=n.type)&&"time"!==e&&(u[0]=t),Ui(d,a)[r]=o.getDimensionIndex(n.name)),n.defaultTooltip&&h.push(t)}i.each((function(t,e){var i=Ui(s,e),o=n.otherDims[e];null!=o&&!1!==o&&(i[o]=n.name)}))}));var c=[],p={};l.each((function(t,e){var i=s[e];p[e]=i[0],c=c.concat(i)})),r.dataDimsOnCoord=c,r.dataDimIndicesOnCoord=n(c,(function(t){return o.getDimensionInfo(t).storeDimIndex})),r.encodeFirstDimNotExtra=p;var f=s.label;f&&f.length&&(u=f.slice());var g=s.tooltip;return g&&g.length?h=g.slice():h.length||(h=u.slice()),s.defaultedLabel=u,s.defaultedTooltip=h,r.userOutput=new Fi(d,a),r}(this,this._schema),this.userOutput=this._dimSummary.userOutput},a.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},a.prototype.appendValues=function(t,e){var i=this._store.appendValues(t,e&&e.length),n=i.start,o=i.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var r=n;r<o;r++){var s=r-n;this._nameList[r]=e[s],a&&sn(this,r)}},a.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,i=0;i<e.length;i++){var n=this._dimInfos[e[i]];n.ordinalMeta&&t.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},a.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return null==this._idDimIdx&&t.getSource().sourceFormat!==g&&!t.fillStorage},a.prototype._doInit=function(t,e){if(!(t>=e)){var i=this._store.getProvider();this._updateOrdinalMeta();var n=this._nameList,o=this._idList;if(i.getSource().sourceFormat===D&&!i.pure)for(var a=[],r=t;r<e;r++){var s=i.getItem(r,a);if(!this.hasItemOption&&m(s)&&(this.hasItemOption=!0),s){var l=s.name;null==n[r]&&null!=l&&(n[r]=v(l,null));var u=s.id;null==o[r]&&null!=u&&(o[r]=v(u,null))}}if(this._shouldMakeIdFromName())for(r=t;r<e;r++)sn(this,r);tn(this)}},a.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},a.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},a.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},a.prototype.setCalculationInfo=function(t,e){ln(t)?o(this._calculationInfo,t):this._calculationInfo[t]=e},a.prototype.getName=function(t){var e=this.getRawIndex(t),i=this._nameList[e];return null==i&&null!=this._nameDimIdx&&(i=nn(this,this._nameDimIdx,e)),null==i&&(i=""),i},a.prototype._getCategory=function(t,e){var i=this._store.get(t,e),n=this._store.getOrdinalMeta(t);return n?n.categories[i]:i},a.prototype.getId=function(t){return en(this,this.getRawIndex(t))},a.prototype.count=function(){return this._store.count()},a.prototype.get=function(t,e){var i=this._store,n=this._dimInfos[t];if(n)return i.get(n.storeDimIndex,e)},a.prototype.getByRawIndex=function(t,e){var i=this._store,n=this._dimInfos[t];if(n)return i.getByRawIndex(n.storeDimIndex,e)},a.prototype.getIndices=function(){return this._store.getIndices()},a.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},a.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},a.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},a.prototype.getValues=function(t,e){var i=this,n=this._store;return y(t)?n.getValues(un(t,(function(t){return i._getStoreDimIndex(t)})),e):n.getValues(t)},a.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,i=0,n=e.length;i<n;i++)if(isNaN(this._store.get(e[i],t)))return!1;return!0},a.prototype.indexOfName=function(t){for(var e=0,i=this._store.count();e<i;e++)if(this.getName(e)===t)return e;return-1},a.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},a.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},a.prototype.rawIndexOf=function(t,e){var i=t&&this._invertedIndicesMap[t],n=i&&i[e];return null==n||isNaN(n)?-1:n},a.prototype.indicesOfNearest=function(t,e,i){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,i)},a.prototype.each=function(t,e,i){I(t)&&(i=e,e=t,t=[]);var n=i||this,o=un(on(t),this._getStoreDimIndex,this);this._store.each(o,n?x(e,n):e)},a.prototype.filterSelf=function(t,e,i){I(t)&&(i=e,e=t,t=[]);var n=i||this,o=un(on(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,n?x(e,n):e),this},a.prototype.selectRange=function(t){var i=this,n={},o=_(t);return e(o,(function(e){var o=i._getStoreDimIndex(e);n[o]=t[e]})),this._store=this._store.selectRange(n),this},a.prototype.mapArray=function(t,e,i){I(t)&&(i=e,e=t,t=[]),i=i||this;var n=[];return this.each(t,(function(){n.push(e&&e.apply(this,arguments))}),i),n},a.prototype.map=function(t,e,i,n){var o=i||n||this,a=un(on(t),this._getStoreDimIndex,this),r=rn(this);return r._store=this._store.map(a,o?x(e,o):e),r},a.prototype.modify=function(t,e,i,n){var o=i||n||this,a=un(on(t),this._getStoreDimIndex,this);this._store.modify(a,o?x(e,o):e)},a.prototype.downSample=function(t,e,i,n){var o=rn(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),e,i,n),o},a.prototype.minmaxDownSample=function(t,e){var i=rn(this);return i._store=this._store.minmaxDownSample(this._getStoreDimIndex(t),e),i},a.prototype.lttbDownSample=function(t,e){var i=rn(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),i},a.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},a.prototype.getItemModel=function(t){var e=this.hostModel,i=this.getRawDataItem(t);return new w(i,e,e&&e.ecModel)},a.prototype.diff=function(t){var e=this;return new Hi(t?t.getStore().getIndices():[],this.getStore().getIndices(),(function(e){return en(t,e)}),(function(t){return en(e,t)}))},a.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},a.prototype.setVisual=function(t,e){this._visual=this._visual||{},ln(t)?o(this._visual,t):this._visual[t]=e},a.prototype.getItemVisual=function(t,e){var i=this._itemVisuals[t],n=i&&i[e];return null==n?this.getVisual(e):n},a.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},a.prototype.ensureUniqueItemVisual=function(t,e){var i=this._itemVisuals,n=i[t];n||(n=i[t]={});var a=n[e];return null==a&&(a=this.getVisual(e),y(a)?a=a.slice():ln(a)&&(a=o({},a)),n[e]=a),a},a.prototype.setItemVisual=function(t,e,i){var n=this._itemVisuals[t]||{};this._itemVisuals[t]=n,ln(e)?o(n,e):n[e]=i},a.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},a.prototype.setLayout=function(t,e){ln(t)?o(this._layout,t):this._layout[t]=e},a.prototype.getLayout=function(t){return this._layout[t]},a.prototype.getItemLayout=function(t){return this._itemLayouts[t]},a.prototype.setItemLayout=function(t,e,i){this._itemLayouts[t]=i?o(this._itemLayouts[t]||{},e):e},a.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},a.prototype.setItemGraphicEl=function(t,e){var i=this.hostModel&&this.hostModel.seriesIndex;b(i,this.dataType,t,e),this._graphicEls[t]=e},a.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},a.prototype.eachItemGraphicEl=function(t,i){e(this._graphicEls,(function(e,n){e&&t&&t.call(i,e,n)}))},a.prototype.cloneShallow=function(t){return t||(t=new a(this._schema?this._schema:un(this.dimensions,this._getDimInfo,this),this.hostModel)),an(t,this),t._store=this._store,t},a.prototype.wrapMethod=function(t,e){var i=this[t];I(i)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=i.apply(this,arguments);return e.apply(this,[t].concat(M(arguments)))})},a.internalField=(tn=function(t){var i=t._invertedIndicesMap;e(i,(function(e,n){var o=t._dimInfos[n],a=o.ordinalMeta,r=t._store;if(a){e=i[n]=new hn(a.categories.length);for(var s=0;s<e.length;s++)e[s]=-1;for(s=0;s<r.count();s++)e[r.get(o.storeDimIndex,s)]=s}}))},nn=function(t,e,i){return v(t._getCategory(e,i),null)},en=function(t,e){var i=t._idList[e];return null==i&&null!=t._idDimIdx&&(i=nn(t,t._idDimIdx,e)),null==i&&(i="e\0\0"+e),i},on=function(t){return y(t)||(t=null!=t?[t]:[]),t},rn=function(t){var e=new a(t._schema?t._schema:un(t.dimensions,t._getDimInfo,t),t.hostModel);return an(e,t),e},an=function(t,i){e(dn.concat(i.__wrappedMethods||[]),(function(e){i.hasOwnProperty(e)&&(t[e]=i[e])})),t.__wrappedMethods=i.__wrappedMethods,e(cn,(function(e){t[e]=S(i[e])})),t._calculationInfo=o({},i._calculationInfo)},void(sn=function(t,e){var i=t._nameList,n=t._idList,o=t._nameDimIdx,a=t._idDimIdx,r=i[e],s=n[e];if(null==r&&null!=o&&(i[e]=r=nn(t,o,e)),null==s&&null!=a&&(n[e]=s=nn(t,a,e)),null==s&&null!=r){var l=t._nameRepeatCount,u=l[r]=(l[r]||0)+1;s=r,u>1&&(s+="__ec__"+u),n[e]=s}})),a}();function fn(n,a){d(n)||(n=C(n));var s=(a=a||{}).coordDimensions||[],l=a.dimensionsDefine||n.dimensionsDefine||[],h=t(),c=[],p=function(t,i,n,o){var a=Math.max(t.dimensionsDetectedCount||1,i.length,n.length,o||0);return e(i,(function(t){var e;r(t)&&(e=t.dimsDef)&&(a=Math.max(a,e.length))})),a}(n,s,l,a.dimensionsCount),f=a.canOmitUnusedDimensions&&Ji(p),g=l===n.dimensionsDefine,m=g?$i(n):Qi(l),v=a.encodeDefine;!v&&a.encodeDefaulter&&(v=a.encodeDefaulter(n,p));for(var y=t(v),x=new T(p),_=0;_<x.length;_++)x[_]=-1;function w(t){var e=x[t];if(e<0){var i=l[t],n=r(i)?i:{name:i},o=new Xi,a=n.name;null!=a&&null!=m.get(a)&&(o.name=o.displayName=a),null!=n.type&&(o.type=n.type),null!=n.displayName&&(o.displayName=n.displayName);var s=c.length;return x[t]=s,o.storeDimIndex=t,c.push(o),o}return c[e]}if(!f)for(_=0;_<p;_++)w(_);y.each((function(t,i){var n=A(t).slice();if(1===n.length&&!u(n[0])&&n[0]<0)y.set(i,!1);else{var o=y.set(i,[]);e(n,(function(t,e){var n=u(t)?m.get(t):t;null!=n&&n<p&&(o[e]=n,I(w(n),i,e))}))}}));var b=0;function I(t,e,n){null!=i.get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,h.set(e,!0))}e(s,(function(t){var i,n,a,s;if(u(t))i=t,s={};else{i=(s=t).name;var l=s.ordinalMeta;s.ordinalMeta=null,(s=o({},s)).ordinalMeta=l,n=s.dimsDef,a=s.otherDims,s.name=s.coordDim=s.coordDimIndex=s.dimsDef=s.otherDims=null}var h=y.get(i);if(!1!==h){if(!(h=A(h)).length)for(var d=0;d<(n&&n.length||1);d++){for(;b<p&&null!=w(b).coordDim;)b++;b<p&&h.push(b++)}e(h,(function(t,e){var o=w(t);if(g&&null!=s.type&&(o.type=s.type),I(L(o,s),i,e),null==o.name&&n){var l=n[e];!r(l)&&(l={name:l}),o.name=o.displayName=l.name,o.defaultTooltip=l.defaultTooltip}a&&L(o.otherDims,a)}))}}));var M=a.generateCoord,S=a.generateCoordCount,D=null!=S;S=M?S||1:0;var O=M||"value";function N(t){null==t.name&&(t.name=t.coordDim)}if(f)e(c,(function(t){N(t)})),c.sort((function(t,e){return t.storeDimIndex-e.storeDimIndex}));else for(var R=0;R<p;R++){var B=w(R);null==B.coordDim&&(B.coordDim=gn(O,h,D),B.coordDimIndex=0,(!M||S<=0)&&(B.isExtraCoord=!0),S--),N(B),null!=B.type||k(n,R)!==P.Must&&(!B.isExtraCoord||null==B.otherDims.itemName&&null==B.otherDims.seriesName)||(B.type="ordinal")}return function(e){for(var i=t(),n=0;n<e.length;n++){var o=e[n],a=o.name,r=i.get(a)||0;r>0&&(o.name=a+(r-1)),r++,i.set(a,r)}}(c),new qi({source:n,dimensions:c,fullDimensionCount:p,dimensionOmitted:f})}function gn(t,e,i){if(i||e.hasKey(t)){for(var n=0;e.hasKey(t+n);)n++;t+=n}return e.set(t,!0),t}function mn(t,i,n){var o,a,r,s=(n=n||{}).byIndex,l=n.stackedCoordDimension;!function(t){return!ji(t.schema)}(i)?(a=i.schema,o=a.dimensions,r=i.store):o=i;var h,d,c,p,f=!(!t||!t.get("stack"));if(e(o,(function(t,e){u(t)&&(o[e]=t={name:t}),f&&!t.isExtraCoord&&(s||h||!t.ordinalMeta||(h=t),d||"ordinal"===t.type||"time"===t.type||l&&l!==t.coordDim||(d=t))})),!d||s||h||(s=!0),d){c="__\0ecstackresult_"+t.id,p="__\0ecstackedover_"+t.id,h&&(h.createInvertedIndices=!0);var g=d.coordDim,m=d.type,v=0;e(o,(function(t){t.coordDim===g&&v++}));var y={name:c,coordDim:g,coordDimIndex:v,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},x={name:p,coordDim:p,coordDimIndex:v+1,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};a?(r&&(y.storeDimIndex=r.ensureCalculationDimension(p,m),x.storeDimIndex=r.ensureCalculationDimension(c,m)),a.appendCalculationDimension(y),a.appendCalculationDimension(x)):(o.push(y),o.push(x))}return{stackedDimension:d&&d.name,stackedByDimension:h&&h.name,isStackedByIndex:s,stackedOverDimension:p,stackResultDimension:c}}function vn(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function yn(t,e){return vn(t,e)?t.getCalculationInfo("stackResultDimension"):e}var xn=function(){function t(t){this._setting=t||{},this._extent=[Infinity,-Infinity]}return t.prototype.getSetting=function(t){return this._setting[t]},t.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},t.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(t,e){var i=this._extent;isNaN(t)||(i[0]=t),isNaN(e)||(i[1]=e)},t.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(t){this._isBlank=t},t}();O(xn);var _n=0,wn=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++_n}return e.createByAxisModel=function(t){var i=t.option,o=i.data,a=o&&n(o,bn);return new e({categories:a,needCollect:!a,deduplication:!1!==i.dedplication})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var e,i=this._needCollect;if(!u(t)&&!i)return t;if(i&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var n=this._getOrCreateMap();return null==(e=n.get(t))&&(i?(e=this.categories.length,this.categories[e]=t,n.set(t,e)):e=NaN),e},e.prototype._getOrCreateMap=function(){return this._map||(this._map=t(this.categories))},e}();function bn(t){return r(t)&&null!=t.value?t.value:t+""}function In(t){return"interval"===t.type||"log"===t.type}function Mn(t,e,i,n){var o={},a=t[1]-t[0],r=o.interval=R(a/e);null!=i&&r<i&&(r=o.interval=i),null!=n&&r>n&&(r=o.interval=n);var s=o.intervalPrecision=Dn(r);return function(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),Cn(t,0,e),Cn(t,1,e),t[0]>t[1]&&(t[0]=t[1])}(o.niceTickExtent=[B(Math.ceil(t[0]/r)*r,s),B(Math.floor(t[1]/r)*r,s)],t),o}function Sn(t){var e=Math.pow(10,E(t)),i=t/e;return i?2===i?i=3:3===i?i=5:i*=2:i=1,B(i*e)}function Dn(t){return N(t)+2}function Cn(t,e,i){t[e]=Math.max(Math.min(t[e],i[1]),i[0])}function Tn(t,e){return t>=e[0]&&t<=e[1]}function An(t,e){return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])}function Ln(t,e){return t*(e[1]-e[0])+e[0]}var kn=function(t){function e(e){var i=t.call(this,e)||this;i.type="ordinal";var o=i.getSetting("ordinalMeta");return o||(o=new wn({})),y(o)&&(o=new wn({categories:n(o,(function(t){return r(t)?t.value:t}))})),i._ordinalMeta=o,i._extent=i.getSetting("extent")||[0,o.categories.length-1],i}return z(e,t),e.prototype.parse=function(t){return null==t?NaN:u(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return Tn(t=this.parse(t),this._extent)&&null!=this._ordinalMeta.categories[t]},e.prototype.normalize=function(t){return An(t=this._getTickNumber(this.parse(t)),this._extent)},e.prototype.scale=function(t){return t=Math.round(Ln(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],e=this._extent,i=e[0];i<=e[1];)t.push({value:i}),i++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(null!=t){for(var e=t.ordinalNumbers,i=this._ordinalNumbersByTick=[],n=this._ticksByOrdinalNumber=[],o=0,a=this._ordinalMeta.categories.length,r=Math.min(a,e.length);o<r;++o){var s=e[o];i[o]=s,n[s]=o}for(var l=0;o<a;++o){for(;null!=n[l];)l++;i.push(l),n[l]=o}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},e.prototype._getTickNumber=function(t){var e=this._ticksByOrdinalNumber;return e&&t>=0&&t<e.length?e[t]:t},e.prototype.getRawOrdinalNumber=function(t){var e=this._ordinalNumbersByTick;return e&&t>=0&&t<e.length?e[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var e=this.getRawOrdinalNumber(t.value),i=this._ordinalMeta.categories[e];return null==i?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(xn);xn.registerClass(kn);var Pn=B,On=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return z(e,t),e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return Tn(t,this._extent)},e.prototype.normalize=function(t){return An(t,this._extent)},e.prototype.scale=function(t){return Ln(t,this._extent)},e.prototype.setExtent=function(t,e){var i=this._extent;isNaN(t)||(i[0]=parseFloat(t)),isNaN(e)||(i[1]=parseFloat(e))},e.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),this.setExtent(e[0],e[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=Dn(t)},e.prototype.getTicks=function(t){var e=this._interval,i=this._extent,n=this._niceExtent,o=this._intervalPrecision,a=[];if(!e)return a;i[0]<n[0]&&(t?a.push({value:Pn(n[0]-e,o)}):a.push({value:i[0]}));for(var r=n[0];r<=n[1]&&(a.push({value:r}),(r=Pn(r+e,o))!==a[a.length-1].value);)if(a.length>1e4)return[];var s=a.length?a[a.length-1].value:n[1];return i[1]>s&&(t?a.push({value:Pn(s+e,o)}):a.push({value:i[1]})),a},e.prototype.getMinorTicks=function(t){for(var e=this.getTicks(!0),i=[],n=this.getExtent(),o=1;o<e.length;o++){for(var a=e[o],r=e[o-1],s=0,l=[],u=(a.value-r.value)/t;s<t-1;){var h=Pn(r.value+(s+1)*u);h>n[0]&&h<n[1]&&l.push(h),s++}i.push(l)}return i},e.prototype.getLabel=function(t,e){if(null==t)return"";var i=e&&e.precision;null==i?i=N(t.value)||0:"auto"===i&&(i=this._intervalPrecision);var n=Pn(t.value,i,!0);return G(n)},e.prototype.calcNiceTicks=function(t,e,i){t=t||5;var n=this._extent,o=n[1]-n[0];if(isFinite(o)){o<0&&(o=-o,n.reverse());var a=Mn(n,t,e,i);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var i=Math.abs(e[0]);t.fixMax||(e[1]+=i/2),e[0]-=i/2}else e[1]=1;var n=e[1]-e[0];isFinite(n)||(e[0]=0,e[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(e[0]=Pn(Math.floor(e[0]/o)*o)),t.fixMax||(e[1]=Pn(Math.ceil(e[1]/o)*o))},e.prototype.setNiceExtent=function(t,e){this._niceExtent=[t,e]},e.type="interval",e}(xn);xn.registerClass(On);var Nn="undefined"!=typeof Float32Array,Rn=Nn?Float32Array:Array;function Bn(t){return y(t)?Nn?new Float32Array(t):t:new Rn(t)}var En="__ec_stack_";function zn(t){return t.get("stack")||En+t.seriesIndex}function Gn(t){return t.dim+t.index}function Wn(t){var e=[],i=t.axis,n="axis0";if("category"===i.type){for(var o=i.getBandWidth(),a=0;a<t.count;a++)e.push(L({bandWidth:o,axisKey:n,stackId:En+a},t));var r=Fn(e),s=[];for(a=0;a<t.count;a++){var l=r[n][En+a];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function Vn(t,e){var i=[];return e.eachSeriesByType(t,(function(t){Xn(t)&&i.push(t)})),i}function Hn(t){var i=function(t){var i={};e(t,(function(t){var e=t.coordinateSystem.getBaseAxis();if("time"===e.type||"value"===e.type)for(var n=t.getData(),o=e.dim+"_"+e.index,a=n.getDimensionIndex(n.mapDimension(e.dim)),r=n.getStore(),s=0,l=r.count();s<l;++s){var u=r.get(a,s);i[o]?i[o].push(u):i[o]=[u]}}));var n={};for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];if(a){a.sort((function(t,e){return t-e}));for(var r=null,s=1;s<a.length;++s){var l=a[s]-a[s-1];l>0&&(r=null===r?l:Math.min(r,l))}n[o]=r}}return n}(t),n=[];return e(t,(function(t){var e,o=t.coordinateSystem.getBaseAxis(),a=o.getExtent();if("category"===o.type)e=o.getBandWidth();else if("value"===o.type||"time"===o.type){var r=o.dim+"_"+o.index,s=i[r],l=Math.abs(a[1]-a[0]),u=o.scale.getExtent(),h=Math.abs(u[1]-u[0]);e=s?l/h*s:l}else{var d=t.getData();e=Math.abs(a[1]-a[0])/d.count()}var c=V(t.get("barWidth"),e),p=V(t.get("barMaxWidth"),e),f=V(t.get("barMinWidth")||(Zn(t)?.5:1),e),g=t.get("barGap"),m=t.get("barCategoryGap");n.push({bandWidth:e,barWidth:c,barMaxWidth:p,barMinWidth:f,barGap:g,barCategoryGap:m,axisKey:Gn(o),stackId:zn(t)})})),Fn(n)}function Fn(t){var i={};e(t,(function(t,e){var n=t.axisKey,o=t.bandWidth,a=i[n]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},r=a.stacks;i[n]=a;var s=t.stackId;r[s]||a.autoWidthCount++,r[s]=r[s]||{width:0,maxWidth:0};var l=t.barWidth;l&&!r[s].width&&(r[s].width=l,l=Math.min(a.remainedWidth,l),a.remainedWidth-=l);var u=t.barMaxWidth;u&&(r[s].maxWidth=u);var h=t.barMinWidth;h&&(r[s].minWidth=h);var d=t.barGap;null!=d&&(a.gap=d);var c=t.barCategoryGap;null!=c&&(a.categoryGap=c)}));var n={};return e(i,(function(t,i){n[i]={};var o=t.stacks,a=t.bandWidth,r=t.categoryGap;if(null==r){var s=_(o).length;r=Math.max(35-4*s,15)+"%"}var l=V(r,a),u=V(t.gap,1),h=t.remainedWidth,d=t.autoWidthCount,c=(h-l)/(d+(d-1)*u);c=Math.max(c,0),e(o,(function(t){var e=t.maxWidth,i=t.minWidth;if(t.width){n=t.width;e&&(n=Math.min(n,e)),i&&(n=Math.max(n,i)),t.width=n,h-=n+u*n,d--}else{var n=c;e&&e<n&&(n=Math.min(e,h)),i&&i>n&&(n=i),n!==c&&(t.width=n,h-=n+u*n,d--)}})),c=(h-l)/(d+(d-1)*u),c=Math.max(c,0);var p,f=0;e(o,(function(t,e){t.width||(t.width=c),p=t,f+=t.width*(1+u)})),p&&(f-=p.width*u);var g=-f/2;e(o,(function(t,e){n[i][e]=n[i][e]||{bandWidth:a,offset:g,width:t.width},g+=t.width*(1+u)}))})),n}function Un(t,i){var n=Vn(t,i),o=Hn(n);e(n,(function(t){var e=t.getData(),i=t.coordinateSystem.getBaseAxis(),n=zn(t),a=o[Gn(i)][n],r=a.offset,s=a.width;e.setLayout({bandWidth:a.bandWidth,offset:r,size:s})}))}function Yn(t){return{seriesType:t,plan:W(),reset:function(t){if(Xn(t)){var e=t.getData(),i=t.coordinateSystem,n=i.getBaseAxis(),o=i.getOtherAxis(n),a=e.getDimensionIndex(e.mapDimension(o.dim)),r=e.getDimensionIndex(e.mapDimension(n.dim)),s=t.get("showBackground",!0),l=e.mapDimension(o.dim),u=e.getCalculationInfo("stackResultDimension"),h=vn(e,l)&&!!e.getCalculationInfo("stackedOnSeries"),d=o.isHorizontal(),c=function(t,e){var i=e.model.get("startValue");i||(i=0);return e.toGlobalCoord(e.dataToCoord("log"===e.type?i>0?i:1:i))}(0,o),p=Zn(t),f=t.get("barMinHeight")||0,g=u&&e.getDimensionIndex(u),m=e.getLayout("size"),v=e.getLayout("offset");return{progress:function(t,e){for(var n,o=t.count,l=p&&Bn(3*o),u=p&&s&&Bn(3*o),y=p&&Bn(o),x=i.master.getRect(),_=d?x.width:x.height,w=e.getStore(),b=0;null!=(n=t.next());){var I=w.get(h?g:a,n),M=w.get(r,n),S=c,D=void 0;h&&(D=+I-w.get(a,n));var C=void 0,T=void 0,A=void 0,L=void 0;if(d){var k=i.dataToPoint([I,M]);if(h)S=i.dataToPoint([D,M])[0];C=S,T=k[1]+v,A=k[0]-S,L=m,Math.abs(A)<f&&(A=(A<0?-1:1)*f)}else{k=i.dataToPoint([M,I]);if(h)S=i.dataToPoint([M,D])[1];C=k[0]+v,T=S,A=m,L=k[1]-S,Math.abs(L)<f&&(L=(L<=0?-1:1)*f)}p?(l[b]=C,l[b+1]=T,l[b+2]=d?A:L,u&&(u[b]=d?x.x:C,u[b+1]=d?T:x.y,u[b+2]=_),y[n]=n):e.setItemLayout(n,{x:C,y:T,width:A,height:L}),b+=3}p&&e.setLayout({largePoints:l,largeDataIndices:y,largeBackgroundPoints:u,valueAxisHorizontal:d})}}}}}}function Xn(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function Zn(t){return t.pipelineContext&&t.pipelineContext.large}var Kn=function(t){function e(e){var i=t.call(this,e)||this;return i.type="time",i}return z(e,t),e.prototype.getLabel=function(t){var e=this.getSetting("useUTC");return H(t.value,F[U(Y(this._minLevelUnit))]||F.second,e,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,e,i){var n=this.getSetting("useUTC"),o=this.getSetting("locale");return X(t,e,i,o,n)},e.prototype.getTicks=function(){var t=this._interval,e=this._extent,i=[];if(!t)return i;i.push({value:e[0],level:0});var o=this.getSetting("useUTC"),a=function(t,e,i,o){var a=1e4,r=J,s=0;function l(t,e,i,n,a,r,s){for(var l=new Date(e),u=e,h=l[n]();u<i&&u<=o[1];)s.push({value:u}),h+=t,l[a](h),u=l.getTime();s.push({value:u,notAdd:!0})}function u(t,n,a){var r=[],s=!n.length;if(!function(t,e,i,n){var o=$(e),a=$(i),r=function(t){return lt(o,t,n)===lt(a,t,n)},s=function(){return r("year")},l=function(){return s()&&r("month")},u=function(){return l()&&r("day")},h=function(){return u()&&r("hour")},d=function(){return h()&&r("minute")},c=function(){return d()&&r("second")},p=function(){return c()&&r("millisecond")};switch(t){case"year":return s();case"month":return l();case"day":return u();case"hour":return h();case"minute":return d();case"second":return c();case"millisecond":return p()}}(Y(t),o[0],o[1],i)){s&&(n=[{value:eo(new Date(o[0]),t,i)},{value:o[1]}]);for(var u=0;u<n.length-1;u++){var h=n[u].value,d=n[u+1].value;if(h!==d){var c=void 0,p=void 0,f=void 0,g=!1;switch(t){case"year":c=Math.max(1,Math.round(e/Z/365)),p=gt(i),f=mt(i);break;case"half-year":case"quarter":case"month":c=Qn(e),p=ft(i),f=st(i);break;case"week":case"half-week":case"day":c=jn(e),p=pt(i),f=rt(i),g=!0;break;case"half-day":case"quarter-day":case"hour":c=$n(e),p=ct(i),f=at(i);break;case"minute":c=Jn(e,!0),p=dt(i),f=ot(i);break;case"second":c=Jn(e,!1),p=ht(i),f=it(i);break;case"millisecond":c=to(e),p=ut(i),f=nt(i)}l(c,h,d,p,f,g,r),"year"===t&&a.length>1&&0===u&&a.unshift({value:a[0].value-c})}}for(u=0;u<r.length;u++)a.push(r[u]);return r}}for(var h=[],d=[],c=0,p=0,f=0;f<r.length&&s++<a;++f){var g=Y(r[f]);if(tt(r[f]))if(u(r[f],h[h.length-1]||[],d),g!==(r[f+1]?Y(r[f+1]):null)){if(d.length){p=c,d.sort((function(t,e){return t.value-e.value}));for(var m=[],v=0;v<d.length;++v){var y=d[v].value;0!==v&&d[v-1].value===y||(m.push(d[v]),y>=o[0]&&y<=o[1]&&c++)}var x=(o[1]-o[0])/e;if(c>1.5*x&&p>x/1.5)break;if(h.push(m),c>x||t===r[f])break}d=[]}}var _=et(n(h,(function(t){return et(t,(function(t){return t.value>=o[0]&&t.value<=o[1]&&!t.notAdd}))})),(function(t){return t.length>0})),w=[],b=_.length-1;for(f=0;f<_.length;++f)for(var I=_[f],M=0;M<I.length;++M)w.push({value:I[M].value,level:b-f});w.sort((function(t,e){return t.value-e.value}));var S=[];for(f=0;f<w.length;++f)0!==f&&w[f].value===w[f-1].value||S.push(w[f]);return S}(this._minLevelUnit,this._approxInterval,o,e);return(i=i.concat(a)).push({value:e[1],level:0}),i},e.prototype.calcNiceExtent=function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=Z,e[1]+=Z),-Infinity===e[1]&&Infinity===e[0]){var i=new Date;e[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),e[0]=e[1]-Z}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,e,i){t=t||10;var n=this._extent,o=n[1]-n[0];this._approxInterval=o/t,null!=e&&this._approxInterval<e&&(this._approxInterval=e),null!=i&&this._approxInterval>i&&(this._approxInterval=i);var a=qn.length,r=Math.min(function(t,e,i,n){for(;i<n;){var o=i+n>>>1;t[o][1]<e?i=o+1:n=o}return i}(qn,this._approxInterval,0,a),a-1);this._interval=qn[r][1],this._minLevelUnit=qn[Math.max(r-1,0)][0]},e.prototype.parse=function(t){return h(t)?t:+$(t)},e.prototype.contain=function(t){return Tn(this.parse(t),this._extent)},e.prototype.normalize=function(t){return An(this.parse(t),this._extent)},e.prototype.scale=function(t){return Ln(t,this._extent)},e.type="time",e}(On),qn=[["second",K],["minute",q],["hour",j],["quarter-day",6*j],["half-day",12*j],["day",1.2*Z],["half-week",3.5*Z],["week",7*Z],["month",31*Z],["quarter",95*Z],["half-year",Q/2],["year",Q]];function jn(t,e){return(t/=Z)>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function Qn(t){return(t/=30*Z)>6?6:t>3?3:t>2?2:1}function $n(t){return(t/=j)>12?12:t>6?6:t>3.5?4:t>2?2:1}function Jn(t,e){return(t/=e?q:K)>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function to(t){return R(t)}function eo(t,e,i){var n=new Date(t);switch(Y(e)){case"year":case"month":n[st(i)](0);case"day":n[rt(i)](1);case"hour":n[at(i)](0);case"minute":n[ot(i)](0);case"second":n[it(i)](0),n[nt(i)](0)}return n.getTime()}xn.registerClass(Kn);var io=xn.prototype,no=On.prototype,oo=B,ao=Math.floor,ro=Math.ceil,so=Math.pow,lo=Math.log,uo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new On,e._interval=0,e}return z(e,t),e.prototype.getTicks=function(t){var e=this._originalScale,i=this._extent,o=e.getExtent(),a=no.getTicks.call(this,t);return n(a,(function(t){var e=t.value,n=B(so(this.base,e));return n=e===i[0]&&this._fixMin?co(n,o[0]):n,{value:n=e===i[1]&&this._fixMax?co(n,o[1]):n}}),this)},e.prototype.setExtent=function(t,e){var i=lo(this.base);t=lo(Math.max(0,t))/i,e=lo(Math.max(0,e))/i,no.setExtent.call(this,t,e)},e.prototype.getExtent=function(){var t=this.base,e=io.getExtent.call(this);e[0]=so(t,e[0]),e[1]=so(t,e[1]);var i=this._originalScale.getExtent();return this._fixMin&&(e[0]=co(e[0],i[0])),this._fixMax&&(e[1]=co(e[1],i[1])),e},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=lo(t[0])/lo(e),t[1]=lo(t[1])/lo(e),io.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},e.prototype.calcNiceTicks=function(t){t=t||10;var e=this._extent,i=e[1]-e[0];if(!(Infinity===i||i<=0)){var n=vt(i);for(t/i*n<=.5&&(n*=10);!isNaN(n)&&Math.abs(n)<1&&Math.abs(n)>0;)n*=10;var o=[B(ro(e[0]/n)*n),B(ao(e[1]/n)*n)];this._interval=n,this._niceExtent=o}},e.prototype.calcNiceExtent=function(t){no.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return Tn(t=lo(t)/lo(this.base),this._extent)},e.prototype.normalize=function(t){return An(t=lo(t)/lo(this.base),this._extent)},e.prototype.scale=function(t){return t=Ln(t,this._extent),so(this.base,t)},e.type="log",e}(xn),ho=uo.prototype;function co(t,e){return oo(t,N(e))}ho.getMinorTicks=no.getMinorTicks,ho.getLabel=no.getLabel,xn.registerClass(uo);var po=function(){function t(t,e,i){this._prepareParams(t,e,i)}return t.prototype._prepareParams=function(t,e,i){i[1]<i[0]&&(i=[NaN,NaN]),this._dataMin=i[0],this._dataMax=i[1];var n=this._isOrdinal="ordinal"===t.type;this._needCrossZero="interval"===t.type&&e.getNeedCrossZero&&e.getNeedCrossZero();var o=e.get("min",!0);null==o&&(o=e.get("startValue",!0));var a=this._modelMinRaw=o;I(a)?this._modelMinNum=vo(t,a({min:i[0],max:i[1]})):"dataMin"!==a&&(this._modelMinNum=vo(t,a));var r=this._modelMaxRaw=e.get("max",!0);if(I(r)?this._modelMaxNum=vo(t,r({min:i[0],max:i[1]})):"dataMax"!==r&&(this._modelMaxNum=vo(t,r)),n)this._axisDataLen=e.getCategories().length;else{var s=e.get("boundaryGap"),l=y(s)?s:[s||0,s||0];"boolean"==typeof l[0]||"boolean"==typeof l[1]?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[yt(l[0],1),yt(l[1],1)]}},t.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,i=this._dataMax,n=this._axisDataLen,o=this._boundaryGapInner,a=t?null:i-e||Math.abs(e),r="dataMin"===this._modelMinRaw?e:this._modelMinNum,s="dataMax"===this._modelMaxRaw?i:this._modelMaxNum,l=null!=r,u=null!=s;null==r&&(r=t?n?0:NaN:e-o[0]*a),null==s&&(s=t?n?n-1:NaN:i+o[1]*a),(null==r||!isFinite(r))&&(r=NaN),(null==s||!isFinite(s))&&(s=NaN);var h=xt(r)||xt(s)||t&&!n;this._needCrossZero&&(r>0&&s>0&&!l&&(r=0),r<0&&s<0&&!u&&(s=0));var d=this._determinedMin,c=this._determinedMax;return null!=d&&(r=d,l=!0),null!=c&&(s=c,u=!0),{min:r,max:s,minFixed:l,maxFixed:u,isBlank:h}},t.prototype.modifyDataMinMax=function(t,e){this[go[t]]=e},t.prototype.setDeterminedMinMax=function(t,e){this[fo[t]]=e},t.prototype.freeze=function(){this.frozen=!0},t}(),fo={min:"_determinedMin",max:"_determinedMax"},go={min:"_dataMin",max:"_dataMax"};function mo(t,e,i){var n=t.rawExtentInfo;return n||(n=new po(t,e,i),t.rawExtentInfo=n,n)}function vo(t,e){return null==e?null:xt(e)?NaN:t.parse(e)}function yo(t,i){var n=t.type,o=mo(t,i,t.getExtent()).calculate();t.setBlank(o.isBlank);var a=o.min,r=o.max,s=i.ecModel;if(s&&"time"===n){var l=Vn("bar",s),u=!1;if(e(l,(function(t){u=u||t.getBaseAxis()===i.axis})),u){var h=Hn(l),d=function(t,i,n,o){var a=n.axis.getExtent(),r=Math.abs(a[1]-a[0]),s=function(t,e){if(t&&e)return t[Gn(e)]}(o,n.axis);if(void 0===s)return{min:t,max:i};var l=Infinity;e(s,(function(t){l=Math.min(t.offset,l)}));var u=-Infinity;e(s,(function(t){u=Math.max(t.offset+t.width,u)})),l=Math.abs(l),u=Math.abs(u);var h=l+u,d=i-t,c=d/(1-(l+u)/r)-d;return i+=c*(u/h),t-=c*(l/h),{min:t,max:i}}(a,r,i,h);a=d.min,r=d.max}}return{extent:[a,r],fixMin:o.minFixed,fixMax:o.maxFixed}}function xo(t,e){var i=e,n=yo(t,i),o=n.extent,a=i.get("splitNumber");t instanceof uo&&(t.base=i.get("logBase"));var r=t.type,s=i.get("interval"),l="interval"===r||"time"===r;t.setExtent(o[0],o[1]),t.calcNiceExtent({splitNumber:a,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?i.get("minInterval"):null,maxInterval:l?i.get("maxInterval"):null}),null!=s&&t.setInterval&&t.setInterval(s)}function _o(t,e){if(e=e||t.get("type"))switch(e){case"category":return new kn({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[Infinity,-Infinity]});case"time":return new Kn({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(xn.getClass(e)||On)}}function wo(t){var e=t.scale.getExtent(),i=e[0],n=e[1];return!(i>0&&n>0||i<0&&n<0)}function bo(t){var e=t.getLabelModel().get("formatter"),i="category"===t.type?t.scale.getExtent()[0]:null;return"time"===t.scale.type?function(e){return function(i,n){return t.scale.getFormattedLabel(i,n,e)}}(e):u(e)?function(e){return function(i){var n=t.scale.getLabel(i);return e.replace("{value}",null!=n?n:"")}}(e):I(e)?function(e){return function(n,o){return null!=i&&(o=n.value-i),e(Io(t,n),o,null!=n.level?{level:n.level}:null)}}(e):function(e){return t.scale.getLabel(e)}}function Io(t,e){return"category"===t.type?t.scale.getLabel(e):e.value}function Mo(t){var e=t.model,i=t.scale;if(e.get(["axisLabel","show"])&&!i.isBlank()){var n,o,a=i.getExtent();o=i instanceof kn?i.count():(n=i.getTicks()).length;var r,s,l,u,h,d,c,p,f=t.getLabelModel(),g=bo(t),m=1;o>40&&(m=Math.ceil(o/40));for(var v=0;v<o;v+=m){var y=g(n?n[v]:{value:a[0]+v},v),x=f.getTextRect(y),_=(s=x,l=f.get("rotate")||0,u=void 0,h=void 0,d=void 0,c=void 0,p=void 0,u=l*Math.PI/180,h=s.width,d=s.height,c=h*Math.abs(Math.cos(u))+Math.abs(d*Math.sin(u)),p=h*Math.abs(Math.sin(u))+Math.abs(d*Math.cos(u)),new _t(s.x,s.y,c,p));r?r.union(_):r=_}return r}}function So(t){var e=t.get("interval");return null==e?"auto":e}function Do(t){return"category"===t.type&&0===So(t.getLabelModel())}function Co(t,i){var n={};return e(t.mapDimensionsAll(i),(function(e){n[yn(t,e)]=!0})),_(n)}function To(t,i,n){i&&e(Co(i,n),(function(e){var n=i.getApproximateExtent(e);n[0]<t[0]&&(t[0]=n[0]),n[1]>t[1]&&(t[1]=n[1])}))}var Ao=[],Lo={registerPreprocessor:Gt,registerProcessor:zt,registerPostInit:Et,registerPostUpdate:Bt,registerUpdateLifecycle:Rt,registerAction:Nt,registerCoordinateSystem:Ot,registerLayout:Pt,registerVisual:kt,registerTransform:Lt,registerLoading:At,registerMap:Tt,registerImpl:Ct,PRIORITY:Dt,ComponentModel:St,ComponentView:Mt,SeriesModel:It,ChartView:bt,registerComponentModel:function(t){St.registerClass(t)},registerComponentView:function(t){Mt.registerClass(t)},registerSeriesModel:function(t){It.registerClass(t)},registerChartView:function(t){bt.registerClass(t)},registerSubTypeDefaulter:function(t,e){St.registerSubTypeDefaulter(t,e)},registerPainter:function(t,e){Wt(t,e)}};function ko(t){y(t)?e(t,(function(t){ko(t)})):wt(Ao,t)>=0||(Ao.push(t),I(t)&&(t={install:t}),t.install(Lo))}var Po=2*Math.PI,Oo=qt.CMD,No=["top","right","bottom","left"];function Ro(t,e,i,n,o){var a=i.width,r=i.height;switch(t){case"top":n.set(i.x+a/2,i.y-e),o.set(0,-1);break;case"bottom":n.set(i.x+a/2,i.y+r+e),o.set(0,1);break;case"left":n.set(i.x-e,i.y+r/2),o.set(-1,0);break;case"right":n.set(i.x+a+e,i.y+r/2),o.set(1,0)}}function Bo(t,e,i,n,o,a,r,s,l){r-=t,s-=e;var u=Math.sqrt(r*r+s*s),h=(r/=u)*i+t,d=(s/=u)*i+e;if(Math.abs(n-o)%Po<1e-4)return l[0]=h,l[1]=d,u-i;if(a){var c=n;n=$t(o),o=$t(c)}else n=$t(n),o=$t(o);n>o&&(o+=Po);var p=Math.atan2(s,r);if(p<0&&(p+=Po),p>=n&&p<=o||p+Po>=n&&p+Po<=o)return l[0]=h,l[1]=d,u-i;var f=i*Math.cos(n)+t,g=i*Math.sin(n)+e,m=i*Math.cos(o)+t,v=i*Math.sin(o)+e,y=(f-r)*(f-r)+(g-s)*(g-s),x=(m-r)*(m-r)+(v-s)*(v-s);return y<x?(l[0]=f,l[1]=g,Math.sqrt(y)):(l[0]=m,l[1]=v,Math.sqrt(x))}function Eo(t,e,i,n,o,a,r,s){var l=o-t,u=a-e,h=i-t,d=n-e,c=Math.sqrt(h*h+d*d),p=(l*(h/=c)+u*(d/=c))/c;s&&(p=Math.min(Math.max(p,0),1)),p*=c;var f=r[0]=t+p*h,g=r[1]=e+p*d;return Math.sqrt((f-o)*(f-o)+(g-a)*(g-a))}function zo(t,e,i,n,o,a,r){i<0&&(t+=i,i=-i),n<0&&(e+=n,n=-n);var s=t+i,l=e+n,u=r[0]=Math.min(Math.max(o,t),s),h=r[1]=Math.min(Math.max(a,e),l);return Math.sqrt((u-o)*(u-o)+(h-a)*(h-a))}var Go=[];function Wo(t,e,i){var n=zo(e.x,e.y,e.width,e.height,t.x,t.y,Go);return i.set(Go[0],Go[1]),n}function Vo(t,e,i){for(var n,o,a=0,r=0,s=0,l=0,u=Infinity,h=e.data,d=t.x,c=t.y,p=0;p<h.length;){var f=h[p++];1===p&&(s=a=h[p],l=r=h[p+1]);var g=u;switch(f){case Oo.M:a=s=h[p++],r=l=h[p++];break;case Oo.L:g=Eo(a,r,h[p],h[p+1],d,c,Go,!0),a=h[p++],r=h[p++];break;case Oo.C:g=Qt(a,r,h[p++],h[p++],h[p++],h[p++],h[p],h[p+1],d,c,Go),a=h[p++],r=h[p++];break;case Oo.Q:g=jt(a,r,h[p++],h[p++],h[p],h[p+1],d,c,Go),a=h[p++],r=h[p++];break;case Oo.A:var m=h[p++],v=h[p++],y=h[p++],x=h[p++],_=h[p++],w=h[p++];p+=1;var b=!!(1-h[p++]);n=Math.cos(_)*y+m,o=Math.sin(_)*x+v,p<=1&&(s=n,l=o),g=Bo(m,v,x,_,_+w,b,(d-m)*x/y+m,c,Go),a=Math.cos(_+w)*y+m,r=Math.sin(_+w)*x+v;break;case Oo.R:g=zo(s=a=h[p++],l=r=h[p++],h[p++],h[p++],d,c,Go);break;case Oo.Z:g=Eo(a,r,s,l,d,c,Go,!0),a=s,r=l}g<u&&(u=g,i.set(Go[0],Go[1]))}return u}var Ho=new Vt,Fo=new Vt,Uo=new Vt,Yo=new Vt,Xo=new Vt;function Zo(t,e){if(t){var i=t.getTextGuideLine(),n=t.getTextContent();if(n&&i){var o=t.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],r=o.candidates||No,s=n.getBoundingRect().clone();s.applyTransform(n.getComputedTransform());var l=Infinity,u=o.anchor,h=t.getComputedTransform(),d=h&&Zt([],h),c=e.get("length2")||0;u&&Uo.copy(u);for(var p=0;p<r.length;p++){Ro(r[p],0,s,Ho,Yo),Vt.scaleAndAdd(Fo,Ho,Yo,c),Fo.transform(d);var f=t.getBoundingRect(),g=u?u.distance(Fo):t instanceof Kt?Vo(Fo,t.path,Uo):Wo(Fo,f,Uo);g<l&&(l=g,Fo.transform(h),Uo.transform(h),Uo.toArray(a[0]),Fo.toArray(a[1]),Ho.toArray(a[2]))}jo(a,e.get("minTurnAngle")),i.setShape({points:a})}}}var Ko=[],qo=new Vt;function jo(t,e){if(e<=180&&e>0){e=e/180*Math.PI,Ho.fromArray(t[0]),Fo.fromArray(t[1]),Uo.fromArray(t[2]),Vt.sub(Yo,Ho,Fo),Vt.sub(Xo,Uo,Fo);var i=Yo.len(),n=Xo.len();if(!(i<.001||n<.001)){Yo.scale(1/i),Xo.scale(1/n);var o=Yo.dot(Xo);if(Math.cos(e)<o){var a=Eo(Fo.x,Fo.y,Uo.x,Uo.y,Ho.x,Ho.y,Ko,!1);qo.fromArray(Ko),qo.scaleAndAdd(Xo,a/Math.tan(Math.PI-e));var r=Uo.x!==Fo.x?(qo.x-Fo.x)/(Uo.x-Fo.x):(qo.y-Fo.y)/(Uo.y-Fo.y);if(isNaN(r))return;r<0?Vt.copy(qo,Fo):r>1&&Vt.copy(qo,Uo),qo.toArray(t[1])}}}}function Qo(t,e,i){if(i<=180&&i>0){i=i/180*Math.PI,Ho.fromArray(t[0]),Fo.fromArray(t[1]),Uo.fromArray(t[2]),Vt.sub(Yo,Fo,Ho),Vt.sub(Xo,Uo,Fo);var n=Yo.len(),o=Xo.len();if(!(n<.001||o<.001))if(Yo.scale(1/n),Xo.scale(1/o),Yo.dot(e)<Math.cos(i)){var a=Eo(Fo.x,Fo.y,Uo.x,Uo.y,Ho.x,Ho.y,Ko,!1);qo.fromArray(Ko);var r=Math.PI/2,s=r+Math.acos(Xo.dot(e))-i;if(s>=r)Vt.copy(qo,Uo);else{qo.scaleAndAdd(Xo,a/Math.tan(Math.PI/2-s));var l=Uo.x!==Fo.x?(qo.x-Fo.x)/(Uo.x-Fo.x):(qo.y-Fo.y)/(Uo.y-Fo.y);if(isNaN(l))return;l<0?Vt.copy(qo,Fo):l>1&&Vt.copy(qo,Uo)}qo.toArray(t[1])}}}function $o(t,e,i,n){var o="normal"===i,a=o?t:t.ensureState(i);a.ignore=e;var r=n.get("smooth");r&&!0===r&&(r=.3),a.shape=a.shape||{},r>0&&(a.shape.smooth=r);var s=n.getModel("lineStyle").getLineStyle();o?t.useStyle(s):a.style=s}function Jo(t,e){var i=e.smooth,n=e.points;if(n)if(t.moveTo(n[0][0],n[0][1]),i>0&&n.length>=3){var o=Yt(n[0],n[1]),a=Yt(n[1],n[2]);if(!o||!a)return t.lineTo(n[1][0],n[1][1]),void t.lineTo(n[2][0],n[2][1]);var r=Math.min(o,a)*i,s=Xt([],n[1],n[0],r/o),l=Xt([],n[1],n[2],r/a),u=Xt([],s,l,.5);t.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),t.bezierCurveTo(l[0],l[1],l[0],l[1],n[2][0],n[2][1])}else for(var h=1;h<n.length;h++)t.lineTo(n[h][0],n[h][1])}function ta(t,e,i){var n=t.getTextGuideLine(),o=t.getTextContent();if(o){for(var a=e.normal,r=a.get("show"),l=o.ignore,u=0;u<Ht.length;u++){var h=Ht[u],d=e[h],c="normal"===h;if(d){var p=d.get("show");if((c?l:s(o.states[h]&&o.states[h].ignore,l))||!s(p,r)){var f=c?n:n&&n.states[h];f&&(f.ignore=!0),n&&$o(n,!0,h,d);continue}n||(n=new Ft,t.setTextGuideLine(n),c||!l&&r||$o(n,!0,"normal",e.normal),t.stateProxy&&(n.stateProxy=t.stateProxy)),$o(n,!1,h,d)}}if(n){L(n.style,i),n.style.fill=null;var g=a.get("showAbove");(t.textGuideLineConfig=t.textGuideLineConfig||{}).showAbove=g||!1,n.buildPath=Jo}}else n&&t.removeTextGuideLine()}function ea(t,e){e=e||"labelLine";for(var i={normal:t.getModel(e)},n=0;n<Ut.length;n++){var o=Ut[n];i[o]=t.getModel([o,e])}return i}function ia(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];if(!n.defaultAttr.ignore){var o=n.label,a=o.getComputedTransform(),r=o.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=o.style.margin||0,u=r.clone();u.applyTransform(a),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var h=s?new Jt(r,a):null;e.push({label:o,labelLine:n.labelLine,rect:u,localRect:r,obb:h,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:s,transform:a})}}return e}function na(t,e,i,n,o,a){var r=t.length;if(!(r<2)){t.sort((function(t,i){return t.rect[e]-i.rect[e]}));for(var s,l=0,u=!1,h=0;h<r;h++){var d=t[h],c=d.rect;(s=c[e]-l)<0&&(c[e]-=s,d.label[e]-=s,u=!0),l=c[e]+c[i]}var p,f,g=t[0],m=t[r-1];return v(),p<0&&_(-p,.8),f<0&&_(f,.8),v(),y(p,f,1),y(f,p,-1),v(),p<0&&w(-p),f<0&&w(f),u}function v(){p=g.rect[e]-n,f=o-m.rect[e]-m.rect[i]}function y(t,e,i){if(t<0){var n=Math.min(e,-t);if(n>0){x(n*i,0,r);var o=n+t;o<0&&_(-o*i,1)}else _(-t*i,1)}}function x(i,n,o){0!==i&&(u=!0);for(var a=n;a<o;a++){var r=t[a];r.rect[e]+=i,r.label[e]+=i}}function _(n,o){for(var a=[],s=0,l=1;l<r;l++){var u=t[l-1].rect,h=Math.max(t[l].rect[e]-u[e]-u[i],0);a.push(h),s+=h}if(s){var d=Math.min(Math.abs(n)/s,o);if(n>0)for(l=0;l<r-1;l++){x(a[l]*d,0,l+1)}else for(l=r-1;l>0;l--){x(-(a[l-1]*d),l,r)}}}function w(t){var e=t<0?-1:1;t=Math.abs(t);for(var i=Math.ceil(t/(r-1)),n=0;n<r-1;n++)if(e>0?x(i,0,n+1):x(-i,r-n-1,r),(t-=i)<=0)return}}function oa(t,e,i,n){return na(t,"x","width",e,i)}function aa(t,e,i,n){return na(t,"y","height",e,i)}function ra(t){var e=[];t.sort((function(t,e){return e.priority-t.priority}));var i=new _t(0,0,0,0);function n(t){if(!t.ignore){var e=t.ensureState("emphasis");null==e.ignore&&(e.ignore=!1)}t.ignore=!0}for(var o=0;o<t.length;o++){var a=t[o],r=a.axisAligned,s=a.localRect,l=a.transform,u=a.label,h=a.labelLine;i.copy(a.rect),i.width-=.1,i.height-=.1,i.x+=.05,i.y+=.05;for(var d=a.obb,c=!1,p=0;p<e.length;p++){var f=e[p];if(i.intersect(f.rect)){if(r&&f.axisAligned){c=!0;break}if(f.obb||(f.obb=new Jt(f.localRect,f.transform)),d||(d=new Jt(s,l)),d.intersect(f.obb)){c=!0;break}}}c?(n(u),h&&n(h)):(u.attr("ignore",a.defaultAttr.ignore),h&&h.attr("ignore",a.defaultAttr.labelGuideIgnore),e.push(a))}}function sa(t,e,i){var n=oe.createCanvas(),o=e.getWidth(),a=e.getHeight(),r=n.style;return r&&(r.position="absolute",r.left="0",r.top="0",r.width=o+"px",r.height=a+"px",n.setAttribute("data-zr-dom-id",t)),n.width=o*i,n.height=a*i,n}var la=function(t){function i(e,i,n){var o,a=t.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null,n=n||ne,"string"==typeof e?o=sa(e,i,n):r(e)&&(e=(o=e).id),a.id=e,a.dom=o;var s=o.style;return s&&(te(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=i,a.dpr=n,a}return z(i,t),i.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},i.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},i.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},i.prototype.setUnpainted=function(){this.__firstTimePaint=!0},i.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=sa("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},i.prototype.createRepaintRects=function(t,e,i,n){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o,a=[],r=this.maxRepaintRectCount,s=!1,l=new _t(0,0,0,0);function u(t){if(t.isFinite()&&!t.isZero())if(0===a.length){(e=new _t(0,0,0,0)).copy(t),a.push(e)}else{for(var e,i=!1,n=Infinity,o=0,u=0;u<a.length;++u){var h=a[u];if(h.intersect(t)){var d=new _t(0,0,0,0);d.copy(h),d.union(t),a[u]=d,i=!0;break}if(s){l.copy(t),l.union(h);var c=t.width*t.height,p=h.width*h.height,f=l.width*l.height-c-p;f<n&&(n=f,o=u)}}if(s&&(a[o].union(t),i=!0),!i)(e=new _t(0,0,0,0)).copy(t),a.push(e);s||(s=a.length>=r)}}for(var h=this.__startIndex;h<this.__endIndex;++h){if(p=t[h]){var d=p.shouldBePainted(i,n,!0,!0);(f=p.__isRendered&&(p.__dirty&ee||!d)?p.getPrevPaintRect():null)&&u(f);var c=d&&(p.__dirty&ee||!p.__isRendered)?p.getPaintRect():null;c&&u(c)}}for(h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var p,f;d=(p=e[h])&&p.shouldBePainted(i,n,!0,!0);if(p&&(!d||!p.__zr)&&p.__isRendered)(f=p.getPrevPaintRect())&&u(f)}do{o=!1;for(h=0;h<a.length;)if(a[h].isZero())a.splice(h,1);else{for(var g=h+1;g<a.length;)a[h].intersect(a[g])?(o=!0,a[h].union(a[g]),a.splice(g,1)):g++;h++}}while(o);return this._paintRects=a,a},i.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},i.prototype.resize=function(t,e){var i=this.dpr,n=this.dom,o=n.style,a=this.domBack;o&&(o.width=t+"px",o.height=e+"px"),n.width=t*i,n.height=e*i,a&&(a.width=t*i,a.height=e*i,1!==i&&this.ctxBack.scale(i,i))},i.prototype.clear=function(t,i,n){var o=this.dom,a=this.ctx,r=o.width,s=o.height;i=i||this.clearColor;var l=this.motionBlur&&!t,u=this.lastFrameAlpha,h=this.dpr,d=this;l&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,r/h,s/h));var c=this.domBack;function p(t,e,n,o){if(a.clearRect(t,e,n,o),i&&"transparent"!==i){var r=void 0;if(ae(i))r=(i.global||i.__width===n&&i.__height===o)&&i.__canvasGradient||re(a,i,{x:0,y:0,width:n,height:o}),i.__canvasGradient=r,i.__width=n,i.__height=o;else se(i)&&(i.scaleX=i.scaleX||h,i.scaleY=i.scaleY||h,r=le(a,i,{dirty:function(){d.setUnpainted(),d.painter.refresh()}}));a.save(),a.fillStyle=r||i,a.fillRect(t,e,n,o),a.restore()}l&&(a.save(),a.globalAlpha=u,a.drawImage(c,t,e,n,o),a.restore())}!n||l?p(0,0,r,s):n.length&&e(n,(function(t){p(t.x*h,t.y*h,t.width*h,t.height*h)}))},i}(ie),ua=1e5,ha=314159,da=.01;var ca=function(){function t(t,e,i,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=i=o({},i||{}),this.dpr=i.devicePixelRatio||ne,this._singleCanvas=a,this.root=t,t.style&&(te(t),t.innerHTML=""),this.storage=e;var r=this._zlevelList;this._prevDisplayList=[];var s=this._layers;if(a){var l=t,u=l.width,h=l.height;null!=i.width&&(u=i.width),null!=i.height&&(h=i.height),this.dpr=i.devicePixelRatio||1,l.width=u*this.dpr,l.height=h*this.dpr,this._width=u,this._height=h;var d=new la(l,this,this.dpr);d.__builtin__=!0,d.initContext(),s[314159]=d,d.zlevel=ha,r.push(ha),this._domRoot=t}else{this._width=ge(t,0,i),this._height=ge(t,1,i);var c=this._domRoot=function(t,e){var i=document.createElement("div");return i.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",i}(this._width,this._height);t.appendChild(c)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),i=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,i,t,this._redrawId);for(var o=0;o<n.length;o++){var a=n[o],r=this._layers[a];if(!r.__builtin__&&r.refresh){var s=0===o?this._backgroundColor:null;r.refresh(s)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(t){var e=t.length,i=this._hoverlayer;if(i&&i.clear(),e){for(var n,o={inHover:!0,viewWidth:this._width,viewHeight:this._height},a=0;a<e;a++){var r=t[a];r.__inHover&&(i||(i=this._hoverlayer=this.getLayer(ua)),n||(n=i.ctx).save(),ue(n,r,o,a===e-1))}n&&n.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(ua)},t.prototype.paintOne=function(t,e){he(t,e)},t.prototype._paintList=function(t,e,i,n){if(this._redrawId===n){i=i||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,e,i),a=o.finished,r=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),r&&this._paintHoverList(t),a)this.eachLayer((function(t){t.afterBrush&&t.afterBrush()}));else{var s=this;de((function(){s._paintList(t,e,i,n)}))}}},t.prototype._compositeManually=function(){var t=this.getLayer(ha).ctx,e=this._domRoot.width,i=this._domRoot.height;t.clearRect(0,0,e,i),this.eachBuiltinLayer((function(n){n.virtual&&t.drawImage(n.dom,0,0,e,i)}))},t.prototype._doPaintList=function(t,i,n){for(var o=this,a=[],r=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&a.push(u)}for(var h=!0,d=!1,c=function(e){var s,l=a[e],u=l.ctx,c=r&&l.createRepaintRects(t,i,p._width,p._height),f=n?l.__startIndex:l.__drawIndex,g=!n&&l.incremental&&Date.now,m=g&&Date.now(),v=l.zlevel===p._zlevelList[0]?p._backgroundColor:null;if(l.__startIndex===l.__endIndex)l.clear(!1,v,c);else if(f===l.__startIndex){var y=t[f];y.incremental&&y.notClear&&!n||l.clear(!1,v,c)}-1===f&&(f=l.__startIndex);var x=function(e){var i={inHover:!1,allClipped:!1,prevEl:null,viewWidth:o._width,viewHeight:o._height};for(s=f;s<l.__endIndex;s++){var n=t[s];if(n.__inHover&&(d=!0),o._doPaintEl(n,l,r,e,i,s===l.__endIndex-1),g)if(Date.now()-m>15)break}i.prevElClipPaths&&u.restore()};if(c)if(0===c.length)s=l.__endIndex;else for(var _=p.dpr,w=0;w<c.length;++w){var b=c[w];u.save(),u.beginPath(),u.rect(b.x*_,b.y*_,b.width*_,b.height*_),u.clip(),x(b),u.restore()}else u.save(),x(),u.restore();l.__drawIndex=s,l.__drawIndex<l.__endIndex&&(h=!1)},p=this,f=0;f<a.length;f++)c(f);return ce.wxa&&e(this._layers,(function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()})),{finished:h,needsRefreshHover:d}},t.prototype._doPaintEl=function(t,e,i,n,o,a){var r=e.ctx;if(i){var s=t.getPaintRect();(!n||s&&s.intersect(n))&&(ue(r,t,o,a),t.setPrevPaintRect(s))}else ue(r,t,o,a)},t.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=ha);var i=this._layers[t];return i||((i=new la("zr_"+t,this,this.dpr)).zlevel=t,i.__builtin__=!0,this._layerConfig[t]?pe(i,this._layerConfig[t],!0):this._layerConfig[t-da]&&pe(i,this._layerConfig[t-da],!0),e&&(i.virtual=e),this.insertLayer(t,i),i.initContext()),i},t.prototype.insertLayer=function(t,e){var i=this._layers,n=this._zlevelList,o=n.length,a=this._domRoot,r=null,s=-1;if(!i[t]&&function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(o>0&&t>n[0]){for(s=0;s<o-1&&!(n[s]<t&&n[s+1]>t);s++);r=i[n[s]]}if(n.splice(s+1,0,t),i[t]=e,!e.virtual)if(r){var l=r.dom;l.nextSibling?a.insertBefore(e.dom,l.nextSibling):a.appendChild(e.dom)}else a.firstChild?a.insertBefore(e.dom,a.firstChild):a.appendChild(e.dom);e.painter||(e.painter=this)}},t.prototype.eachLayer=function(t,e){for(var i=this._zlevelList,n=0;n<i.length;n++){var o=i[n];t.call(e,this._layers[o],o)}},t.prototype.eachBuiltinLayer=function(t,e){for(var i=this._zlevelList,n=0;n<i.length;n++){var o=i[n],a=this._layers[o];a.__builtin__&&t.call(e,a,o)}},t.prototype.eachOtherLayer=function(t,e){for(var i=this._zlevelList,n=0;n<i.length;n++){var o=i[n],a=this._layers[o];a.__builtin__||t.call(e,a,o)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(t){function e(t){a&&(a.__endIndex!==t&&(a.__dirty=!0),a.__endIndex=t)}if(this.eachBuiltinLayer((function(t,e){t.__dirty=t.__used=!1})),this._singleCanvas)for(var i=1;i<t.length;i++){if((s=t[i]).zlevel!==t[i-1].zlevel||s.incremental){this._needsManuallyCompositing=!0;break}}var n,o,a=null,r=0;for(o=0;o<t.length;o++){var s,l=(s=t[o]).zlevel,u=void 0;n!==l&&(n=l,r=0),s.incremental?((u=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,r=1):u=this.getLayer(l+(r>0?da:0),this._needsManuallyCompositing),u.__builtin__||fe("ZLevel "+l+" has been used by unkown layer "+u.id),u!==a&&(u.__used=!0,u.__startIndex!==o&&(u.__dirty=!0),u.__startIndex=o,u.incremental?u.__drawIndex=-1:u.__drawIndex=o,e(o),a=u),s.__dirty&ee&&!s.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=o))}e(o),this.eachBuiltinLayer((function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)}))},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(t){t.clear()},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t,e(this._layers,(function(t){t.setUnpainted()}))},t.prototype.configLayer=function(t,e){if(e){var i=this._layerConfig;i[t]?pe(i[t],e,!0):i[t]=e;for(var n=0;n<this._zlevelList.length;n++){var o=this._zlevelList[n];if(o===t||o===t+da){var a=this._layers[o];pe(a,i[t],!0)}}}},t.prototype.delLayer=function(t){var e=this._layers,i=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],i.splice(wt(i,t),1))},t.prototype.resize=function(t,e){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var n=this._opts,o=this.root;if(null!=t&&(n.width=t),null!=e&&(n.height=e),t=ge(o,0,n),e=ge(o,1,n),i.style.display="",this._width!==t||e!==this._height){for(var a in i.style.width=t+"px",i.style.height=e+"px",this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(ha).resize(t,e)}return this},t.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new la("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var i=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,o=e.dom.height;this.eachLayer((function(t){t.__builtin__?i.drawImage(t.dom,0,0,n,o):t.renderToCanvas&&(i.save(),t.renderToCanvas(i),i.restore())}))}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},r=this.storage.getDisplayList(!0),s=0,l=r.length;s<l;s++){var u=r[s];ue(i,u,a,s===l-1)}return e.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}();function pa(t){t.registerPainter("canvas",ca)}function fa(t,e,i){var o=t.get("borderRadius");if(null==o)return i?{cornerRadius:0}:null;y(o)||(o=[o,o,o,o]);var a=Math.abs(e.r||0-e.r0||0);return{cornerRadius:n(o,(function(t){return yt(t,a)}))}}var ga=2*Math.PI,ma=Math.PI/180;function va(t,e){return ye(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function ya(t,e){var i=va(t,e),n=t.get("center"),o=t.get("radius");y(o)||(o=[0,o]);var a,r,s=V(i.width,e.getWidth()),l=V(i.height,e.getHeight()),u=Math.min(s,l),h=V(o[0],u/2),d=V(o[1],u/2),c=t.coordinateSystem;if(c){var p=c.dataToPoint(n);a=p[0]||0,r=p[1]||0}else y(n)||(n=[n,n]),a=V(n[0],s)+i.x,r=V(n[1],l)+i.y;return{cx:a,cy:r,r0:h,r:d}}function xa(t,e,i){e.eachSeriesByType(t,(function(t){var e=t.getData(),n=e.mapDimension("value"),o=va(t,i),a=ya(t,i),r=a.cx,s=a.cy,l=a.r,u=a.r0,h=-t.get("startAngle")*ma,d=t.get("endAngle"),c=t.get("padAngle")*ma;d="auto"===d?h-ga:-d*ma;var p=t.get("minAngle")*ma+c,f=0;e.each(n,(function(t){!isNaN(t)&&f++}));var g=e.getSum(n),m=Math.PI/(g||f)*2,v=t.get("clockwise"),y=t.get("roseType"),x=t.get("stillShowZeroSum"),_=e.getDataExtent(n);_[0]=0;var w=v?1:-1,b=[h,d],I=w*c/2;me(b,!v),h=b[0],d=b[1];var M=_a(t);M.startAngle=h,M.endAngle=d,M.clockwise=v;var S=Math.abs(d-h),D=S,C=0,T=h;if(e.setLayout({viewRect:o,r:l}),e.each(n,(function(t,i){var n;if(isNaN(t))e.setItemLayout(i,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:v,cx:r,cy:s,r0:u,r:y?NaN:l});else{(n="area"!==y?0===g&&x?m:t*m:S/f)<p?(n=p,D-=p):C+=t;var o=T+w*n,a=0,h=0;c>n?h=a=T+w*n/2:(a=T+I,h=o-I),e.setItemLayout(i,{angle:n,startAngle:a,endAngle:h,clockwise:v,cx:r,cy:s,r0:u,r:y?ve(t,_,[u,l]):l}),T=o}})),D<ga&&f)if(D<=.001){var A=S/f;e.each(n,(function(t,i){if(!isNaN(t)){var n=e.getItemLayout(i);n.angle=A;var o=0,a=0;A<c?a=o=h+w*(i+.5)*A:(o=h+w*i*A+I,a=h+w*(i+1)*A-I),n.startAngle=o,n.endAngle=a}}))}else m=D/C,T=h,e.each(n,(function(t,i){if(!isNaN(t)){var n=e.getItemLayout(i),o=n.angle===p?p:t*m,a=0,r=0;o<c?r=a=T+w*o/2:(a=T+I,r=T+w*o-I),n.startAngle=a,n.endAngle=r,T+=w*o}}))}))}var _a=a();function wa(t){return{seriesType:t,reset:function(t,e){var i=e.findComponents({mainType:"legend"});if(i&&i.length){var n=t.getData();n.filterSelf((function(t){for(var e=n.getName(t),o=0;o<i.length;o++)if(!i[o].isSelected(e))return!1;return!0}))}}}}var ba=Math.PI/180;function Ia(t,e,i,n,o,a,r,s,l,u){if(!(t.length<2)){for(var h=t.length,d=0;d<h;d++)if("outer"===t[d].position&&"labelLine"===t[d].labelAlignTo){var c=t[d].label.x-u;t[d].linePoints[1][0]+=c,t[d].label.x=u}aa(t,l,l+r)&&function(t){for(var a={list:[],maxY:0},r={list:[],maxY:0},s=0;s<t.length;s++)if("none"===t[s].labelAlignTo){var l=t[s],u=l.label.y>i?r:a,h=Math.abs(l.label.y-i);if(h>=u.maxY){var d=l.label.x-e-l.len2*o,c=n+l.len,f=Math.abs(d)<c?Math.sqrt(h*h/(1-d*d/c/c)):c;u.rB=f,u.maxY=h}u.list.push(l)}p(a),p(r)}(t)}function p(t){for(var a=t.rB,r=a*a,s=0;s<t.list.length;s++){var l=t.list[s],u=Math.abs(l.label.y-i),h=n+l.len,d=h*h,c=Math.sqrt(Math.abs((1-u*u/r)*d)),p=e+(c+l.len2)*o,f=p-l.label.x;Ma(l,l.targetTextWidth-f*o,!0),l.label.x=p}}}function Ma(t,e,i){if(void 0===i&&(i=!1),null==t.labelStyleWidth){var n=t.label,o=n.style,a=t.rect,r=o.backgroundColor,s=o.padding,l=s?s[1]+s[3]:0,u=o.overflow,h=a.width+(r?0:l);if(e<h||i){var d=a.height;if(u&&u.match("break")){n.setStyle("backgroundColor",null),n.setStyle("width",e-l);var c=n.getBoundingRect();n.setStyle("width",Math.ceil(c.width)),n.setStyle("backgroundColor",r)}else{var p=e-l,f=e<h?p:i?p>t.unconstrainedWidth?null:p:null;n.setStyle("width",f)}var g=n.getBoundingRect();a.width=g.width;var m=(n.style.margin||0)+2.1;a.height=g.height+m,a.y-=(a.height-d)/2}}}function Sa(t){return"center"===t.position}function Da(t){var i,n,o=t.getData(),a=[],r=!1,s=(t.get("minShowLabelAngle")||0)*ba,l=o.getLayout("viewRect"),u=o.getLayout("r"),d=l.width,c=l.x,p=l.y,f=l.height;function g(t){t.ignore=!0}o.each((function(t){var l=o.getItemGraphicEl(t),p=l.shape,f=l.getTextContent(),m=l.getTextGuideLine(),v=o.getItemModel(t),y=v.getModel("label"),x=y.get("position")||v.get(["emphasis","label","position"]),_=y.get("distanceToLabelLine"),w=y.get("alignTo"),b=V(y.get("edgeDistance"),d),I=y.get("bleedMargin"),M=v.getModel("labelLine"),S=M.get("length");S=V(S,d);var D=M.get("length2");if(D=V(D,d),Math.abs(p.endAngle-p.startAngle)<s)return e(f.states,g),f.ignore=!0,void(m&&(e(m.states,g),m.ignore=!0));if(function(t){if(!t.ignore)return!0;for(var e in t.states)if(!1===t.states[e].ignore)return!0;return!1}(f)){var C,T,A,L,k=(p.startAngle+p.endAngle)/2,P=Math.cos(k),O=Math.sin(k);i=p.cx,n=p.cy;var N="inside"===x||"inner"===x;if("center"===x)C=p.cx,T=p.cy,L="center";else{var R=(N?(p.r+p.r0)/2*P:p.r*P)+i,B=(N?(p.r+p.r0)/2*O:p.r*O)+n;if(C=R+3*P,T=B+3*O,!N){var E=R+P*(S+u-p.r),z=B+O*(S+u-p.r),G=E+(P<0?-1:1)*D;C="edge"===w?P<0?c+b:c+d-b:G+(P<0?-_:_),T=z,A=[[R,B],[E,z],[G,z]]}L=N?"center":"edge"===w?P>0?"right":"left":P>0?"left":"right"}var W=Math.PI,H=0,F=y.get("rotate");if(h(F))H=F*(W/180);else if("center"===x)H=0;else if("radial"===F||!0===F){H=P<0?-k+W:-k}else if("tangential"===F&&"outside"!==x&&"outer"!==x){var U=Math.atan2(P,O);U<0&&(U=2*W+U),O>0&&(U=W+U),H=U-W}if(r=!!H,f.x=C,f.y=T,f.rotation=H,f.setStyle({verticalAlign:"middle"}),N){f.setStyle({align:L});var Y=f.states.select;Y&&(Y.x+=f.x,Y.y+=f.y)}else{var X=f.getBoundingRect().clone();X.applyTransform(f.getComputedTransform());var Z=(f.style.margin||0)+2.1;X.y-=Z/2,X.height+=Z,a.push({label:f,labelLine:m,position:x,len:S,len2:D,minTurnAngle:M.get("minTurnAngle"),maxSurfaceAngle:M.get("maxSurfaceAngle"),surfaceNormal:new Vt(P,O),linePoints:A,textAlign:L,labelDistance:_,labelAlignTo:w,edgeDistance:b,bleedMargin:I,rect:X,unconstrainedWidth:X.width,labelStyleWidth:f.style.width})}l.setTextConfig({inside:N})}})),!r&&t.get("avoidLabelOverlap")&&function(t,e,i,n,o,a,r,s){for(var l=[],u=[],h=Number.MAX_VALUE,d=-Number.MAX_VALUE,c=0;c<t.length;c++){var p=t[c].label;Sa(t[c])||(p.x<e?(h=Math.min(h,p.x),l.push(t[c])):(d=Math.max(d,p.x),u.push(t[c])))}for(c=0;c<t.length;c++)if(!Sa(m=t[c])&&m.linePoints){if(null!=m.labelStyleWidth)continue;p=m.label;var f=m.linePoints,g=void 0;g="edge"===m.labelAlignTo?p.x<e?f[2][0]-m.labelDistance-r-m.edgeDistance:r+o-m.edgeDistance-f[2][0]-m.labelDistance:"labelLine"===m.labelAlignTo?p.x<e?h-r-m.bleedMargin:r+o-d-m.bleedMargin:p.x<e?p.x-r-m.bleedMargin:r+o-p.x-m.bleedMargin,m.targetTextWidth=g,Ma(m,g)}for(Ia(u,e,i,n,1,0,a,0,s,d),Ia(l,e,i,n,-1,0,a,0,s,h),c=0;c<t.length;c++){var m;if(!Sa(m=t[c])&&m.linePoints){p=m.label,f=m.linePoints;var v="edge"===m.labelAlignTo,y=p.style.padding,x=y?y[1]+y[3]:0,_=p.style.backgroundColor?0:x,w=m.rect.width+_,b=f[1][0]-f[2][0];v?p.x<e?f[2][0]=r+m.edgeDistance+w+m.labelDistance:f[2][0]=r+o-m.edgeDistance-w-m.labelDistance:(p.x<e?f[2][0]=p.x+m.labelDistance:f[2][0]=p.x-m.labelDistance,f[1][0]=f[2][0]+b),f[1][1]=f[2][1]=p.y}}}(a,i,n,u,d,f,c,p);for(var m=0;m<a.length;m++){var v=a[m],y=v.label,x=v.labelLine,_=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:v.textAlign}),_&&(e(y.states,g),y.ignore=!0);var w=y.states.select;w&&(w.x+=y.x,w.y+=y.y)}if(x){var b=v.linePoints;_||!b?(e(x.states,g),x.ignore=!0):(jo(b,v.minTurnAngle),Qo(b,v.surfaceNormal,v.maxSurfaceAngle),x.setShape({points:b}),y.__hostTarget.textGuideLineConfig={anchor:new Vt(b[0][0],b[0][1])})}}}var Ca=function(t){function e(e,i,n){var o=t.call(this)||this;o.z2=2;var a=new we;return o.setTextContent(a),o.updateData(e,i,n,!0),o}return z(e,t),e.prototype.updateData=function(t,e,i,n){var a=this,r=t.hostModel,s=t.getItemModel(e),l=s.getModel("emphasis"),u=t.getItemLayout(e),h=o(fa(s.getModel("itemStyle"),u,!0),u);if(isNaN(h.startAngle))a.setShape(h);else{if(n){a.setShape(h);var d=r.getShallow("animationType");r.ecModel.ssr?(be(a,{scaleX:0,scaleY:0},r,{dataIndex:e,isFrom:!0}),a.originX=h.cx,a.originY=h.cy):"scale"===d?(a.shape.r=u.r0,be(a,{shape:{r:u.r}},r,e)):null!=i?(a.setShape({startAngle:i,endAngle:i}),be(a,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},r,e)):(a.shape.endAngle=u.startAngle,Ie(a,{shape:{endAngle:u.endAngle}},r,e))}else Me(a),Ie(a,{shape:h},r,e);a.useStyle(t.getItemVisual(e,"style")),Se(a,s);var c=(u.startAngle+u.endAngle)/2,p=r.get("selectedOffset"),f=Math.cos(c)*p,g=Math.sin(c)*p,m=s.getShallow("cursor");m&&a.attr("cursor",m),this._updateLabel(r,t,e),a.ensureState("emphasis").shape=o({r:u.r+(l.get("scale")&&l.get("scaleSize")||0)},fa(l.getModel("itemStyle"),u)),o(a.ensureState("select"),{x:f,y:g,shape:fa(s.getModel(["select","itemStyle"]),u)}),o(a.ensureState("blur"),{shape:fa(s.getModel(["blur","itemStyle"]),u)});var v=a.getTextGuideLine(),y=a.getTextContent();v&&o(v.ensureState("select"),{x:f,y:g}),o(y.ensureState("select"),{x:f,y:g}),De(this,l.get("focus"),l.get("blurScope"),l.get("disabled"))}},e.prototype._updateLabel=function(t,e,i){var n=this,o=e.getItemModel(i),a=o.getModel("labelLine"),r=e.getItemVisual(i,"style"),s=r&&r.fill,l=r&&r.opacity;Ce(n,Te(o),{labelFetcher:e.hostModel,labelDataIndex:i,inheritColor:s,defaultOpacity:l,defaultText:t.getFormattedLabel(i,"normal")||e.getName(i)});var u=n.getTextContent();n.setTextConfig({position:null,rotation:null}),u.attr({z2:10});var h=t.get(["label","position"]);if("outside"!==h&&"outer"!==h)n.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new Ft,this.setTextGuideLine(d)),ta(this,ea(o),{stroke:s,opacity:Ae(a.get(["lineStyle","opacity"]),l,1)})}},e}(xe),Ta=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return z(e,t),e.prototype.render=function(t,e,i,n){var a,r=t.getData(),s=this._data,l=this.group;if(!s&&r.count()>0){for(var u=r.getItemLayout(0),h=1;isNaN(u&&u.startAngle)&&h<r.count();++h)u=r.getItemLayout(h);u&&(a=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),0===r.count()&&t.get("showEmptyCircle")){var d=_a(t),c=new xe({shape:o(ya(t,i),d)});c.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=c,l.add(c)}r.diff(s).add((function(t){var e=new Ca(r,t,a);r.setItemGraphicEl(t,e),l.add(e)})).update((function(t,e){var i=s.getItemGraphicEl(e);i.updateData(r,t,a),i.off("click"),l.add(i),r.setItemGraphicEl(t,i)})).remove((function(e){var i=s.getItemGraphicEl(e);_e(i,t,e)})).execute(),Da(t),"expansion"!==t.get("animationTypeUpdate")&&(this._data=r)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,e){var i=e.getData().getItemLayout(0);if(i){var n=t[0]-i.cx,o=t[1]-i.cy,a=Math.sqrt(n*n+o*o);return a<=i.r&&a>=i.r0}},e.type="pie",e}(bt);function Aa(t,e,i){e=y(e)&&{coordDimensions:e}||o({encodeDefine:t.getEncode()},e);var n=t.getSource(),a=fn(n,e).dimensions,r=new pn(a,t);return r.initData(n,i),r}var La=function(){function t(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},t.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},t.prototype.getItemVisual=function(t,e){return this._getDataWithEncodedVisual().getItemVisual(t,e)},t}(),ka=a(),Pa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new La(x(this.getData,this),x(this.getRawData,this)),this._defaultLabelLine(e)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return Aa(this,{coordDimensions:["value"],encodeDefaulter:Le(ke,this)})},e.prototype.getDataParams=function(e){var i=this.getData(),n=ka(i),o=n.seats;if(!o){var a=[];i.each(i.mapDimension("value"),(function(t){a.push(t)})),o=n.seats=Pe(a,i.hostModel.get("percentPrecision"))}var r=t.prototype.getDataParams.call(this,e);return r.percent=o[e]||0,r.$vars.push("percent"),r},e.prototype._defaultLabelLine=function(t){Oe(t,"labelLine",["show"]);var e=t.labelLine,i=t.emphasis.labelLine;e.show=e.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(It);function Oa(t){t.registerChartView(Ta),t.registerSeriesModel(Pa),Ne("pie",t.registerAction),t.registerLayout(Le(xa,"pie")),t.registerProcessor(wa("pie")),t.registerProcessor({seriesType:"pie",reset:function(t,e){var i=t.getData();i.filterSelf((function(t){var e=i.mapDimension("value"),n=i.get(e,t);return!(h(n)&&!isNaN(n)&&n<0)}))}})}function Na(t,e,i){i=i||{};var n=t.coordinateSystem,o=e.axis,a={},r=o.getAxesOnZeroOf()[0],s=o.position,l=r?"onZero":s,u=o.dim,h=n.getRect(),d=[h.x,h.x+h.width,h.y,h.y+h.height],c={left:0,right:1,top:0,bottom:1,onZero:2},p=e.get("offset")||0,f="x"===u?[d[2]-p,d[3]+p]:[d[0]-p,d[1]+p];if(r){var g=r.toGlobalCoord(r.dataToCoord(0));f[c.onZero]=Math.max(Math.min(g,f[1]),f[0])}a.position=["y"===u?f[c[l]]:d[0],"x"===u?f[c[l]]:d[3]],a.rotation=Math.PI/2*("x"===u?0:1);a.labelDirection=a.tickDirection=a.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],a.labelOffset=r?f[c[s]]-f[c.onZero]:0,e.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Re(i.labelInside,e.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var m=e.get(["axisLabel","rotate"]);return a.labelRotate="top"===l?-m:m,a.z2=1,a}function Ra(t){return"cartesian2d"===t.get("coordinateSystem")}function Ba(t){var i={xAxisModel:null,yAxisModel:null};return e(i,(function(e,n){var o=n.replace(/Model$/,""),a=t.getReferringComponents(o,Be).models[0];i[n]=a})),i}var Ea=Math.PI,za=function(){function t(t,e){this.group=new ze,this.opt=e,this.axisModel=t,L(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new ze({x:e.position[0],y:e.position[1],rotation:e.rotation});i.updateTransform(),this._transformGroup=i}return t.prototype.hasBuilder=function(t){return!!Ga[t]},t.prototype.add=function(t){Ga[t](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(t,e,i){var n,o,a=Ee(e-t);return je(a)?(o=i>0?"top":"bottom",n="center"):je(a-Ea)?(o=i>0?"bottom":"top",n="center"):(o="middle",n=a>0&&a<Ea?i>0?"right":"left":i>0?"left":"right"),{rotation:a,textAlign:n,textVerticalAlign:o}},t.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},t.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},t}(),Ga={axisLine:function(t,i,n,a){var r=i.get(["axisLine","show"]);if("auto"===r&&t.handleAutoShown&&(r=t.handleAutoShown("axisLine")),r){var s=i.axis.getExtent(),l=a.transform,d=[s[0],0],c=[s[1],0],p=d[0]>c[0];l&&(He(d,d,l),He(c,c,l));var f=o({lineCap:"round"},i.getModel(["axisLine","lineStyle"]).getLineStyle()),g=new Fe({shape:{x1:d[0],y1:d[1],x2:c[0],y2:c[1]},style:f,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});Ue(g.shape,g.style.lineWidth),g.anid="line",n.add(g);var m=i.get(["axisLine","symbol"]);if(null!=m){var v=i.get(["axisLine","symbolSize"]);u(m)&&(m=[m,m]),(u(v)||h(v))&&(v=[v,v]);var y=Ye(i.get(["axisLine","symbolOffset"])||0,v),x=v[0],_=v[1];e([{rotate:t.rotation+Math.PI/2,offset:y[0],r:0},{rotate:t.rotation-Math.PI/2,offset:y[1],r:Math.sqrt((d[0]-c[0])*(d[0]-c[0])+(d[1]-c[1])*(d[1]-c[1]))}],(function(e,i){if("none"!==m[i]&&null!=m[i]){var o=Xe(m[i],-x/2,-_/2,x,_,f.stroke,!0),a=e.r+e.offset,r=p?c:d;o.attr({rotation:e.rotate,x:r[0]+a*Math.cos(t.rotation),y:r[1]-a*Math.sin(t.rotation),silent:!0,z2:11}),n.add(o)}}))}}},axisTickLabel:function(t,i,o,a){var l=function(t,e,i,n){var o=i.axis,a=i.getModel("axisTick"),r=a.get("show");"auto"===r&&n.handleAutoShown&&(r=n.handleAutoShown("axisTick"));if(!r||o.scale.isBlank())return;for(var s=a.getModel("lineStyle"),l=n.tickDirection*a.get("length"),u=Fa(o.getTicksCoords(),e.transform,l,L(s.getLineStyle(),{stroke:i.get(["axisLine","lineStyle","color"])}),"ticks"),h=0;h<u.length;h++)t.add(u[h]);return u}(o,a,i,t),u=function(t,i,n,o){var a=n.axis,l=Re(o.axisLabelShow,n.get(["axisLabel","show"]));if(!l||a.scale.isBlank())return;var u=n.getModel("axisLabel"),h=u.get("margin"),d=a.getViewLabels(),c=(Re(o.labelRotate,u.get("rotate"))||0)*Ea/180,p=za.innerTextLayout(o.rotation,c,o.labelDirection),f=n.getCategories&&n.getCategories(!0),g=[],m=za.isLabelSilent(n),v=n.get("triggerEvent");return e(d,(function(e,l){var c="ordinal"===a.scale.type?a.scale.getRawOrdinalNumber(e.tickValue):e.tickValue,y=e.formattedLabel,x=e.rawLabel,_=u;if(f&&f[c]){var b=f[c];r(b)&&b.textStyle&&(_=new w(b.textStyle,u,n.ecModel))}var M=_.getTextColor()||n.get(["axisLine","lineStyle","color"]),S=a.dataToCoord(c),D=_.getShallow("align",!0)||p.textAlign,C=s(_.getShallow("alignMinLabel",!0),D),T=s(_.getShallow("alignMaxLabel",!0),D),A=_.getShallow("verticalAlign",!0)||_.getShallow("baseline",!0)||p.textVerticalAlign,L=s(_.getShallow("verticalAlignMinLabel",!0),A),k=s(_.getShallow("verticalAlignMaxLabel",!0),A),P=new we({x:S,y:o.labelOffset+o.labelDirection*h,rotation:p.rotation,silent:m,z2:10+(e.level||0),style:Ge(_,{text:y,align:0===l?C:l===d.length-1?T:D,verticalAlign:0===l?L:l===d.length-1?k:A,fill:I(M)?M("category"===a.type?x:"value"===a.type?c+"":c,l):M})});if(P.anid="label_"+c,We({el:P,componentModel:n,itemName:y,formatterParamsExtra:{isTruncated:function(){return P.isTruncated},value:x,tickIndex:l}}),v){var O=za.makeAxisEventDataBase(n);O.targetType="axisLabel",O.value=x,O.tickIndex=l,"category"===a.type&&(O.dataIndex=c),Ve(P).eventData=O}i.add(P),P.updateTransform(),g.push(P),t.add(P),P.decomposeTransform()})),g}(o,a,i,t);(function(t,e,i){if(Do(t.axis))return;var n=t.get(["axisLabel","showMinLabel"]),o=t.get(["axisLabel","showMaxLabel"]);e=e||[],i=i||[];var a=e[0],r=e[1],s=e[e.length-1],l=e[e.length-2],u=i[0],h=i[1],d=i[i.length-1],c=i[i.length-2];!1===n?(Wa(a),Wa(u)):Va(a,r)&&(n?(Wa(r),Wa(h)):(Wa(a),Wa(u)));!1===o?(Wa(s),Wa(d)):Va(l,s)&&(o?(Wa(l),Wa(c)):(Wa(s),Wa(d)))}(i,u,l),function(t,e,i,n){var o=i.axis,a=i.getModel("minorTick");if(!a.get("show")||o.scale.isBlank())return;var r=o.getMinorTicksCoords();if(!r.length)return;for(var s=a.getModel("lineStyle"),l=n*a.get("length"),u=L(s.getLineStyle(),L(i.getModel("axisTick").getLineStyle(),{stroke:i.get(["axisLine","lineStyle","color"])})),h=0;h<r.length;h++)for(var d=Fa(r[h],e.transform,l,u,"minorticks_"+h),c=0;c<d.length;c++)t.add(d[c])}(o,a,i,t.tickDirection),i.get(["axisLabel","hideOverlap"]))&&ra(ia(n(u,(function(t){return{label:t,priority:t.z2,defaultAttr:{ignore:t.ignore}}}))))},axisName:function(t,e,i,n){var o=Re(t.axisName,e.get("name"));if(o){var a,r,s=e.get("nameLocation"),l=t.nameDirection,u=e.getModel("nameTextStyle"),h=e.get("nameGap")||0,d=e.axis.getExtent(),c=d[0]>d[1]?-1:1,p=["start"===s?d[0]-c*h:"end"===s?d[1]+c*h:(d[0]+d[1])/2,Ha(s)?t.labelOffset+l*h:0],f=e.get("nameRotate");null!=f&&(f=f*Ea/180),Ha(s)?a=za.innerTextLayout(t.rotation,null!=f?f:t.rotation,l):(a=function(t,e,i,n){var o,a,r=Ee(i-t),s=n[0]>n[1],l="start"===e&&!s||"start"!==e&&s;je(r-Ea/2)?(a=l?"bottom":"top",o="center"):je(r-1.5*Ea)?(a=l?"top":"bottom",o="center"):(a="middle",o=r<1.5*Ea&&r>Ea/2?l?"left":"right":l?"right":"left");return{rotation:r,textAlign:o,textVerticalAlign:a}}(t.rotation,s,f||0,d),null!=(r=t.axisNameAvailableWidth)&&(r=Math.abs(r/Math.sin(a.rotation)),!isFinite(r)&&(r=null)));var g=u.getFont(),m=e.get("nameTruncate",!0)||{},v=m.ellipsis,y=Re(t.nameTruncateMaxWidth,m.maxWidth,r),x=new we({x:p[0],y:p[1],rotation:a.rotation,silent:za.isLabelSilent(e),style:Ge(u,{text:o,font:g,overflow:"truncate",width:y,ellipsis:v,fill:u.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:u.get("align")||a.textAlign,verticalAlign:u.get("verticalAlign")||a.textVerticalAlign}),z2:1});if(We({el:x,componentModel:e,itemName:o}),x.__fullText=o,x.anid="name",e.get("triggerEvent")){var _=za.makeAxisEventDataBase(e);_.targetType="axisName",_.name=o,Ve(x).eventData=_}n.add(x),x.updateTransform(),i.add(x),x.decomposeTransform()}}};function Wa(t){t&&(t.ignore=!0)}function Va(t,e){var i=t&&t.getBoundingRect().clone(),n=e&&e.getBoundingRect().clone();if(i&&n){var o=Ze([]);return Ke(o,o,-t.rotation),i.applyTransform(qe([],o,t.getLocalTransform())),n.applyTransform(qe([],o,e.getLocalTransform())),i.intersect(n)}}function Ha(t){return"middle"===t||"center"===t}function Fa(t,e,i,n,o){for(var a=[],r=[],s=[],l=0;l<t.length;l++){var u=t[l].coord;r[0]=u,r[1]=0,s[0]=u,s[1]=i,e&&(He(r,r,e),He(s,s,e));var h=new Fe({shape:{x1:r[0],y1:r[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});Ue(h.shape,h.style.lineWidth),h.anid=o+"_"+t[l].tickValue,a.push(h)}return a}function Ua(t,i){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(t,i,n){var o=i.getComponent("tooltip"),a=i.getComponent("axisPointer"),r=a.get("link",!0)||[],s=[];e(n.getCoordinateSystems(),(function(n){if(n.axisPointerEnabled){var l=Ka(n.model),u=t.coordSysAxesInfo[l]={};t.coordSysMap[l]=n;var h=n.model.getModel("tooltip",o);if(e(n.getAxes(),Le(f,!1,null)),n.getTooltipAxes&&o&&h.get("show")){var d="axis"===h.get("trigger"),c="cross"===h.get(["axisPointer","type"]),p=n.getTooltipAxes(h.get(["axisPointer","axis"]));(d||c)&&e(p.baseAxes,Le(f,!c||"cross",d)),c&&e(p.otherAxes,Le(f,"cross",!1))}}function f(o,l,d){var c=d.model.getModel("axisPointer",a),p=c.get("show");if(p&&("auto"!==p||o||Za(c))){null==l&&(l=c.get("triggerTooltip")),c=o?function(t,i,n,o,a,r){var s=i.getModel("axisPointer"),l={};e(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],(function(t){l[t]=S(s.get(t))})),l.snap="category"!==t.type&&!!r,"cross"===s.get("type")&&(l.type="line");var u=l.label||(l.label={});if(null==u.show&&(u.show=!1),"cross"===a){var h=s.get(["label","show"]);if(u.show=null==h||h,!r){var d=l.lineStyle=s.get("crossStyle");d&&L(u,d.textStyle)}}return t.model.getModel("axisPointer",new w(l,n,o))}(d,h,a,i,o,l):c;var f=c.get("snap"),g=c.get("triggerEmphasis"),m=Ka(d.model),v=l||f||"category"===d.type,y=t.axesInfo[m]={key:m,axis:d,coordSys:n,axisPointerModel:c,triggerTooltip:l,triggerEmphasis:g,involveSeries:v,snap:f,useHandle:Za(c),seriesModels:[],linkGroup:null};u[m]=y,t.seriesInvolved=t.seriesInvolved||v;var x=function(t,e){for(var i=e.model,n=e.dim,o=0;o<t.length;o++){var a=t[o]||{};if(Ya(a[n+"AxisId"],i.id)||Ya(a[n+"AxisIndex"],i.componentIndex)||Ya(a[n+"AxisName"],i.name))return o}}(r,d);if(null!=x){var _=s[x]||(s[x]={axesInfo:{}});_.axesInfo[m]=y,_.mapper=r[x].mapper,y.linkGroup=_}}}}))}(n,t,i),n.seriesInvolved&&function(t,i){i.eachSeries((function(i){var n=i.coordinateSystem,o=i.get(["tooltip","trigger"],!0),a=i.get(["tooltip","show"],!0);n&&"none"!==o&&!1!==o&&"item"!==o&&!1!==a&&!1!==i.get(["axisPointer","show"],!0)&&e(t.coordSysAxesInfo[Ka(n.model)],(function(t){var e=t.axis;n.getAxis(e.dim)===e&&(t.seriesModels.push(i),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=i.getData().count())}))}))}(n,t),n}function Ya(t,e){return"all"===t||y(t)&&wt(t,e)>=0||t===e}function Xa(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Ka(t)]}function Za(t){return!!t.get(["handle","show"])}function Ka(t){return t.type+"||"+t.id}var qa={},ja=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return z(e,t),e.prototype.render=function(e,i,n,o){this.axisPointerClass&&function(t){var e=Xa(t);if(e){var i=e.axisPointerModel,n=e.axis.scale,o=i.option,a=i.get("status"),r=i.get("value");null!=r&&(r=n.parse(r));var s=Za(i);null==a&&(o.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==r||r>l[1])&&(r=l[1]),r<l[0]&&(r=l[0]),o.value=r,s&&(o.status=e.axis.scale.isBlank()?"hide":"show")}}(e),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,n,!0)},e.prototype.updateAxisPointer=function(t,e,i,n){this._doUpdateAxisPointerClass(t,i,!1)},e.prototype.remove=function(t,e){var i=this._axisPointer;i&&i.remove(e)},e.prototype.dispose=function(e,i){this._disposeAxisPointer(i),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,i,n){var o=e.getAxisPointerClass(this.axisPointerClass);if(o){var a=function(t){var e=Xa(t);return e&&e.axisPointerModel}(t);a?(this._axisPointer||(this._axisPointer=new o)).render(t,a,i,n):this._disposeAxisPointer(i)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,e){qa[t]=e},e.getAxisPointerClass=function(t){return t&&qa[t]},e.type="axis",e}(Mt),Qa=a(),$a=S,Ja=x,tr=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(t,e,i,n){var o=e.get("value"),a=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=i,n||this._lastValue!==o||this._lastStatus!==a){this._lastValue=o,this._lastStatus=a;var r=this._group,s=this._handle;if(!a||"hide"===a)return r&&r.hide(),void(s&&s.hide());r&&r.show(),s&&s.show();var l={};this.makeElOption(l,o,t,e,i);var u=l.graphicKey;u!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=u;var h=this._moveAnimation=this.determineAnimation(t,e);if(r){var d=Le(er,e,h);this.updatePointerEl(r,l,d),this.updateLabelEl(r,l,d,e)}else r=this._group=new ze,this.createPointerEl(r,l,t,e),this.createLabelEl(r,l,t,e),i.getZr().add(r);ar(r,e,!0),this._renderHandle(o)}},t.prototype.remove=function(t){this.clear(t)},t.prototype.dispose=function(t){this.clear(t)},t.prototype.determineAnimation=function(t,e){var i=e.get("animation"),n=t.axis,o="category"===n.type,a=e.get("snap");if(!a&&!o)return!1;if("auto"===i||null==i){var r=this.animationThreshold;if(o&&n.getBandWidth()>r)return!0;if(a){var s=Xa(t).seriesDataCount,l=n.getExtent();return Math.abs(l[0]-l[1])/s>r}return!1}return!0===i},t.prototype.makeElOption=function(t,e,i,n,o){},t.prototype.createPointerEl=function(t,e,i,n){var o=e.pointer;if(o){var a=Qa(t).pointerEl=new Qe[o.type]($a(e.pointer));t.add(a)}},t.prototype.createLabelEl=function(t,e,i,n){if(e.label){var o=Qa(t).labelEl=new we($a(e.label));t.add(o),nr(o,n)}},t.prototype.updatePointerEl=function(t,e,i){var n=Qa(t).pointerEl;n&&e.pointer&&(n.setStyle(e.pointer.style),i(n,{shape:e.pointer.shape}))},t.prototype.updateLabelEl=function(t,e,i,n){var o=Qa(t).labelEl;o&&(o.setStyle(e.label.style),i(o,{x:e.label.x,y:e.label.y}),nr(o,n))},t.prototype._renderHandle=function(t){if(!this._dragging&&this.updateHandleTransform){var e,i=this._axisPointerModel,n=this._api.getZr(),o=this._handle,a=i.getModel("handle"),r=i.get("status");if(!a.get("show")||!r||"hide"===r)return o&&n.remove(o),void(this._handle=null);this._handle||(e=!0,o=this._handle=$e(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){ei(t.event)},onmousedown:Ja(this._onHandleDragMove,this,0,0),drift:Ja(this._onHandleDragMove,this),ondragend:Ja(this._onHandleDragEnd,this)}),n.add(o)),ar(o,i,!1),o.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=a.get("size");y(s)||(s=[s,s]),o.scaleX=s[0]/2,o.scaleY=s[1]/2,Je(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},t.prototype._moveHandleToValue=function(t,e){er(this._axisPointerModel,!e&&this._moveAnimation,this._handle,or(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(t,e){var i=this._handle;if(i){this._dragging=!0;var n=this.updateHandleTransform(or(i),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=n,i.stopAnimation(),i.attr(or(n)),Qa(i).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),i=this._group,n=this._handle;e&&i&&(this._lastGraphicKey=null,i&&e.remove(i),n&&e.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),ti(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(t,e,i){return{x:t[i=i||0],y:t[1-i],width:e[i],height:e[1-i]}},t}();function er(t,e,i,n){ir(Qa(i).lastProp,n)||(Qa(i).lastProp=n,e?Ie(i,n,t):(i.stopAnimation(),i.attr(n)))}function ir(t,i){if(r(t)&&r(i)){var n=!0;return e(i,(function(e,i){n=n&&ir(t[i],e)})),!!n}return t===i}function nr(t,e){t[e.get(["label","show"])?"show":"hide"]()}function or(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function ar(t,e,i){var n=e.get("z"),o=e.get("zlevel");t&&t.traverse((function(t){"group"!==t.type&&(null!=n&&(t.z=n),null!=o&&(t.zlevel=o),t.silent=i)}))}function rr(t){var e,i=t.get("type"),n=t.getModel(i+"Style");return"line"===i?(e=n.getLineStyle()).fill=null:"shadow"===i&&((e=n.getAreaStyle()).stroke=null),e}function sr(t,e,i,n,o){var a=lr(i.get("value"),e.axis,e.ecModel,i.get("seriesDataIndices"),{precision:i.get(["label","precision"]),formatter:i.get(["label","formatter"])}),r=i.getModel("label"),s=ii(r.get("padding")||0),l=r.getFont(),u=ni(a,l),h=o.position,d=u.width+s[1]+s[3],c=u.height+s[0]+s[2],p=o.align;"right"===p&&(h[0]-=d),"center"===p&&(h[0]-=d/2);var f=o.verticalAlign;"bottom"===f&&(h[1]-=c),"middle"===f&&(h[1]-=c/2),function(t,e,i,n){var o=n.getWidth(),a=n.getHeight();t[0]=Math.min(t[0]+e,o)-e,t[1]=Math.min(t[1]+i,a)-i,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}(h,d,c,n);var g=r.get("backgroundColor");g&&"auto"!==g||(g=e.get(["axisLine","lineStyle","color"])),t.label={x:h[0],y:h[1],style:Ge(r,{text:a,font:l,fill:r.getTextColor(),padding:s,backgroundColor:g}),z2:10}}function lr(t,i,n,o,a){t=i.scale.parse(t);var r=i.scale.getLabel({value:t},{precision:a.precision}),s=a.formatter;if(s){var l={value:Io(i,{value:t}),axisDimension:i.dim,axisIndex:i.index,seriesData:[]};e(o,(function(t){var e=n.getSeriesByIndex(t.seriesIndex),i=t.dataIndexInside,o=e&&e.getDataParams(i);o&&l.seriesData.push(o)})),u(s)?r=s.replace("{value}",r):I(s)&&(r=s(l))}return r}function ur(t,e,i){var n=oi();return Ke(n,n,i.rotation),ai(n,n,i.position),ri([t.dataToCoord(e),(i.labelOffset||0)+(i.labelDirection||1)*(i.labelMargin||0)],n)}function hr(t,e,i,n,o,a){var r=za.innerTextLayout(i.rotation,0,i.labelDirection);i.labelMargin=o.get(["label","margin"]),sr(e,n,o,a,{position:ur(n.axis,t,i),align:r.textAlign,verticalAlign:r.textVerticalAlign})}function dr(t,e,i){return{x1:t[i=i||0],y1:t[1-i],x2:e[i],y2:e[1-i]}}function cr(t,e,i){return{x:t[i=i||0],y:t[1-i],width:e[i],height:e[1-i]}}function pr(t,e,i,n,o,a){return{cx:t,cy:e,r0:i,r:n,startAngle:o,endAngle:a,clockwise:!0}}var fr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return z(e,t),e.prototype.makeElOption=function(t,e,i,n,o){var a=i.axis,r=a.grid,s=n.get("type"),l=gr(r,a).getOtherAxis(a).getGlobalExtent(),u=a.toGlobalCoord(a.dataToCoord(e,!0));if(s&&"none"!==s){var h=rr(n),d=mr[s](a,u,l);d.style=h,t.graphicKey=d.type,t.pointer=d}hr(e,t,Na(r.model,i),i,n,o)},e.prototype.getHandleTransform=function(t,e,i){var n=Na(e.axis.grid.model,e,{labelInside:!1});n.labelMargin=i.get(["handle","margin"]);var o=ur(e.axis,t,n);return{x:o[0],y:o[1],rotation:n.rotation+(n.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,i,n){var o=i.axis,a=o.grid,r=o.getGlobalExtent(!0),s=gr(a,o).getOtherAxis(o).getGlobalExtent(),l="x"===o.dim?0:1,u=[t.x,t.y];u[l]+=e[l],u[l]=Math.min(r[1],u[l]),u[l]=Math.max(r[0],u[l]);var h=(s[1]+s[0])/2,d=[h,h];d[l]=u[l];return{x:u[0],y:u[1],rotation:t.rotation,cursorPoint:d,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}},e}(tr);function gr(t,e){var i={};return i[e.dim+"AxisIndex"]=e.index,t.getCartesian(i)}var mr={line:function(t,e,i){return{type:"Line",subPixelOptimize:!0,shape:dr([e,i[0]],[e,i[1]],vr(t))}},shadow:function(t,e,i){var n=Math.max(1,t.getBandWidth()),o=i[1]-i[0];return{type:"Rect",shape:cr([e-n/2,i[0]],[n,o],vr(t))}}};function vr(t){return"x"===t.dim?0:1}var yr=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return z(e,t),e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(St),xr=a(),_r=e;function wr(t,e,i){if(!ce.node){var n=e.getZr();xr(n).records||(xr(n).records={}),function(t,e){if(xr(t).initialized)return;function i(i,n){t.on(i,(function(i){var o=function(t){var e={showTip:[],hideTip:[]},i=function(n){var o=e[n.type];o?o.push(n):(n.dispatchAction=i,t.dispatchAction(n))};return{dispatchAction:i,pendings:e}}(e);_r(xr(t).records,(function(t){t&&n(t,i,o.dispatchAction)})),function(t,e){var i,n=t.showTip.length,o=t.hideTip.length;n?i=t.showTip[n-1]:o&&(i=t.hideTip[o-1]);i&&(i.dispatchAction=null,e.dispatchAction(i))}(o.pendings,e)}))}xr(t).initialized=!0,i("click",Le(Ir,"click")),i("mousemove",Le(Ir,"mousemove")),i("globalout",br)}(n,e),(xr(n).records[t]||(xr(n).records[t]={})).handler=i}}function br(t,e,i){t.handler("leave",null,i)}function Ir(t,e,i,n){e.handler(t,i,n)}function Mr(t,e){if(!ce.node){var i=e.getZr();(xr(i).records||{})[t]&&(xr(i).records[t]=null)}}var Sr=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return z(e,t),e.prototype.render=function(t,e,i){var n=e.getComponent("tooltip"),o=t.get("triggerOn")||n&&n.get("triggerOn")||"mousemove|click";wr("axisPointer",i,(function(t,e,i){"none"!==o&&("leave"===t||o.indexOf(t)>=0)&&i({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})}))},e.prototype.remove=function(t,e){Mr("axisPointer",e)},e.prototype.dispose=function(t,e){Mr("axisPointer",e)},e.type="axisPointer",e}(Mt);function Dr(t,e){var i,o=[],a=t.seriesIndex;if(null==a||!(i=e.getSeriesByIndex(a)))return{point:[]};var r=i.getData(),s=si(r,t);if(null==s||s<0||y(s))return{point:[]};var l=r.getItemGraphicEl(s),u=i.coordinateSystem;if(i.getTooltipPosition)o=i.getTooltipPosition(s)||[];else if(u&&u.dataToPoint)if(t.isStacked){var h=u.getBaseAxis(),d=u.getOtherAxis(h).dim,c=h.dim,p="x"===d||"radius"===d?1:0,f=r.mapDimension(c),g=[];g[p]=r.get(f,s),g[1-p]=r.get(r.getCalculationInfo("stackResultDimension"),s),o=u.dataToPoint(g)||[]}else o=u.dataToPoint(r.getValues(n(u.dimensions,(function(t){return r.mapDimension(t)})),s))||[];else if(l){var m=l.getBoundingRect().clone();m.applyTransform(l.transform),o=[m.x+m.width/2,m.y+m.height/2]}return{point:o,el:l}}var Cr=a();function Tr(t,i,n){var o=t.currTrigger,a=[t.x,t.y],r=t,s=t.dispatchAction||x(n.dispatchAction,n),l=i.getComponent("axisPointer").coordSysAxesInfo;if(l){Or(a)&&(a=Dr({seriesIndex:r.seriesIndex,dataIndex:r.dataIndex},i).point);var u=Or(a),h=r.axesInfo,d=l.axesInfo,c="leave"===o||Or(a),p={},f={},g={list:[],map:{}},m={showPointer:Le(Lr,f),showTooltip:Le(kr,g)};e(l.coordSysMap,(function(t,i){var n=u||t.containPoint(a);e(l.coordSysAxesInfo[i],(function(t,e){var i=t.axis,o=function(t,e){for(var i=0;i<(t||[]).length;i++){var n=t[i];if(e.axis.dim===n.axisDim&&e.axis.model.componentIndex===n.axisIndex)return n}}(h,t);if(!c&&n&&(!h||o)){var r=o&&o.value;null!=r||u||(r=i.pointToData(a)),null!=r&&Ar(t,r,m,!1,p)}}))}));var v={};return e(d,(function(t,i){var n=t.linkGroup;n&&!f[i]&&e(n.axesInfo,(function(e,i){var o=f[i];if(e!==t&&o){var a=o.value;n.mapper&&(a=t.axis.scale.parse(n.mapper(a,Pr(e),Pr(t)))),v[t.key]=a}}))})),e(v,(function(t,e){Ar(d[e],t,m,!0,p)})),function(t,i,n){var o=n.axesInfo=[];e(i,(function(e,i){var n=e.axisPointerModel.option,a=t[i];a?(!e.useHandle&&(n.status="show"),n.value=a.value,n.seriesDataIndices=(a.payloadBatch||[]).slice()):!e.useHandle&&(n.status="hide"),"show"===n.status&&o.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:n.value})}))}(f,d,p),function(t,e,i,n){if(Or(e)||!t.list.length)return void n({type:"hideTip"});var o=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:i.tooltipOption,position:i.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:t.list})}(g,a,t,s),function(t,i,n){var o=n.getZr(),a="axisPointerLastHighlights",r=Cr(o)[a]||{},s=Cr(o)[a]={};e(t,(function(t,i){var n=t.axisPointerModel.option;"show"===n.status&&t.triggerEmphasis&&e(n.seriesDataIndices,(function(t){var e=t.seriesIndex+" | "+t.dataIndex;s[e]=t}))}));var l=[],u=[];e(r,(function(t,e){!s[e]&&u.push(t)})),e(s,(function(t,e){!r[e]&&l.push(t)})),u.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:u}),l.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:l})}(d,0,n),p}}function Ar(t,i,n,a,r){var s=t.axis;if(!s.scale.isBlank()&&s.containData(i))if(t.involveSeries){var l=function(t,i){var n=i.axis,o=n.dim,a=t,r=[],s=Number.MAX_VALUE,l=-1;return e(i.seriesModels,(function(i,u){var h,d,c=i.getData().mapDimensionsAll(o);if(i.getAxisTooltipData){var p=i.getAxisTooltipData(c,t,n);d=p.dataIndices,h=p.nestestValue}else{if(!(d=i.getData().indicesOfNearest(c[0],t,"category"===n.type?.5:null)).length)return;h=i.getData().get(c[0],d[0])}if(null!=h&&isFinite(h)){var f=t-h,g=Math.abs(f);g<=s&&((g<s||f>=0&&l<0)&&(s=g,l=f,a=h,r.length=0),e(d,(function(t){r.push({seriesIndex:i.seriesIndex,dataIndexInside:t,dataIndex:i.getData().getRawIndex(t)})})))}})),{payloadBatch:r,snapToValue:a}}(i,t),u=l.payloadBatch,h=l.snapToValue;u[0]&&null==r.seriesIndex&&o(r,u[0]),!a&&t.snap&&s.containData(h)&&null!=h&&(i=h),n.showPointer(t,i,u),n.showTooltip(t,l,h)}else n.showPointer(t,i)}function Lr(t,e,i,n){t[e.key]={value:i,payloadBatch:n}}function kr(t,e,i,n){var o=i.payloadBatch,a=e.axis,r=a.model,s=e.axisPointerModel;if(e.triggerTooltip&&o.length){var l=e.coordSys.model,u=Ka(l),h=t.map[u];h||(h=t.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(h)),h.dataByAxis.push({axisDim:a.dim,axisIndex:r.componentIndex,axisType:r.type,axisId:r.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:o.slice()})}}function Pr(t){var e=t.axis.model,i={},n=i.axisDim=t.axis.dim;return i.axisIndex=i[n+"AxisIndex"]=e.componentIndex,i.axisName=i[n+"AxisName"]=e.name,i.axisId=i[n+"AxisId"]=e.id,i}function Or(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}function Nr(t){ja.registerAxisPointerClass("CartesianAxisPointer",fr),t.registerComponentModel(yr),t.registerComponentView(Sr),t.registerPreprocessor((function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!y(e)&&(t.axisPointer.link=[e])}})),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,(function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=Ua(t,e)})),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Tr)}function Rr(t,e,i){var n=e.getBoxLayoutParams(),o=e.get("padding"),a={width:i.getWidth(),height:i.getHeight()},r=ye(n,a,o);li(e.get("orient"),t,e.get("itemGap"),r.width,r.height),ui(t,n,a,o)}function Br(t,e){var i=ii(e.get("padding")),n=e.getItemStyle(["color","opacity"]);return n.fill=e.get("backgroundColor"),t=new hi({shape:{x:t.x-i[3],y:t.y-i[0],width:t.width+i[1]+i[3],height:t.height+i[0]+i[2],r:e.get("borderRadius")},style:n,silent:!0,z2:-1})}var Er=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return z(e,t),e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(St);function zr(t){var e=t.get("confine");return null!=e?!!e:"richText"===t.get("renderMode")}function Gr(t){if(ce.domSupported)for(var e=document.documentElement.style,i=0,n=t.length;i<n;i++)if(t[i]in e)return t[i]}var Wr=Gr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function Vr(t,e){if(!t)return e;e=di(e,!0);var i=t.indexOf(e);return(t=-1===i?e:"-"+t.slice(0,i)+"-"+e).toLowerCase()}var Hr=Vr(Gr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),Fr=Vr(Wr,"transform"),Ur="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(ce.transform3dSupported?"will-change:transform;":"");function Yr(t,e,i){var n=t.toFixed(0)+"px",o=e.toFixed(0)+"px";if(!ce.transformSupported)return i?"top:"+o+";left:"+n+";":[["top",o],["left",n]];var a=ce.transform3dSupported,r="translate"+(a?"3d":"")+"("+n+","+o+(a?",0":"")+")";return i?"top:0;left:0;"+Fr+":"+r+";":[["top",0],["left",0],[Wr,r]]}function Xr(t,i,n){var o=[],a=t.get("transitionDuration"),r=t.get("backgroundColor"),l=t.get("shadowBlur"),u=t.get("shadowColor"),h=t.get("shadowOffsetX"),d=t.get("shadowOffsetY"),c=t.getModel("textStyle"),p=mi(t,"html"),f=h+"px "+d+"px "+l+"px "+u;return o.push("box-shadow:"+f),i&&a&&o.push(function(t,e){var i="cubic-bezier(0.23,1,0.32,1)",n=" "+t/2+"s "+i,o="opacity"+n+",visibility"+n;return e||(n=" "+t+"s "+i,o+=ce.transformSupported?","+Fr+n:",left"+n+",top"+n),Hr+":"+o}(a,n)),r&&o.push("background-color:"+r),e(["width","color","radius"],(function(e){var i="border-"+e,n=di(i),a=t.get(n);null!=a&&o.push(i+":"+a+("color"===e?"":"px"))})),o.push(function(t){var i=[],n=t.get("fontSize"),o=t.getTextColor();o&&i.push("color:"+o),i.push("font:"+t.getFont());var a=s(t.get("lineHeight"),Math.round(3*n/2));n&&i.push("line-height:"+a+"px");var r=t.get("textShadowColor"),l=t.get("textShadowBlur")||0,u=t.get("textShadowOffsetX")||0,h=t.get("textShadowOffsetY")||0;return r&&l&&i.push("text-shadow:"+u+"px "+h+"px "+l+"px "+r),e(["decoration","align"],(function(e){var n=t.get(e);n&&i.push("text-"+e+":"+n)})),i.join(";")}(c)),null!=p&&o.push("padding:"+ii(p).join("px ")+"px"),o.join(";")+";"}function Zr(t,e,i,n,o){var a=e&&e.painter;if(i){var r=a&&a.getViewportRoot();r&&fi(t,r,i,n,o)}else{t[0]=n,t[1]=o;var s=a&&a.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var Kr=function(){function t(t,e){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,ce.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var n=this._zr=t.getZr(),o=e.appendTo,a=o&&(u(o)?document.querySelector(o):ci(o)?o:I(o)&&o(t.getDom()));Zr(this._styleCoord,n,a,t.getWidth()/2,t.getHeight()/2),(a||t.getDom()).appendChild(i),this._api=t,this._container=a;var r=this;i.onmouseenter=function(){r._enterable&&(clearTimeout(r._hideTimeout),r._show=!0),r._inContent=!0},i.onmousemove=function(t){if(t=t||window.event,!r._enterable){var e=n.handler,i=n.painter.getViewportRoot();pi(i,t,!0),e.dispatch("mousemove",t)}},i.onmouseleave=function(){r._inContent=!1,r._enterable&&r._show&&r.hideLater(r._hideDelay)}}return t.prototype.update=function(t){if(!this._container){var e=this._api.getDom(),i=(a="position",(r=(o=e).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(o))?r[a]:null),n=e.style;"absolute"!==n.position&&"absolute"!==i&&(n.position="relative")}var o,a,r,s=t.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=t.get("className")||""},t.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,n=i.style,o=this._styleCoord;i.innerHTML?n.cssText=Ur+Xr(t,!this._firstShow,this._longHide)+Yr(o[0],o[1],!0)+"border-color:"+gi(e)+";"+(t.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(t,e,i,n,o){var a=this.el;if(null!=t){var r="";if(u(o)&&"item"===i.get("trigger")&&!zr(i)&&(r=function(t,e,i){if(!u(i)||"inside"===i)return"";var n=t.get("backgroundColor"),o=t.get("borderWidth");e=gi(e);var a,r,s="left"===(a=i)?"right":"right"===a?"left":"top"===a?"bottom":"top",l=Math.max(1.5*Math.round(o),6),h="",d=Fr+":";wt(["left","right"],s)>-1?(h+="top:50%",d+="translateY(-50%) rotate("+(r="left"===s?-225:-45)+"deg)"):(h+="left:50%",d+="translateX(-50%) rotate("+(r="top"===s?225:45)+"deg)");var c=r*Math.PI/180,p=l+o,f=p*Math.abs(Math.cos(c))+p*Math.abs(Math.sin(c)),g=e+" solid "+o+"px;";return'<div style="'+["position:absolute;width:"+l+"px;height:"+l+"px;z-index:-1;",(h+=";"+s+":-"+Math.round(100*((f-Math.SQRT2*o)/2+Math.SQRT2*o-(f-p)/2))/100+"px")+";"+d+";","border-bottom:"+g,"border-right:"+g,"background-color:"+n+";"].join("")+'"></div>'}(i,n,o)),u(t))a.innerHTML=t+r;else if(t){a.innerHTML="",y(t)||(t=[t]);for(var s=0;s<t.length;s++)ci(t[s])&&t[s].parentNode!==a&&a.appendChild(t[s]);if(r&&a.childNodes.length){var l=document.createElement("div");l.innerHTML=r,a.appendChild(l)}}}else a.innerHTML=""},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el;return t?[t.offsetWidth,t.offsetHeight]:[0,0]},t.prototype.moveTo=function(t,i){if(this.el){var n=this._styleCoord;if(Zr(n,this._zr,this._container,t,i),null!=n[0]&&null!=n[1]){var o=this.el.style,a=Yr(n[0],n[1]);e(a,(function(t){o[t[0]]=t[1]}))}}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",ce.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout((function(){return t._longHide=!0}),500)},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(x(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},t}(),qr=function(){function t(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),$r(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return t.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(t,i,n,o,a){var s=this;r(t)&&vi(""),this.el&&this._zr.remove(this.el);var l=n.getModel("textStyle");this.el=new we({style:{rich:i.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:o,textShadowColor:l.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:mi(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),e(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],(function(t){s.el.style[t]=n.get(t)})),e(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],(function(t){s.el.style[t]=l.get(t)||0})),this._zr.add(this.el);var u=this;this.el.on("mouseover",(function(){u._enterable&&(clearTimeout(u._hideTimeout),u._show=!0),u._inContent=!0})),this.el.on("mouseout",(function(){u._enterable&&u._show&&u.hideLater(u._hideDelay),u._inContent=!1}))},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),i=Qr(t.style);return[e.width+i.left+i.right,e.height+i.top+i.bottom]},t.prototype.moveTo=function(t,e){var i=this.el;if(i){var n=this._styleCoord;$r(n,this._zr,t,e),t=n[0],e=n[1];var o=i.style,a=jr(o.borderWidth||0),r=Qr(o);i.x=t+a+r.left,i.y=e+a+r.top,i.markRedraw()}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(x(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function jr(t){return Math.max(0,t)}function Qr(t){var e=jr(t.shadowBlur||0),i=jr(t.shadowOffsetX||0),n=jr(t.shadowOffsetY||0);return{left:jr(e-i),right:jr(e+i),top:jr(e-n),bottom:jr(e+n)}}function $r(t,e,i,n){t[0]=i,t[1]=n,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var Jr=new hi({shape:{x:-1,y:-1,width:2,height:2}}),ts=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=i.type,e}return z(i,t),i.prototype.init=function(t,e){if(!ce.node&&e.getDom()){var i=t.getComponent("tooltip"),n=this._renderMode=yi(i.get("renderMode"));this._tooltipContent="richText"===n?new qr(e):new Kr(e,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},i.prototype.render=function(t,e,i){if(!ce.node&&i.getDom()){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=i;var n=this._tooltipContent;n.update(t),n.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&t.get("transitionDuration")?Je(this,"_updatePosition",50,"fixRate"):ti(this,"_updatePosition")}},i.prototype._initGlobalListener=function(){var t=this._tooltipModel.get("triggerOn");wr("itemTooltip",this._api,x((function(e,i,n){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(i,n):"leave"===e&&this._hide(n))}),this))},i.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,i=this._api,n=t.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==n&&"click"!==n){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){!i.isDisposed()&&o.manuallyShowTip(t,e,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})}))}},i.prototype.manuallyShowTip=function(t,e,i,n){if(n.from!==this.uid&&!ce.node&&i.getDom()){var o=is(n,i);this._ticket="";var a=n.dataByCoordSys,r=function(t,e,i){var n=Ci(t).queryOptionMap,o=n.keys()[0];if(!o||"series"===o)return;var a=Ti(e,o,n.get(o),{useDefault:!1,enableAll:!1,enableNone:!1}),r=a.models[0];if(!r)return;var s,l=i.getViewOfComponentModel(r);if(l.group.traverse((function(e){var i=Ve(e).tooltipConfig;if(i&&i.name===t.name)return s=e,!0})),s)return{componentMainType:o,componentIndex:r.componentIndex,el:s}}(n,e,i);if(r){var s=r.el.getBoundingRect().clone();s.applyTransform(r.el.transform),this._tryShow({offsetX:s.x+s.width/2,offsetY:s.y+s.height/2,target:r.el,position:n.position,positionDefault:"bottom"},o)}else if(n.tooltip&&null!=n.x&&null!=n.y){var l=Jr;l.x=n.x,l.y=n.y,l.update(),Ve(l).tooltipConfig={name:null,option:n.tooltip},this._tryShow({offsetX:n.x,offsetY:n.y,target:l},o)}else if(a)this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,dataByCoordSys:a,tooltipOption:n.tooltipOption},o);else if(null!=n.seriesIndex){if(this._manuallyAxisShowTip(t,e,i,n))return;var u=Dr(n,e),h=u.point[0],d=u.point[1];null!=h&&null!=d&&this._tryShow({offsetX:h,offsetY:d,target:u.el,position:n.position,positionDefault:"bottom"},o)}else null!=n.x&&null!=n.y&&(i.dispatchAction({type:"updateAxisPointer",x:n.x,y:n.y}),this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,target:i.getZr().findHover(n.x,n.y).target},o))}},i.prototype.manuallyHideTip=function(t,e,i,n){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,n.from!==this.uid&&this._hide(is(n,i))},i.prototype._manuallyAxisShowTip=function(t,e,i,n){var o=n.seriesIndex,a=n.dataIndex,r=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=o&&null!=a&&null!=r){var s=e.getSeriesByIndex(o);if(s)if("axis"===es([s.getData().getItemModel(a),s,(s.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:a,position:n.position}),!0}},i.prototype._tryShow=function(t,e){var i=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var n=t.dataByCoordSys;if(n&&n.length)this._showAxisTooltip(n,t);else if(i){var o,a;if("legend"===Ve(i).ssrType)return;this._lastDataByCoordSys=null,xi(i,(function(t){return null!=Ve(t).dataIndex?(o=t,!0):null!=Ve(t).tooltipConfig?(a=t,!0):void 0}),!0),o?this._showSeriesItemTooltip(t,o,e):a?this._showComponentItemTooltip(t,a,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},i.prototype._showOrMove=function(t,e){var i=t.get("showDelay");e=x(e,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(e,i):e()},i.prototype._showAxisTooltip=function(t,i){var n=this._ecModel,a=this._tooltipModel,r=[i.offsetX,i.offsetY],s=es([i.tooltipOption],a),l=this._renderMode,u=[],h=_i("section",{blocks:[],noHeader:!0}),d=[],c=new bi;e(t,(function(t){e(t.dataByAxis,(function(t){var i=n.getComponent(t.axisDim+"Axis",t.axisIndex),r=t.value;if(i&&null!=r){var s=lr(r,i.axis,n,t.seriesDataIndices,t.valueLabelOpt),p=_i("section",{header:s,noHeader:!wi(s),sortBlocks:!0,blocks:[]});h.blocks.push(p),e(t.seriesDataIndices,(function(e){var h=n.getSeriesByIndex(e.seriesIndex),f=e.dataIndexInside,g=h.getDataParams(f);if(!(g.dataIndex<0)){g.axisDim=t.axisDim,g.axisIndex=t.axisIndex,g.axisType=t.axisType,g.axisId=t.axisId,g.axisValue=Io(i.axis,{value:r}),g.axisValueLabel=s,g.marker=c.makeTooltipMarker("item",gi(g.color),l);var m=Ii(h.formatTooltip(f,!0,null)),v=m.frag;if(v){var y=es([h],a).get("valueFormatter");p.blocks.push(y?o({valueFormatter:y},v):v)}m.text&&d.push(m.text),u.push(g)}}))}}))})),h.blocks.reverse(),d.reverse();var p=i.position,f=s.get("order"),g=Mi(h,c,l,f,n.get("useUTC"),s.get("textStyle"));g&&d.unshift(g);var m="richText"===l?"\n\n":"<br/>",v=d.join(m);this._showOrMove(s,(function(){this._updateContentNotChangedOnAxis(t,u)?this._updatePosition(s,p,r[0],r[1],this._tooltipContent,u):this._showTooltipContent(s,v,u,Math.random()+"",r[0],r[1],p,null,c)}))},i.prototype._showSeriesItemTooltip=function(t,e,i){var n=this._ecModel,a=Ve(e),r=a.seriesIndex,s=n.getSeriesByIndex(r),l=a.dataModel||s,u=a.dataIndex,h=a.dataType,d=l.getData(h),c=this._renderMode,p=t.positionDefault,f=es([d.getItemModel(u),l,s&&(s.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),g=f.get("trigger");if(null==g||"item"===g){var m=l.getDataParams(u,h),v=new bi;m.marker=v.makeTooltipMarker("item",gi(m.color),c);var y=Ii(l.formatTooltip(u,!1,h)),x=f.get("order"),_=f.get("valueFormatter"),w=y.frag,b=w?Mi(_?o({valueFormatter:_},w):w,v,c,x,n.get("useUTC"),f.get("textStyle")):y.text,I="item_"+l.name+"_"+u;this._showOrMove(f,(function(){this._showTooltipContent(f,b,m,I,t.offsetX,t.offsetY,t.position,t.target,v)})),i({type:"showTip",dataIndexInside:u,dataIndex:d.getRawIndex(u),seriesIndex:r,from:this.uid})}},i.prototype._showComponentItemTooltip=function(t,e,i){var n="html"===this._renderMode,o=Ve(e),a=o.tooltipConfig.option||{},r=a.encodeHTMLContent;if(u(a)){a={content:a,formatter:a},r=!0}r&&n&&a.content&&((a=S(a)).content=Si(a.content));var s=[a],l=this._ecModel.getComponent(o.componentMainType,o.componentIndex);l&&s.push(l),s.push({formatter:a.content});var h=t.positionDefault,d=es(s,this._tooltipModel,h?{position:h}:null),c=d.get("content"),p=Math.random()+"",f=new bi;this._showOrMove(d,(function(){var i=S(d.get("formatterParams")||{});this._showTooltipContent(d,c,i,p,t.offsetX,t.offsetY,t.position,e,f)})),i({type:"showTip",from:this.uid})},i.prototype._showTooltipContent=function(t,e,i,n,o,a,r,s,l){if(this._ticket="",t.get("showContent")&&t.get("show")){var h=this._tooltipContent;h.setEnterable(t.get("enterable"));var d=t.get("formatter");r=r||t.get("position");var c=e,p=this._getNearestPoint([o,a],i,t.get("trigger"),t.get("borderColor")).color;if(d)if(u(d)){var f=t.ecModel.get("useUTC"),g=y(i)?i[0]:i;c=d,g&&g.axisType&&g.axisType.indexOf("time")>=0&&(c=H(g.axisValue,c,f)),c=Di(c,i,!0)}else if(I(d)){var m=x((function(e,n){e===this._ticket&&(h.setContent(n,l,t,p,r),this._updatePosition(t,r,o,a,h,i,s))}),this);this._ticket=n,c=d(i,n,m)}else c=d;h.setContent(c,l,t,p,r),h.show(t,p),this._updatePosition(t,r,o,a,h,i,s)}},i.prototype._getNearestPoint=function(t,e,i,n){return"axis"===i||y(e)?{color:n||("html"===this._renderMode?"#fff":"none")}:y(e)?void 0:{color:n||e.color||e.borderColor}},i.prototype._updatePosition=function(t,e,i,n,o,a,s){var l=this._api.getWidth(),h=this._api.getHeight();e=e||t.get("position");var d=o.getSize(),c=t.get("align"),p=t.get("verticalAlign"),f=s&&s.getBoundingRect().clone();if(s&&f.applyTransform(s.transform),I(e)&&(e=e([i,n],a,o.el,f,{viewSize:[l,h],contentSize:d.slice()})),y(e))i=V(e[0],l),n=V(e[1],h);else if(r(e)){var g=e;g.width=d[0],g.height=d[1];var m=ye(g,{width:l,height:h});i=m.x,n=m.y,c=null,p=null}else if(u(e)&&s){var v=function(t,e,i,n){var o=i[0],a=i[1],r=Math.ceil(Math.SQRT2*n)+8,s=0,l=0,u=e.width,h=e.height;switch(t){case"inside":s=e.x+u/2-o/2,l=e.y+h/2-a/2;break;case"top":s=e.x+u/2-o/2,l=e.y-a-r;break;case"bottom":s=e.x+u/2-o/2,l=e.y+h+r;break;case"left":s=e.x-o-r,l=e.y+h/2-a/2;break;case"right":s=e.x+u+r,l=e.y+h/2-a/2}return[s,l]}(e,f,d,t.get("borderWidth"));i=v[0],n=v[1]}else{v=function(t,e,i,n,o,a,r){var s=i.getSize(),l=s[0],u=s[1];null!=a&&(t+l+a+2>n?t-=l+a:t+=a);null!=r&&(e+u+r>o?e-=u+r:e+=r);return[t,e]}(i,n,o,l,h,c?null:20,p?null:20);i=v[0],n=v[1]}if(c&&(i-=ns(c)?d[0]/2:"right"===c?d[0]:0),p&&(n-=ns(p)?d[1]/2:"bottom"===p?d[1]:0),zr(t)){v=function(t,e,i,n,o){var a=i.getSize(),r=a[0],s=a[1];return t=Math.min(t+r,n)-r,e=Math.min(e+s,o)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}(i,n,o,l,h);i=v[0],n=v[1]}o.moveTo(i,n)},i.prototype._updateContentNotChangedOnAxis=function(t,i){var n=this._lastDataByCoordSys,o=this._cbParamsList,a=!!n&&n.length===t.length;return a&&e(n,(function(n,r){var s=n.dataByAxis||[],l=(t[r]||{}).dataByAxis||[];(a=a&&s.length===l.length)&&e(s,(function(t,n){var r=l[n]||{},s=t.seriesDataIndices||[],u=r.seriesDataIndices||[];(a=a&&t.value===r.value&&t.axisType===r.axisType&&t.axisId===r.axisId&&s.length===u.length)&&e(s,(function(t,e){var i=u[e];a=a&&t.seriesIndex===i.seriesIndex&&t.dataIndex===i.dataIndex})),o&&e(t.seriesDataIndices,(function(t){var e=t.seriesIndex,n=i[e],r=o[e];n&&r&&r.data!==n.data&&(a=!1)}))}))})),this._lastDataByCoordSys=t,this._cbParamsList=i,!!a},i.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},i.prototype.dispose=function(t,e){!ce.node&&e.getDom()&&(ti(this,"_updatePosition"),this._tooltipContent.dispose(),Mr("itemTooltip",e))},i.type="tooltip",i}(Mt);function es(t,e,i){var n,o=e.ecModel;i?(n=new w(i,o,o),n=new w(e.option,n,o)):n=e;for(var a=t.length-1;a>=0;a--){var r=t[a];r&&(r instanceof w&&(r=r.get("tooltip",!0)),u(r)&&(r={formatter:r}),r&&(n=new w(r,n,o)))}return n}function is(t,e){return t.dispatchAction||x(e.dispatchAction,e)}function ns(t){return"center"===t||"middle"===t}function os(t){ko(Nr),t.registerComponentModel(Er),t.registerComponentView(ts),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Ai),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Ai)}var as=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i.layoutMode={type:"box",ignoreSize:!0},i}return z(e,t),e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(St),rs=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return z(e,t),e.prototype.render=function(t,e,i){if(this.group.removeAll(),t.get("show")){var n=this.group,o=t.getModel("textStyle"),a=t.getModel("subtextStyle"),r=t.get("textAlign"),l=s(t.get("textBaseline"),t.get("textVerticalAlign")),u=new we({style:Ge(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),h=u.getBoundingRect(),d=t.get("subtext"),c=new we({style:Ge(a,{text:d,fill:a.getTextColor(),y:h.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=t.get("link"),f=t.get("sublink"),g=t.get("triggerEvent",!0);u.silent=!p&&!g,c.silent=!f&&!g,p&&u.on("click",(function(){Li(p,"_"+t.get("target"))})),f&&c.on("click",(function(){Li(f,"_"+t.get("subtarget"))})),Ve(u).eventData=Ve(c).eventData=g?{componentType:"title",componentIndex:t.componentIndex}:null,n.add(u),d&&n.add(c);var m=n.getBoundingRect(),v=t.getBoxLayoutParams();v.width=m.width,v.height=m.height;var y=ye(v,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));r||("middle"===(r=t.get("left")||t.get("right"))&&(r="center"),"right"===r?y.x+=y.width:"center"===r&&(y.x+=y.width/2)),l||("center"===(l=t.get("top")||t.get("bottom"))&&(l="middle"),"bottom"===l?y.y+=y.height:"middle"===l&&(y.y+=y.height/2),l=l||"top"),n.x=y.x,n.y=y.y,n.markRedraw();var x={align:r,verticalAlign:l};u.setStyle(x),c.setStyle(x),m=n.getBoundingRect();var _=y.margin,w=t.getItemStyle(["color","opacity"]);w.fill=t.get("backgroundColor");var b=new hi({shape:{x:m.x-_[3],y:m.y-_[0],width:m.width+_[1]+_[3],height:m.height+_[0]+_[2],r:t.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});n.add(b)}},e.type="title",e}(Mt);function ss(t){t.registerComponentModel(as),t.registerComponentView(rs)}var ls=function(i){function o(){var t=null!==i&&i.apply(this,arguments)||this;return t.type=o.type,t.layoutMode={type:"box",ignoreSize:!0},t}return z(o,i),o.prototype.init=function(t,e,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},o.prototype.mergeOption=function(t,e){i.prototype.mergeOption.call(this,t,e),this._updateSelector(t)},o.prototype._updateSelector=function(t){var i=t.selector,n=this.ecModel;!0===i&&(i=t.selector=["all","inverse"]),y(i)&&e(i,(function(t,e){u(t)&&(t={type:t}),i[e]=pe(t,function(t,e){return"all"===e?{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])}:"inverse"===e?{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(n,t.type))}))},o.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,i=0;i<t.length;i++){var n=t[i].get("name");if(this.isSelected(n)){this.select(n),e=!0;break}}!e&&this.select(t[0].get("name"))}},o.prototype._updateData=function(e){var i=[],o=[];e.eachRawSeries((function(t){var n,a=t.name;if(o.push(a),t.legendVisualProvider){var r=t.legendVisualProvider.getAllNames();e.isSeriesFiltered(t)||(o=o.concat(r)),r.length?i=i.concat(r):n=!0}else n=!0;n&&ki(t)&&i.push(t.name)})),this._availableNames=o;var a=this.get("data")||i,r=t(),s=n(a,(function(t){return(u(t)||h(t))&&(t={name:t}),r.get(t.name)?null:(r.set(t.name,!0),new w(t,this,this.ecModel))}),this);this._data=et(s,(function(t){return!!t}))},o.prototype.getData=function(){return this._data},o.prototype.select=function(t){var i=this.option.selected;if("single"===this.get("selectedMode")){var n=this._data;e(n,(function(t){i[t.get("name")]=!1}))}i[t]=!0},o.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},o.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},o.prototype.allSelect=function(){var t=this._data,i=this.option.selected;e(t,(function(t){i[t.get("name",!0)]=!0}))},o.prototype.inverseSelect=function(){var t=this._data,i=this.option.selected;e(t,(function(t){var e=t.get("name",!0);i.hasOwnProperty(e)||(i[e]=!0),i[e]=!i[e]}))},o.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&wt(this._availableNames,t)>=0},o.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},o.type="legend.plain",o.dependencies=["series"],o.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},o}(St),us=Le,hs=e,ds=ze,cs=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.type,t.newlineDisabled=!1,t}return z(i,e),i.prototype.init=function(){this.group.add(this._contentGroup=new ds),this.group.add(this._selectorGroup=new ds),this._isFirstRender=!0},i.prototype.getContentGroup=function(){return this._contentGroup},i.prototype.getSelectorGroup=function(){return this._selectorGroup},i.prototype.render=function(t,e,i){var n=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var o=t.get("align"),a=t.get("orient");o&&"auto"!==o||(o="right"===t.get("left")&&"vertical"===a?"right":"left");var r=t.get("selector",!0),s=t.get("selectorPosition",!0);!r||s&&"auto"!==s||(s="horizontal"===a?"end":"start"),this.renderInner(o,t,e,i,r,a,s);var l=t.getBoxLayoutParams(),u={width:i.getWidth(),height:i.getHeight()},h=t.get("padding"),d=ye(l,u,h),c=this.layoutInner(t,o,d,n,r,s),p=ye(L({width:c.width,height:c.height},l),u,h);this.group.x=p.x-c.x,this.group.y=p.y-c.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Br(c,t))}},i.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},i.prototype.renderInner=function(e,i,n,a,r,s,l){var u=this.getContentGroup(),h=t(),d=i.get("selectedMode"),c=[];n.eachRawSeries((function(t){!t.get("legendHoverLink")&&c.push(t.id)})),hs(i.getData(),(function(t,r){var s=t.get("name");if(!this.newlineDisabled&&(""===s||"\n"===s)){var l=new ds;return l.newline=!0,void u.add(l)}var p=n.getSeriesByName(s)[0];if(!h.get(s))if(p){var f=p.getData(),g=f.getVisual("legendLineStyle")||{},m=f.getVisual("legendIcon"),v=f.getVisual("style"),y=this._createItem(p,s,r,t,i,e,g,v,m,d,a);y.on("click",us(ps,s,null,a,c)).on("mouseover",us(gs,p.name,null,a,c)).on("mouseout",us(ms,p.name,null,a,c)),n.ssr&&y.eachChild((function(t){var e=Ve(t);e.seriesIndex=p.seriesIndex,e.dataIndex=r,e.ssrType="legend"})),h.set(s,!0)}else n.eachRawSeries((function(l){if(!h.get(s)&&l.legendVisualProvider){var u=l.legendVisualProvider;if(!u.containName(s))return;var p=u.indexOfName(s),f=u.getItemVisual(p,"style"),g=u.getItemVisual(p,"legendIcon"),m=Pi(f.fill);m&&0===m[3]&&(m[3]=.2,f=o(o({},f),{fill:Oi(m,"rgba")}));var v=this._createItem(l,s,r,t,i,e,{},f,g,d,a);v.on("click",us(ps,null,s,a,c)).on("mouseover",us(gs,null,s,a,c)).on("mouseout",us(ms,null,s,a,c)),n.ssr&&v.eachChild((function(t){var e=Ve(t);e.seriesIndex=l.seriesIndex,e.dataIndex=r,e.ssrType="legend"})),h.set(s,!0)}}),this)}),this),r&&this._createSelector(r,i,a,s,l)},i.prototype._createSelector=function(t,e,i,n,o){var a=this.getSelectorGroup();hs(t,(function(t){var n=t.type,o=new we({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:"all"===n?"legendAllSelect":"legendInverseSelect",legendId:e.id})}});a.add(o);var r=e.getModel("selectorLabel"),s=e.getModel(["emphasis","selectorLabel"]);Ce(o,{normal:r,emphasis:s},{defaultText:t.title}),Ni(o)}))},i.prototype._createItem=function(t,e,i,n,o,a,r,s,l,h,d){var c=t.visualDrawType,p=o.get("itemWidth"),f=o.get("itemHeight"),g=o.isSelected(e),m=n.get("symbolRotate"),v=n.get("symbolKeepAspect"),y=n.get("icon"),x=function(t,e,i,n,o,a,r){function s(t,e){"auto"===t.lineWidth&&(t.lineWidth=e.lineWidth>0?2:0),hs(t,(function(i,n){"inherit"===t[n]&&(t[n]=e[n])}))}var l=e.getModel("itemStyle"),u=l.getItemStyle(),h=0===t.lastIndexOf("empty",0)?"fill":"stroke",d=l.getShallow("decal");u.decal=d&&"inherit"!==d?Ri(d,r):n.decal,"inherit"===u.fill&&(u.fill=n[o]);"inherit"===u.stroke&&(u.stroke=n[h]);"inherit"===u.opacity&&(u.opacity=("fill"===o?n:i).opacity);s(u,n);var c=e.getModel("lineStyle"),p=c.getLineStyle();if(s(p,i),"auto"===u.fill&&(u.fill=n.fill),"auto"===u.stroke&&(u.stroke=n.fill),"auto"===p.stroke&&(p.stroke=n.fill),!a){var f=e.get("inactiveBorderWidth"),g=u[h];u.lineWidth="auto"===f?n.lineWidth>0&&g?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),p.stroke=c.get("inactiveColor"),p.lineWidth=c.get("inactiveWidth")}return{itemStyle:u,lineStyle:p}}(l=y||l||"roundRect",n,r,s,c,g,d),_=new ds,w=n.getModel("textStyle");if(!I(t.getLegendIcon)||y&&"inherit"!==y){var b="inherit"===y&&t.getData().getVisual("symbol")?"inherit"===m?t.getData().getVisual("symbolRotate"):m:0;_.add(function(t){var e=t.icon||"roundRect",i=Xe(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);i.setStyle(t.itemStyle),i.rotation=(t.iconRotate||0)*Math.PI/180,i.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2);return i}({itemWidth:p,itemHeight:f,icon:l,iconRotate:b,itemStyle:x.itemStyle,symbolKeepAspect:v}))}else _.add(t.getLegendIcon({itemWidth:p,itemHeight:f,icon:l,iconRotate:m,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:v}));var M="left"===a?p+5:-5,S=a,D=o.get("formatter"),C=e;u(D)&&D?C=D.replace("{name}",null!=e?e:""):I(D)&&(C=D(e));var T=g?w.getTextColor():n.get("inactiveColor");_.add(new we({style:Ge(w,{text:C,x:M,y:f/2,fill:T,align:S,verticalAlign:"middle"},{inheritColor:T})}));var A=new hi({shape:_.getBoundingRect(),style:{fill:"transparent"}}),L=n.getModel("tooltip");return L.get("show")&&We({el:A,componentModel:o,itemName:e,itemTooltipOption:L.option}),_.add(A),_.eachChild((function(t){t.silent=!0})),A.silent=!h,this.getContentGroup().add(_),Ni(_),_.__legendDataIndex=i,_},i.prototype.layoutInner=function(t,e,i,n,o,a){var r=this.getContentGroup(),s=this.getSelectorGroup();li(t.get("orient"),r,t.get("itemGap"),i.width,i.height);var l=r.getBoundingRect(),u=[-l.x,-l.y];if(s.markRedraw(),r.markRedraw(),o){li("horizontal",s,t.get("selectorItemGap",!0));var h=s.getBoundingRect(),d=[-h.x,-h.y],c=t.get("selectorButtonGap",!0),p=t.getOrient().index,f=0===p?"width":"height",g=0===p?"height":"width",m=0===p?"y":"x";"end"===a?d[p]+=l[f]+c:u[p]+=h[f]+c,d[1-p]+=l[g]/2-h[g]/2,s.x=d[0],s.y=d[1],r.x=u[0],r.y=u[1];var v={x:0,y:0};return v[f]=l[f]+c+h[f],v[g]=Math.max(l[g],h[g]),v[m]=Math.min(0,h[m]+d[1-p]),v}return r.x=u[0],r.y=u[1],this.group.getBoundingRect()},i.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},i.type="legend.plain",i}(Mt);function ps(t,e,i,n){ms(t,e,i,n),i.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),gs(t,e,i,n)}function fs(t){for(var e,i=t.getZr().storage.getDisplayList(),n=0,o=i.length;n<o&&!(e=i[n].states.emphasis);)n++;return e&&e.hoverLayer}function gs(t,e,i,n){fs(i)||i.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:n})}function ms(t,e,i,n){fs(i)||i.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:n})}function vs(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries((function(t){for(var i=0;i<e.length;i++)if(!e[i].isSelected(t.name))return!1;return!0}))}function ys(t,i,n){var o="allSelect"===t||"inverseSelect"===t,a={},r=[];n.eachComponent({mainType:"legend",query:i},(function(e){o?e[t]():e[t](i.name),xs(e,a),r.push(e.componentIndex)}));var s={};return n.eachComponent("legend",(function(t){e(a,(function(e,i){t[e?"select":"unSelect"](i)})),xs(t,s)})),o?{selected:s,legendIndex:r}:{name:i.name,selected:s}}function xs(t,i){var n=i||{};return e(t.getData(),(function(e){var i=e.get("name");if("\n"!==i&&""!==i){var o=t.isSelected(i);Bi(n,i)?n[i]=n[i]&&o:n[i]=o}})),n}function _s(t){t.registerComponentModel(ls),t.registerComponentView(cs),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,vs),t.registerSubTypeDefaulter("legend",(function(){return"plain"})),function(t){t.registerAction("legendToggleSelect","legendselectchanged",Le(ys,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",Le(ys,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",Le(ys,"inverseSelect")),t.registerAction("legendSelect","legendselected",Le(ys,"select")),t.registerAction("legendUnSelect","legendunselected",Le(ys,"unSelect"))}(t)}var ws=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return z(e,t),e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(e,i,n){var o=Ei(e);t.prototype.init.call(this,e,i,n),bs(this,e,o)},e.prototype.mergeOption=function(e,i){t.prototype.mergeOption.call(this,e,i),bs(this,this.option,e)},e.type="legend.scroll",e.defaultOption=zi(ls.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(ls);function bs(t,e,i){var n=[1,1];n[t.getOrient().index]=0,Gi(e,i,{type:"box",ignoreSize:!!n})}var Is=ze,Ms=["width","height"],Ss=["x","y"],Ds=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=i.type,e.newlineDisabled=!0,e._currentIndex=0,e}return z(i,t),i.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new Is),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Is)},i.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},i.prototype.renderInner=function(e,i,n,o,a,r,s){var l=this;t.prototype.renderInner.call(this,e,i,n,o,a,r,s);var u=this._controllerGroup,h=i.get("pageIconSize",!0),d=y(h)?h:[h,h];p("pagePrev",0);var c=i.getModel("pageTextStyle");function p(t,e){var n=t+"DataIndex",a=$e(i.get("pageIcons",!0)[i.getOrient().name][e],{onclick:x(l._pageGo,l,n,i,o)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});a.name=t,u.add(a)}u.add(new we({name:"pageText",style:{text:"xx/xx",fill:c.getTextColor(),font:c.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1)},i.prototype.layoutInner=function(t,e,i,n,o,a){var r=this.getSelectorGroup(),s=t.getOrient().index,l=Ms[s],u=Ss[s],h=Ms[1-s],d=Ss[1-s];o&&li("horizontal",r,t.get("selectorItemGap",!0));var c=t.get("selectorButtonGap",!0),p=r.getBoundingRect(),f=[-p.x,-p.y],g=S(i);o&&(g[l]=i[l]-p[l]-c);var m=this._layoutContentAndController(t,n,g,s,l,h,d,u);if(o){if("end"===a)f[s]+=m[l]+c;else{var v=p[l]+c;f[s]-=v,m[u]-=v}m[l]+=p[l]+c,f[1-s]+=m[d]+m[h]/2-p[h]/2,m[h]=Math.max(m[h],p[h]),m[d]=Math.min(m[d],p[d]+f[1-s]),r.x=f[0],r.y=f[1],r.markRedraw()}return m},i.prototype._layoutContentAndController=function(t,e,i,n,o,a,r,l){var u=this.getContentGroup(),h=this._containerGroup,d=this._controllerGroup;li(t.get("orient"),u,t.get("itemGap"),n?i.width:null,n?null:i.height),li("horizontal",d,t.get("pageButtonItemGap",!0));var c=u.getBoundingRect(),p=d.getBoundingRect(),f=this._showController=c[o]>i[o],g=[-c.x,-c.y];e||(g[n]=u[l]);var m=[0,0],v=[-p.x,-p.y],y=s(t.get("pageButtonGap",!0),t.get("itemGap",!0));f&&("end"===t.get("pageButtonPosition",!0)?v[n]+=i[o]-p[o]:m[n]+=p[o]+y);v[1-n]+=c[a]/2-p[a]/2,u.setPosition(g),h.setPosition(m),d.setPosition(v);var x={x:0,y:0};if(x[o]=f?i[o]:c[o],x[a]=Math.max(c[a],p[a]),x[r]=Math.min(0,p[r]+v[1-n]),h.__rectSize=i[o],f){var _={x:0,y:0};_[o]=Math.max(i[o]-p[o]-y,0),_[a]=x[a],h.setClipPath(new hi({shape:_})),h.__rectSize=_[o]}else d.eachChild((function(t){t.attr({invisible:!0,silent:!0})}));var w=this._getPageInfo(t);return null!=w.pageIndex&&Ie(u,{x:w.contentPosition[0],y:w.contentPosition[1]},f?t:null),this._updatePageInfoView(t,w),x},i.prototype._pageGo=function(t,e,i){var n=this._getPageInfo(e)[t];null!=n&&i.dispatchAction({type:"legendScroll",scrollDataIndex:n,legendId:e.id})},i.prototype._updatePageInfoView=function(t,i){var n=this._controllerGroup;e(["pagePrev","pageNext"],(function(e){var o=null!=i[e+"DataIndex"],a=n.childOfName(e);a&&(a.setStyle("fill",o?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),a.cursor=o?"pointer":"default")}));var o=n.childOfName("pageText"),a=t.get("pageFormatter"),r=i.pageIndex,s=null!=r?r+1:0,l=i.pageCount;o&&a&&o.setStyle("text",u(a)?a.replace("{current}",null==s?"":s+"").replace("{total}",null==l?"":l+""):a({current:s,total:l}))},i.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),i=this.getContentGroup(),n=this._containerGroup.__rectSize,o=t.getOrient().index,a=Ms[o],r=Ss[o],s=this._findTargetItemIndex(e),l=i.children(),u=l[s],h=l.length,d=h?1:0,c={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return c;var p=y(u);c.contentPosition[o]=-p.s;for(var f=s+1,g=p,m=p,v=null;f<=h;++f)(!(v=y(l[f]))&&m.e>g.s+n||v&&!x(v,g.s))&&(g=m.i>g.i?m:v)&&(null==c.pageNextDataIndex&&(c.pageNextDataIndex=g.i),++c.pageCount),m=v;for(f=s-1,g=p,m=p,v=null;f>=-1;--f)(v=y(l[f]))&&x(m,v.s)||!(g.i<m.i)||(m=g,null==c.pagePrevDataIndex&&(c.pagePrevDataIndex=g.i),++c.pageCount,++c.pageIndex),g=v;return c;function y(t){if(t){var e=t.getBoundingRect(),i=e[r]+t[r];return{s:i,e:i+e[a],i:t.__legendDataIndex}}}function x(t,e){return t.e>=e&&t.s<=e+n}},i.prototype._findTargetItemIndex=function(t){return this._showController?(this.getContentGroup().eachChild((function(n,o){var a=n.__legendDataIndex;null==i&&null!=a&&(i=o),a===t&&(e=o)})),null!=e?e:i):0;var e,i},i.type="legend.scroll",i}(cs);function Cs(t){ko(_s),t.registerComponentModel(ws),t.registerComponentView(Ds),function(t){t.registerAction("legendScroll","legendscroll",(function(t,e){var i=t.scrollDataIndex;null!=i&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},(function(t){t.setScrollDataIndex(i)}))}))}(t)}function Ts(t){ko(_s),ko(Cs)}export{Kn as $,xo as A,wo as B,Na as C,za as D,ja as E,ko as F,Aa as G,wa as H,On as I,Hi as J,Wn as K,La as L,Nr as M,rr as N,wn as O,sr as P,tr as Q,pr as R,pn as S,dr as T,hr as U,ur as V,cr as W,To as X,mo as Y,Rr as Z,Br as _,So as a,kn as a0,yn as a1,pa as a2,Oa as a3,os as a4,ss as a5,Ts as a6,ia as b,oa as c,aa as d,mn as e,ta as f,Yi as g,ra as h,ea as i,vn as j,Bn as k,fa as l,bo as m,Un as n,Yn as o,fn as p,yo as q,Sn as r,Do as s,Mo as t,Zo as u,_o as v,Ra as w,Ba as x,Co as y,In as z};
