const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/GenPreviewModal-1c8F66YY.js","static/js/index-C-jnPPYH.js","static/js/index-BAyZi_co.js","static/css/index-D3o2Gh25.css","static/css/index-DLGKBcca.css","static/js/index-FaVgdj3V.js","static/js/generator-Iuzxk3cN.js","static/css/GenPreviewModal-esw4ZINz.css"])))=>i.map(i=>d[i]);
import{d as e,A as a,Z as t,a1 as l,r as o,b as i,h as n,w as s,f as d,J as r,a2 as c,a3 as m,a as p,G as u,c as f,C as b,a4 as h,F as g,t as w,a0 as _,o as v,M as x}from"./index-BAyZi_co.js";import{_ as y}from"./index-B7Sos0mo.js";import k from"./GenConfigDrawer-DHV2HfHl.js";import{l as j,d as C,a as N}from"./generator-Iuzxk3cN.js";import{u as R}from"./useTable-DUTUCT70.js";import"./index-FaVgdj3V.js";import"./GiForm-BWZRNfN-.js";import"./index.vue_vue_type_script_setup_true_lang-Dekw0iDL.js";import"./useResetReactive-NMdkdCz2.js";import"./useDict-ConFaTXJ.js";import"./useBreakpoint-C2fvcUp5.js";const I={class:"gi_table_page"},S=e({name:"CodeGenerator",__name:"index",setup(e){const S=c((()=>m((()=>import("./GenPreviewModal-1c8F66YY.js")),__vite__mapDeps([0,1,2,3,4,5,6,7])))),G=a({tableName:void 0}),{tableData:T,loading:U,pagination:A,selectedKeys:D,select:L,selectAll:O,search:K}=R((e=>j({...G,...e})),{immediate:!0,formatResult:e=>e.map((e=>({...e,disabled:!e.createTime})))}),P=[{title:"序号",width:66,align:"center",render:({rowIndex:e})=>t("span",{},e+1+(A.current-1)*A.pageSize)},{title:"表名称",dataIndex:"tableName",minWidth:225,ellipsis:!0,tooltip:!0},{title:"描述",dataIndex:"comment",ellipsis:!0,tooltip:!0},{title:"类名前缀",dataIndex:"classNamePrefix",ellipsis:!0,tooltip:!0},{title:"作者名称",dataIndex:"author"},{title:"所属模块",dataIndex:"moduleName",ellipsis:!0,tooltip:!0},{title:"模块包名",dataIndex:"packageName",ellipsis:!0,tooltip:!0},{title:"配置时间",dataIndex:"createTime",width:180},{title:"修改时间",dataIndex:"updateTime",width:180},{title:"操作",dataIndex:"action",slotName:"action",width:160,align:"center",fixed:l()?void 0:"right"}],V=()=>{G.tableName=void 0,K()},E=()=>{D.value=[]},M=o(),z=o(),B=e=>{var a;null==(a=z.value)||a.onOpen(e)},F=async e=>{const a=await C(e),t=a.headers["content-disposition"],l=/filename=([^;]+\.[^.;]+);*/.exec(t)||"",o=window.decodeURI(l[1]),i=new Blob([a.data]),n=document.createElement("a"),s=window.URL.createObjectURL(i);n.style.display="none",n.href=s,n.download=o,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(s)},W=async e=>{0===(await N(e)).code&&x.success("代码生成成功")};return(e,a)=>{const t=p("a-input-search"),l=p("icon-refresh"),o=p("a-button"),c=p("icon-code-sandbox"),m=p("a-link"),x=p("a-alert"),j=p("a-space"),C=y,N=_("permission");return v(),i("div",I,[n(C,{selectedKeys:d(D),"onUpdate:selectedKeys":a[2]||(a[2]=e=>r(D)?D.value=e:null),title:"","row-key":"tableName",data:d(T),columns:P,loading:d(U),scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:d(A),"disabled-tools":["size","setting"],"disabled-column-keys":["tableName"],"row-selection":{type:"checkbox",showCheckedAll:!0},onSelect:d(L),onSelectAll:d(O),onRefresh:d(K)},{"toolbar-left":s((()=>[n(t,{modelValue:d(G).tableName,"onUpdate:modelValue":a[0]||(a[0]=e=>d(G).tableName=e),placeholder:"搜索表名称","allow-clear":"",onSearch:d(K)},null,8,["modelValue","onSearch"]),n(o,{onClick:V},{icon:s((()=>[n(l)])),default:s((()=>a[3]||(a[3]=[b("重置")]))),_:1})])),"toolbar-right":s((()=>[n(o,{type:"primary",disabled:!d(D).length,title:d(D).length?"":"请选择",onClick:a[1]||(a[1]=e=>B(d(D)))},{icon:s((()=>[n(c)])),default:s((()=>a[4]||(a[4]=[b("批量生成")]))),_:1},8,["disabled","title"])])),"toolbar-bottom":s((()=>[n(x,null,h({default:s((()=>[d(D).length>0?(v(),i(g,{key:0},[b(" 已选中 "+w(d(D).length)+" 条记录(可跨页) ",1)],64)):(v(),i(g,{key:1},[b("未选中任何记录")],64))])),_:2},[d(D).length>0?{name:"action",fn:s((()=>[n(m,{onClick:E},{default:s((()=>a[5]||(a[5]=[b("清空")]))),_:1})])),key:"0"}:void 0]),1024)])),action:s((({record:e})=>[n(j,null,{default:s((()=>[u((v(),f(m,{title:"配置",onClick:a=>{return t=e.tableName,l=e.comment,void(null==(o=M.value)||o.onOpen(t,l));var t,l,o}},{default:s((()=>a[6]||(a[6]=[b("配置")]))),_:2},1032,["onClick"])),[[N,["code:generator:config"]]]),u((v(),f(m,{disabled:!e.createTime,title:e.createTime?"生成":"请先进行生成配置",onClick:a=>B([e.tableName])},{default:s((()=>a[7]||(a[7]=[b(" 生成 ")]))),_:2},1032,["disabled","title","onClick"])),[[N,["code:generator:preview"]]])])),_:2},1024)])),_:1},8,["selectedKeys","data","loading","pagination","onSelect","onSelectAll","onRefresh"]),n(k,{ref_key:"GenConfigDrawerRef",ref:M,onSaveSuccess:d(K)},null,8,["onSaveSuccess"]),n(d(S),{ref_key:"GenPreviewModalRef",ref:z,onGenerate:W,onDownload:F},null,512)])}}});export{S as default};
