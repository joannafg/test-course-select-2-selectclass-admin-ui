import{_ as e}from"./index-HUsaxJdw.js";import{_ as t}from"./index-B7Sos0mo.js";import{_ as s}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-27S6yIFO.js";import{_ as a}from"./GiCellTags.vue_vue_type_script_setup_true_lang-Byfoyq2W.js";import{_ as l}from"./GiCellGender.vue_vue_type_script_setup_true_lang-JUo4QZxx.js";import{_ as i}from"./index.vue_vue_type_script_setup_true_lang-Dee-5w2A.js";import{d as r,a as o,c as n,o as d,w as u,h as m,b as p,C as c,t as _,A as f,Z as y,a1 as h,r as v,f as g,a0 as x,G as k,e as w,J as j,x as S}from"./index-BAyZi_co.js";import{_ as I}from"./GiForm-BWZRNfN-.js";import C from"./index-wPX5THg9.js";import{_ as b}from"./UserAddDrawer.vue_vue_type_script_setup_true_lang-CiyiKilQ.js";import R from"./UserImportDrawer-C0MgHbiS.js";import{_ as U}from"./UserDetailDrawer.vue_vue_type_script_setup_true_lang-BBAwfVxk.js";import{_ as N}from"./UserResetPwdModal.vue_vue_type_script_setup_true_lang-BRosyEhJ.js";import{_ as D}from"./UserUpdateRoleModal.vue_vue_type_script_setup_true_lang-DmUeCZeP.js";import{l as P,e as z,f as G}from"./user-D7V0nsbJ.js";import{D as T}from"./common-BtD_44m1.js";import{u as W}from"./useTable-DUTUCT70.js";import{u as A}from"./useDownload-C-k5xGNE.js";import{u as O}from"./useResetReactive-NMdkdCz2.js";import{h as L}from"./has-CF2CDZHh.js";import"./regexp-DaVwsOyC.js";import"./index.vue_vue_type_script_setup_true_lang-Dekw0iDL.js";import"./useDept-CXLwDhMr.js";import"./index-FaVgdj3V.js";import"./useRole-BKbf4B3R.js";import"./encrypt-fe7GwHAY.js";import"./index-DVDBkEOF.js";import"./useBreakpoint-C2fvcUp5.js";const M={key:1},V=r({name:"GiCellAvatar",__name:"GiCellAvatar",props:{avatar:{default:""},name:{default:""},isLink:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const s=e,a=t;return(e,t)=>{const l=i,r=o("a-typography-paragraph"),f=o("a-link"),y=o("a-space");return d(),n(y,{fill:""},{default:u((()=>[m(l,{src:s.avatar,name:s.name,size:24},null,8,["src","name"]),s.isLink?(d(),n(f,{key:0,onClick:t[0]||(t[0]=e=>a("click"))},{default:u((()=>[m(r,{class:"link-text",ellipsis:{rows:1,showTooltip:!0,css:!0}},{default:u((()=>[c(_(s.name),1)])),_:1})])),_:1})):(d(),p("span",M,[m(r,{ellipsis:{rows:1,showTooltip:!0,css:!0}},{default:u((()=>[c(_(s.name),1)])),_:1})]))])),_:1})}}}),B={class:"gi_page"},J=S(r({name:"SystemUser",__name:"index",setup(i){const r=f({form:{layout:"inline"},grid:{cols:{xs:1,sm:1,md:2,lg:3,xl:3,xxl:3}},fold:{enable:!0,index:1,defaultCollapsed:!0}}),[_,S]=O({sort:["t1.id,desc"]}),M=f([{type:"input",field:"description",formItemProps:{hideLabel:!0},props:{placeholder:"search the username/nickname/description"}},{type:"select",field:"status",options:T,formItemProps:{hideLabel:!0},props:{placeholder:"please select the status"}},{type:"range-picker",field:"createTime",span:{lg:2,xl:2,xxl:1},formItemProps:{placeholder:["select start time","select end time"],hideLabel:!0}}]),{tableData:J,loading:$,pagination:q,search:F,handleDelete:Y}=W((e=>P({..._,...e})),{immediate:!1}),Z=[{title:"number",width:66,align:"center",render:({rowIndex:e})=>y("span",{},e+1+(q.current-1)*q.pageSize),fixed:h()?void 0:"left"},{title:"nickname",dataIndex:"nickname",slotName:"nickname",minWidth:140,ellipsis:!0,tooltip:!0,fixed:h()?void 0:"left"},{title:"username",dataIndex:"username",slotName:"username",minWidth:140,ellipsis:!0,tooltip:!0},{title:"status",dataIndex:"status",slotName:"status",align:"center"},{title:"gender",dataIndex:"gender",slotName:"gender",align:"center"},{title:"department",dataIndex:"deptName",minWidth:180,ellipsis:!0,tooltip:!0},{title:"role",dataIndex:"roleNames",slotName:"roleNames",minWidth:165},{title:"phone",dataIndex:"phone",minWidth:170,ellipsis:!0,tooltip:!0},{title:"email",dataIndex:"email",minWidth:170,ellipsis:!0,tooltip:!0},{title:"system",dataIndex:"isSystem",slotName:"isSystem",width:100,align:"center",show:!1},{title:"description",dataIndex:"description",minWidth:130,ellipsis:!0,tooltip:!0},{title:"create user",dataIndex:"createUserString",width:140,ellipsis:!0,tooltip:!0,show:!1},{title:"create time",dataIndex:"createTime",width:180},{title:"update user",dataIndex:"updateUserString",width:140,ellipsis:!0,tooltip:!0,show:!1},{title:"update time",dataIndex:"updateTime",width:180,show:!1},{title:"action",dataIndex:"action",slotName:"action",width:190,align:"center",fixed:h()?void 0:"right",show:L.hasPermOr(["system:user:detail","system:user:update","system:user:delete","system:user:resetPwd","system:user:updateRole"])}],E=()=>{S(),F()},H=()=>{A((()=>G(_)))},K=e=>{_.deptId=1===e.length?e[0]:void 0,F()},Q=v(),X=()=>{var e;null==(e=Q.value)||e.onOpen()},ee=v(),te=()=>{var e;null==(e=ee.value)||e.onAdd()},se=v(),ae=v(),le=v();return(i,f)=>{const y=I,h=o("icon-plus"),v=o("a-button"),S=o("icon-upload"),P=o("icon-download"),G=V,T=l,W=a,A=s,O=o("a-tag"),ie=o("a-link"),re=o("icon-more"),oe=o("a-doption"),ne=o("a-dropdown"),de=o("a-space"),ue=t,me=o("a-col"),pe=o("a-row"),ce=e,_e=x("permission");return d(),p("div",B,[m(ce,{size:"20%"},{left:u((()=>[m(C,{onNodeClick:K})])),main:u((()=>[m(pe,{align:"stretch",gutter:14,class:"h-full page_content"},{default:u((()=>[m(me,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,class:"h-full overflow-hidden"},{default:u((()=>[m(ue,{"row-key":"id",data:g(J),columns:Z,loading:g($),scroll:{x:"100%",y:"100%",minWidth:1500},pagination:g(q),"disabled-tools":["size"],"disabled-column-keys":["nickname"],onRefresh:g(F)},{top:u((()=>[m(y,{modelValue:g(_),"onUpdate:modelValue":f[0]||(f[0]=e=>j(_)?_.value=e:null),options:g(r),columns:g(M),onSearch:g(F),onReset:E},null,8,["modelValue","options","columns","onSearch"])])),"toolbar-left":u((()=>[k((d(),n(v,{type:"primary",onClick:te},{icon:u((()=>[m(h)])),default:u((()=>f[1]||(f[1]=[c("add")]))),_:1})),[[_e,["system:user:add"]]]),k((d(),n(v,{onClick:X},{icon:u((()=>[m(S)])),default:u((()=>f[2]||(f[2]=[c("import")]))),_:1})),[[_e,["system:user:import"]]])])),"toolbar-right":u((()=>[k((d(),n(v,{onClick:H},{icon:u((()=>[m(P)])),default:u((()=>f[3]||(f[3]=[c("export")]))),_:1})),[[_e,["system:user:export"]]])])),nickname:u((({record:e})=>[m(G,{avatar:e.avatar,name:e.nickname},null,8,["avatar","name"])])),gender:u((({record:e})=>[m(T,{gender:e.gender},null,8,["gender"])])),roleNames:u((({record:e})=>[m(W,{data:e.roleNames},null,8,["data"])])),status:u((({record:e})=>[m(A,{status:e.status},null,8,["status"])])),isSystem:u((({record:e})=>[e.isSystem?(d(),n(O,{key:0,color:"red",size:"small"},{default:u((()=>f[4]||(f[4]=[c("yes")]))),_:1})):(d(),n(O,{key:1,color:"arcoblue",size:"small"},{default:u((()=>f[5]||(f[5]=[c("no")]))),_:1}))])),action:u((({record:e})=>[m(de,null,{default:u((()=>[k((d(),n(ie,{title:"detail",onClick:t=>(e=>{var t;null==(t=se.value)||t.onOpen(e.id)})(e)},{default:u((()=>f[6]||(f[6]=[c("detail")]))),_:2},1032,["onClick"])),[[_e,["system:user:detail"]]]),k((d(),n(ie,{title:"update",onClick:t=>(e=>{var t;null==(t=ee.value)||t.onUpdate(e.id)})(e)},{default:u((()=>f[7]||(f[7]=[c("update")]))),_:2},1032,["onClick"])),[[_e,["system:user:update"]]]),k((d(),n(ie,{status:"danger",disabled:e.isSystem,title:e.isSystem?"system data cannot be deleted":"delete",onClick:t=>(e=>Y((()=>z(e.id)),{content:`are you sure to delete the user「${e.nickname}(${e.username})」?`,showModal:!0}))(e)},{default:u((()=>f[8]||(f[8]=[c(" delete ")]))),_:2},1032,["disabled","title","onClick"])),[[_e,["system:user:delete"]]]),m(ne,null,{content:u((()=>[k((d(),n(oe,{title:"reset password",onClick:t=>(e=>{var t;null==(t=ae.value)||t.onOpen(e.id)})(e)},{default:u((()=>f[9]||(f[9]=[c("reset password")]))),_:2},1032,["onClick"])),[[_e,["system:user:resetPwd"]]]),k((d(),n(oe,{title:"assign role",onClick:t=>(e=>{var t;null==(t=le.value)||t.onOpen(e.id)})(e)},{default:u((()=>f[10]||(f[10]=[c("assign role")]))),_:2},1032,["onClick"])),[[_e,["system:user:updateRole"]]])])),default:u((()=>[g(L).hasPermOr(["system:user:resetPwd","system:user:updateRole"])?(d(),n(v,{key:0,type:"text",size:"mini",title:"more"},{icon:u((()=>[m(re,{size:16})])),_:1})):w("",!0)])),_:2},1024)])),_:2},1024)])),_:1},8,["data","loading","pagination","onRefresh"])])),_:1})])),_:1})])),_:1}),m(b,{ref_key:"UserAddDrawerRef",ref:ee,onSaveSuccess:g(F)},null,8,["onSaveSuccess"]),m(R,{ref_key:"UserImportDrawerRef",ref:Q,onSaveSuccess:g(F)},null,8,["onSaveSuccess"]),m(U,{ref_key:"UserDetailDrawerRef",ref:se},null,512),m(N,{ref_key:"UserResetPwdModalRef",ref:ae},null,512),m(D,{ref_key:"UserUpdateRoleModalRef",ref:le,onSaveSuccess:g(F)},null,8,["onSaveSuccess"])])}}}),[["__scopeId","data-v-691933eb"]]);export{J as default};
