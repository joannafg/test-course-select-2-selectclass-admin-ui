import{_ as e}from"./index-B7Sos0mo.js";import{_ as a}from"./GiCellTag.vue_vue_type_script_setup_true_lang-BFrLDIrR.js";import{_ as t}from"./TeacherAddModal.vue_vue_type_script_setup_true_lang-B-ZxmuHy.js";import{_ as l}from"./TeacherDetailDrawer.vue_vue_type_script_setup_true_lang-Bx3cY5iK.js";import{l as o,d as s,e as d}from"./teacher-AO1vI7zE.js";import{d as n,A as i,r,a1 as c,b as u,h as m,w as p,f as h,a as _,G as g,c as f,C as v,a0 as x,o as I}from"./index-BAyZi_co.js";import{u as j}from"./useTable-DUTUCT70.js";import{u as y}from"./useDownload-C-k5xGNE.js";import{u as N}from"./useDict-ConFaTXJ.js";import{h as w}from"./has-CF2CDZHh.js";import"./index-FaVgdj3V.js";import"./GiForm-BWZRNfN-.js";import"./index.vue_vue_type_script_setup_true_lang-Dekw0iDL.js";import"./useResetReactive-NMdkdCz2.js";import"./useDept-CXLwDhMr.js";import"./GiCellStatus.vue_vue_type_script_setup_true_lang-27S6yIFO.js";import"./useBreakpoint-C2fvcUp5.js";const C={class:"gi_table_page"},b=n({name:"Teacher",__name:"index",setup(n){const{teacher_status:b}=N("teacher_status"),k=i({teacherNo:void 0,name:void 0,gender:void 0,collegeId:void 0,status:void 0,sort:["id,desc"]}),{tableData:V,loading:S,pagination:D,search:T,handleDelete:R}=j((e=>o({...k,...e})),{immediate:!0}),U=r([{title:"teacher ID",dataIndex:"id",slotName:"id"},{title:"teacher number",dataIndex:"teacherNo",slotName:"teacherNo"},{title:"name",dataIndex:"name",slotName:"name"},{title:"gender",dataIndex:"gender",slotName:"gender"},{title:"title",dataIndex:"title",slotName:"title"},{title:"phone",dataIndex:"phone",slotName:"phone"},{title:"email",dataIndex:"email",slotName:"email"},{title:"college",dataIndex:"collegeId",slotName:"collegeId"},{title:"status",dataIndex:"status",slotName:"status"},{title:"action",dataIndex:"action",slotName:"action",width:160,align:"center",fixed:c()?void 0:"right",show:w.hasPermOr(["selectclass:teacher:detail","selectclass:teacher:update","selectclass:teacher:delete"])}]),A=()=>{k.teacherNo=void 0,k.name=void 0,k.gender=void 0,k.collegeId=void 0,k.status=void 0,T()},G=()=>{y((()=>d(k)))},M=r(),O=()=>{var e;null==(e=M.value)||e.onAdd()},q=r();return(o,d)=>{const n=_("a-input-search"),i=_("a-select"),r=_("icon-refresh"),c=_("a-button"),j=_("icon-plus"),y=_("icon-download"),N=a,w=_("a-link"),z=_("a-space"),B=e,F=x("permission");return I(),u("div",C,[m(B,{title:"teacher management","row-key":"id",data:h(V),columns:h(U),loading:h(S),scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:h(D),"disabled-tools":["size"],"disabled-column-keys":["name"],onRefresh:h(T)},{"toolbar-left":p((()=>[m(n,{modelValue:h(k).teacherNo,"onUpdate:modelValue":d[0]||(d[0]=e=>h(k).teacherNo=e),placeholder:"please enter the teacher number","allow-clear":"",onSearch:h(T)},null,8,["modelValue","onSearch"]),m(n,{modelValue:h(k).name,"onUpdate:modelValue":d[1]||(d[1]=e=>h(k).name=e),placeholder:"please enter the name","allow-clear":"",onSearch:h(T)},null,8,["modelValue","onSearch"]),m(n,{modelValue:h(k).gender,"onUpdate:modelValue":d[2]||(d[2]=e=>h(k).gender=e),placeholder:"please enter the gender","allow-clear":"",onSearch:h(T)},null,8,["modelValue","onSearch"]),m(i,{modelValue:h(k).collegeId,"onUpdate:modelValue":d[3]||(d[3]=e=>h(k).collegeId=e),options:o.college_id_enum,placeholder:"please select the college","allow-clear":"",style:{width:"150px"},onChange:h(T)},null,8,["modelValue","options","onChange"]),m(i,{modelValue:h(k).status,"onUpdate:modelValue":d[4]||(d[4]=e=>h(k).status=e),options:h(b),placeholder:"please select the status","allow-clear":"",style:{width:"150px"},onChange:h(T)},null,8,["modelValue","options","onChange"]),m(c,{onClick:A},{icon:p((()=>[m(r)])),default:p((()=>d[5]||(d[5]=[v("reset")]))),_:1})])),"toolbar-right":p((()=>[g((I(),f(c,{type:"primary",onClick:O},{icon:p((()=>[m(j)])),default:p((()=>d[6]||(d[6]=[v("add")]))),_:1})),[[F,["selectclass:teacher:add"]]]),g((I(),f(c,{onClick:G},{icon:p((()=>[m(y)])),default:p((()=>d[7]||(d[7]=[v("export")]))),_:1})),[[F,["selectclass:teacher:export"]]])])),status:p((({record:e})=>[m(N,{value:e.status,dict:h(b)},null,8,["value","dict"])])),action:p((({record:e})=>[m(z,null,{default:p((()=>[g((I(),f(w,{title:"details",onClick:a=>(e=>{var a;null==(a=q.value)||a.onOpen(e.id)})(e)},{default:p((()=>d[8]||(d[8]=[v("details")]))),_:2},1032,["onClick"])),[[F,["selectclass:teacher:detail"]]]),g((I(),f(w,{title:"modify",onClick:a=>(e=>{var a;null==(a=M.value)||a.onUpdate(e.id)})(e)},{default:p((()=>d[9]||(d[9]=[v("modify")]))),_:2},1032,["onClick"])),[[F,["selectclass:teacher:update"]]]),g((I(),f(w,{status:"danger",disabled:e.disabled,title:e.disabled?"cannot delete":"delete",onClick:a=>(e=>R((()=>s(e.id)),{content:"are you sure to delete the data?",showModal:!0}))(e)},{default:p((()=>d[10]||(d[10]=[v(" delete ")]))),_:2},1032,["disabled","title","onClick"])),[[F,["selectclass:teacher:delete"]]])])),_:2},1024)])),_:1},8,["data","columns","loading","pagination","onRefresh"]),m(t,{ref_key:"TeacherAddModalRef",ref:M,onSaveSuccess:h(T)},null,8,["onSaveSuccess"]),m(l,{ref_key:"TeacherDetailDrawerRef",ref:q},null,512)])}}});export{b as default};
