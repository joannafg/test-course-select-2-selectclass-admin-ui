import{b as e}from"./index-FaVgdj3V.js";import{e as a,f as s,h as l}from"./dict-BKgVatZ-.js";import{_ as t}from"./GiForm-BWZRNfN-.js";import{d as o,r as i,p as r,A as u,c as d,w as n,f as c,J as m,a as f,h as v,o as p,M as y}from"./index-BAyZi_co.js";import{u as b}from"./useResetReactive-NMdkdCz2.js";const h=o({__name:"DictAddModal",emits:["save-success"],setup(o,{expose:h,emit:w}){const g=w,{width:x}=e(),R=i(""),j=i(!1),_=r((()=>!!R.value)),k=r((()=>_.value?"modify dictionary":"add dictionary")),A=i(),U={form:{size:"large"},btns:{hide:!0}},[V,q]=b({}),z=u([{label:"name",field:"name",type:"input",rules:[{required:!0,message:"please enter the name"}]},{label:"code",field:"code",type:"input",disabled:()=>_.value,rules:[{required:!0,message:"please enter the code"}]},{label:"description",field:"description",type:"textarea",props:{maxLength:200,autoSize:{minRows:3,maxRows:5}}}]),F=()=>{var e,a;null==(a=null==(e=A.value)?void 0:e.formRef)||a.resetFields(),q()},M=async()=>{var e,a;if(await(null==(a=null==(e=A.value)?void 0:e.formRef)?void 0:a.validate()))return!1;try{return _.value?(await s(V,R.value),y.success("modify successfully")):(await l(V),y.success("add successfully")),g("save-success"),!0}catch(t){return!1}};return h({onAdd:()=>{F(),R.value="",j.value=!0},onUpdate:async e=>{F(),R.value=e;const{data:s}=await a(e);Object.assign(V,s),j.value=!0}}),(e,a)=>{const s=f("a-modal");return p(),d(s,{visible:c(j),"onUpdate:visible":a[1]||(a[1]=e=>m(j)?j.value=e:null),title:c(k),"mask-closable":!1,"esc-to-close":!1,width:c(x)>=500?500:"100%",draggable:"",onBeforeOk:M,onClose:F},{default:n((()=>[v(c(t),{ref_key:"formRef",ref:A,modelValue:c(V),"onUpdate:modelValue":a[0]||(a[0]=e=>m(V)?V.value=e:null),options:U,columns:c(z)},null,8,["modelValue","columns"])])),_:1},8,["visible","title","width"])}}});export{h as _};
