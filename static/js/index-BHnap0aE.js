import{_ as e}from"./index-B7Sos0mo.js";import{_ as a}from"./GiCellTag.vue_vue_type_script_setup_true_lang-BFrLDIrR.js";import{_ as t}from"./CourseAddModal.vue_vue_type_script_setup_true_lang-BumnqUkq.js";import{_ as o}from"./CourseDetailDrawer.vue_vue_type_script_setup_true_lang-CPuJXPvE.js";import{l,d as s,e as d}from"./course-DukAjqW8.js";import{d as r,A as i,r as n,a1 as u,b as c,h as p,w as m,f as h,a as _,G as v,c as f,C as y,a0 as g,o as x}from"./index-BAyZi_co.js";import{u as C}from"./useTable-DUTUCT70.js";import{u as I}from"./useDownload-C-k5xGNE.js";import{u as V}from"./useDict-ConFaTXJ.js";import{h as w}from"./has-CF2CDZHh.js";import"./index-FaVgdj3V.js";import"./GiForm-BWZRNfN-.js";import"./index.vue_vue_type_script_setup_true_lang-Dekw0iDL.js";import"./useResetReactive-NMdkdCz2.js";import"./useDept-CXLwDhMr.js";import"./useBreakpoint-C2fvcUp5.js";const j={class:"gi_table_page"},N=r({name:"Course",__name:"index",setup(r){const{course_type:N,course_status:k}=V("course_type","course_status"),b=i({courseNo:void 0,name:void 0,credit:void 0,hours:void 0,type:void 0,collegeId:void 0,status:void 0,sort:["id,desc"]}),{tableData:D,loading:S,pagination:U,search:R,handleDelete:A}=C((e=>l({...b,...e})),{immediate:!0}),G=n([{title:"course ID",dataIndex:"id",slotName:"id"},{title:"course ID",dataIndex:"courseNo",slotName:"courseNo"},{title:"course name",dataIndex:"name",slotName:"name"},{title:"credit(10 points)",dataIndex:"credit",slotName:"credit"},{title:"hours",dataIndex:"hours",slotName:"hours"},{title:"type",dataIndex:"type",slotName:"type"},{title:"college ID",dataIndex:"collegeId",slotName:"collegeId"},{title:"description",dataIndex:"description",slotName:"description"},{title:"status",dataIndex:"status",slotName:"status"},{title:"action",dataIndex:"action",slotName:"action",width:160,align:"center",fixed:u()?void 0:"right",show:w.hasPermOr(["selectclass:course:detail","selectclass:course:update","selectclass:course:delete"])}]),M=()=>{b.courseNo=void 0,b.name=void 0,b.credit=void 0,b.hours=void 0,b.type=void 0,b.collegeId=void 0,b.status=void 0,R()},T=()=>{I((()=>d(b)))},O=n(),W=()=>{var e;null==(e=O.value)||e.onAdd()},q=n();return(l,d)=>{const r=_("a-input-search"),i=_("a-select"),n=_("icon-refresh"),u=_("a-button"),C=_("icon-plus"),I=_("icon-download"),V=a,w=_("a-link"),z=_("a-space"),B=e,F=g("permission");return x(),c("div",j,[p(B,{title:"course management","row-key":"id",data:h(D),columns:h(G),loading:h(S),scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:h(U),"disabled-tools":["size"],"disabled-column-keys":["name"],onRefresh:h(R)},{"toolbar-left":m((()=>[p(r,{modelValue:h(b).courseNo,"onUpdate:modelValue":d[0]||(d[0]=e=>h(b).courseNo=e),placeholder:"please enter the course ID","allow-clear":"",onSearch:h(R)},null,8,["modelValue","onSearch"]),p(r,{modelValue:h(b).name,"onUpdate:modelValue":d[1]||(d[1]=e=>h(b).name=e),placeholder:"please enter the course name","allow-clear":"",onSearch:h(R)},null,8,["modelValue","onSearch"]),p(r,{modelValue:h(b).credit,"onUpdate:modelValue":d[2]||(d[2]=e=>h(b).credit=e),placeholder:"please enter the credit(10 points)","allow-clear":"",onSearch:h(R)},null,8,["modelValue","onSearch"]),p(r,{modelValue:h(b).hours,"onUpdate:modelValue":d[3]||(d[3]=e=>h(b).hours=e),placeholder:"please enter the hours","allow-clear":"",onSearch:h(R)},null,8,["modelValue","onSearch"]),p(i,{modelValue:h(b).type,"onUpdate:modelValue":d[4]||(d[4]=e=>h(b).type=e),options:h(N),placeholder:"please select the type","allow-clear":"",style:{width:"150px"},onChange:h(R)},null,8,["modelValue","options","onChange"]),p(i,{modelValue:h(b).type,"onUpdate:modelValue":d[5]||(d[5]=e=>h(b).type=e),options:h(k),placeholder:"please select the status","allow-clear":"",style:{width:"150px"},onChange:h(R)},null,8,["modelValue","options","onChange"]),p(u,{onClick:M},{icon:m((()=>[p(n)])),default:m((()=>d[6]||(d[6]=[y("reset")]))),_:1})])),"toolbar-right":m((()=>[v((x(),f(u,{type:"primary",onClick:W},{icon:m((()=>[p(C)])),default:m((()=>d[7]||(d[7]=[y("add")]))),_:1})),[[F,["selectclass:course:add"]]]),v((x(),f(u,{onClick:T},{icon:m((()=>[p(I)])),default:m((()=>d[8]||(d[8]=[y("export")]))),_:1})),[[F,["selectclass:course:export"]]])])),type:m((({record:e})=>[p(V,{value:e.type,dict:h(N)},null,8,["value","dict"])])),status:m((({record:e})=>[p(V,{value:e.status,dict:h(k)},null,8,["value","dict"])])),action:m((({record:e})=>[p(z,null,{default:m((()=>[v((x(),f(w,{title:"details",onClick:a=>(e=>{var a;null==(a=q.value)||a.onOpen(e.id)})(e)},{default:m((()=>d[9]||(d[9]=[y("details")]))),_:2},1032,["onClick"])),[[F,["selectclass:course:detail"]]]),v((x(),f(w,{title:"modify",onClick:a=>(e=>{var a;null==(a=O.value)||a.onUpdate(e.id)})(e)},{default:m((()=>d[10]||(d[10]=[y("modify")]))),_:2},1032,["onClick"])),[[F,["selectclass:course:update"]]]),v((x(),f(w,{status:"danger",disabled:e.disabled,title:e.disabled?"cannot delete":"delete",onClick:a=>(e=>A((()=>s(e.id)),{content:"是否确定删除该条数据？",showModal:!0}))(e)},{default:m((()=>d[11]||(d[11]=[y(" delete ")]))),_:2},1032,["disabled","title","onClick"])),[[F,["selectclass:course:delete"]]])])),_:2},1024)])),_:1},8,["data","columns","loading","pagination","onRefresh"]),p(t,{ref_key:"CourseAddModalRef",ref:O,onSaveSuccess:h(R)},null,8,["onSaveSuccess"]),p(o,{ref_key:"CourseDetailDrawerRef",ref:q},null,512)])}}});export{N as default};
