import{_ as e}from"./index-B7Sos0mo.js";import{_ as t}from"./GiCellTag.vue_vue_type_script_setup_true_lang-BFrLDIrR.js";import{d as a,A as i,Z as l,a1 as s,b as o,h as n,w as d,f as r,a as c,G as m,c as p,C as u,k as h,a0 as y,o as f}from"./index-BAyZi_co.js";import{l as _,d as g}from"./notice-GOHHkgAo.js";import{u as x}from"./useTable-DUTUCT70.js";import{u as w}from"./useDict-ConFaTXJ.js";import{h as k}from"./has-CF2CDZHh.js";import"./useBreakpoint-C2fvcUp5.js";import"./index-FaVgdj3V.js";const v={class:"gi_table_page"},C=a({name:"SystemNotice",__name:"index",setup(a){const{notice_type:C,notice_status_enum:b}=w("notice_type","notice_status_enum"),j=h(),I=i({sort:["id,desc"]}),{tableData:V,loading:N,pagination:S,search:T,handleDelete:q}=x((e=>_({...I,...e})),{immediate:!0}),D=[{title:"number",width:66,align:"center",render:({rowIndex:e})=>l("span",{},e+1+(S.current-1)*S.pageSize)},{title:"title",dataIndex:"title",slotName:"title",minWidth:200,ellipsis:!0,tooltip:!0},{title:"type",dataIndex:"type",slotName:"type",align:"center"},{title:"status",dataIndex:"status",slotName:"status",align:"center"},{title:"effective time",dataIndex:"effectiveTime",width:180},{title:"terminate time",dataIndex:"terminateTime",width:180},{title:"create user",dataIndex:"createUserString",show:!1,ellipsis:!0,tooltip:!0},{title:"create time",dataIndex:"createTime",width:180},{title:"action",dataIndex:"action",slotName:"action",width:160,align:"center",fixed:s()?void 0:"right",show:k.hasPermOr(["system:notice:detail","system:notice:update","system:notice:delete"])}],U=()=>{I.title=void 0,I.type=void 0,T()},z=()=>{j.push({path:"/system/notice/add"})};return(a,i)=>{const l=c("a-input-search"),s=c("a-select"),h=c("icon-refresh"),_=c("a-button"),x=c("icon-plus"),w=t,k=c("a-link"),G=c("a-space"),R=e,W=y("permission");return f(),o("div",v,[n(R,{"row-key":"id",title:"",data:r(V),columns:D,loading:r(N),scroll:{x:"100%",y:"100%",minWidth:1200},pagination:r(S),"disabled-tools":["size"],"disabled-column-keys":["title"],onRefresh:r(T)},{"toolbar-left":d((()=>[n(l,{modelValue:r(I).title,"onUpdate:modelValue":i[0]||(i[0]=e=>r(I).title=e),placeholder:"search title","allow-clear":"",onSearch:r(T)},null,8,["modelValue","onSearch"]),n(s,{modelValue:r(I).type,"onUpdate:modelValue":i[1]||(i[1]=e=>r(I).type=e),options:r(C),placeholder:"please select the type","allow-clear":"",style:{width:"150px"},onChange:r(T)},null,8,["modelValue","options","onChange"]),n(_,{onClick:U},{icon:d((()=>[n(h)])),default:d((()=>i[2]||(i[2]=[u("reset")]))),_:1})])),"toolbar-right":d((()=>[m((f(),p(_,{type:"primary",onClick:z},{icon:d((()=>[n(x)])),default:d((()=>i[3]||(i[3]=[u("add")]))),_:1})),[[W,["system:notice:add"]]])])),type:d((({record:e})=>[n(w,{value:e.type,dict:r(C)},null,8,["value","dict"])])),status:d((({record:e})=>[n(w,{value:e.status,dict:r(b)},null,8,["value","dict"])])),action:d((({record:e})=>[n(G,null,{default:d((()=>[m((f(),p(k,{title:"detail",onClick:t=>(e=>{j.push({path:"/system/notice/detail",query:{id:e.id}})})(e)},{default:d((()=>i[4]||(i[4]=[u("detail")]))),_:2},1032,["onClick"])),[[W,["system:notice:detail"]]]),m((f(),p(k,{title:"modify",onClick:t=>(e=>{j.push({path:"/system/notice/add",query:{id:e.id,type:"update"}})})(e)},{default:d((()=>i[5]||(i[5]=[u("modify")]))),_:2},1032,["onClick"])),[[W,["system:notice:update"]]]),m((f(),p(k,{status:"danger",title:"delete",onClick:t=>(e=>q((()=>g(e.id)),{content:`是否确定删除公告「${e.title}」？`,showModal:!0}))(e)},{default:d((()=>i[6]||(i[6]=[u("delete")]))),_:2},1032,["onClick"])),[[W,["system:notice:delete"]]])])),_:2},1024)])),_:1},8,["data","loading","pagination","onRefresh"])])}}});export{C as default};
