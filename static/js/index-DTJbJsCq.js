import{_ as e}from"./index-B7Sos0mo.js";import{_ as a}from"./GiCellTag.vue_vue_type_script_setup_true_lang-BFrLDIrR.js";import{_ as l}from"./ClassAddModal.vue_vue_type_script_setup_true_lang-odq30nFK.js";import{_ as s}from"./ClassDetailDrawer.vue_vue_type_script_setup_true_lang-BmeVGCv8.js";import{l as t,d as o,e as d}from"./class-BxIprbNp.js";import{d as i,A as n,r,a1 as c,b as u,h as m,w as p,f as _,a as h,G as f,c as v,C as g,a0 as j,o as x}from"./index-BAyZi_co.js";import{u as C}from"./useTable-DUTUCT70.js";import{u as I}from"./useDownload-C-k5xGNE.js";import{u as k}from"./useDict-ConFaTXJ.js";import{h as w}from"./has-CF2CDZHh.js";import"./index-FaVgdj3V.js";import"./GiForm-BWZRNfN-.js";import"./index.vue_vue_type_script_setup_true_lang-Dekw0iDL.js";import"./useResetReactive-NMdkdCz2.js";import"./useDept-CXLwDhMr.js";import"./useBreakpoint-C2fvcUp5.js";const y={class:"gi_table_page"},V=i({name:"Class",__name:"index",setup(i){const{class_status:V}=k("class_status"),b=n({name:void 0,code:void 0,majorId:void 0,grade:void 0,status:void 0,sort:["id,desc"]}),{tableData:S,loading:D,pagination:N,search:R,handleDelete:U}=C((e=>t({...b,...e})),{immediate:!0}),A=r([{title:"class ID",dataIndex:"id",slotName:"id"},{title:"class name",dataIndex:"name",slotName:"name"},{title:"class code",dataIndex:"code",slotName:"code"},{title:"major ID",dataIndex:"majorId",slotName:"majorId"},{title:"grade",dataIndex:"grade",slotName:"grade"},{title:"description",dataIndex:"description",slotName:"description"},{title:"status",dataIndex:"status",slotName:"status"},{title:"action",dataIndex:"action",slotName:"action",width:160,align:"center",fixed:c()?void 0:"right",show:w.hasPermOr(["selectclass:class:detail","selectclass:class:update","selectclass:class:delete"])}]),G=()=>{b.name=void 0,b.code=void 0,b.majorId=void 0,b.grade=void 0,b.status=void 0,R()},M=()=>{I((()=>d(b)))},T=r(),O=()=>{var e;null==(e=T.value)||e.onAdd()},q=r();return(t,d)=>{const i=h("a-input-search"),n=h("a-select"),r=h("icon-refresh"),c=h("a-button"),C=h("icon-plus"),I=h("icon-download"),k=a,w=h("a-link"),z=h("a-space"),B=e,F=j("permission");return x(),u("div",y,[m(B,{title:"class management","row-key":"id",data:_(S),columns:_(A),loading:_(D),scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:_(N),"disabled-tools":["size"],"disabled-column-keys":["name"],onRefresh:_(R)},{"toolbar-left":p((()=>[m(i,{modelValue:_(b).name,"onUpdate:modelValue":d[0]||(d[0]=e=>_(b).name=e),placeholder:"please enter the class name","allow-clear":"",onSearch:_(R)},null,8,["modelValue","onSearch"]),m(i,{modelValue:_(b).code,"onUpdate:modelValue":d[1]||(d[1]=e=>_(b).code=e),placeholder:"please enter the class code","allow-clear":"",onSearch:_(R)},null,8,["modelValue","onSearch"]),m(i,{modelValue:_(b).majorId,"onUpdate:modelValue":d[2]||(d[2]=e=>_(b).majorId=e),placeholder:"please enter the major ID(pure number)","allow-clear":"",onSearch:_(R)},null,8,["modelValue","onSearch"]),m(i,{modelValue:_(b).grade,"onUpdate:modelValue":d[3]||(d[3]=e=>_(b).grade=e),placeholder:"please enter the grade","allow-clear":"",onSearch:_(R)},null,8,["modelValue","onSearch"]),m(n,{modelValue:_(b).status,"onUpdate:modelValue":d[4]||(d[4]=e=>_(b).status=e),options:_(V),placeholder:"please select the status","allow-clear":"",style:{width:"150px"},onChange:_(R)},null,8,["modelValue","options","onChange"]),m(c,{onClick:G},{icon:p((()=>[m(r)])),default:p((()=>d[5]||(d[5]=[g("reset")]))),_:1})])),"toolbar-right":p((()=>[f((x(),v(c,{type:"primary",onClick:O},{icon:p((()=>[m(C)])),default:p((()=>d[6]||(d[6]=[g("add class")]))),_:1})),[[F,["selectclass:class:add"]]]),f((x(),v(c,{onClick:M},{icon:p((()=>[m(I)])),default:p((()=>d[7]||(d[7]=[g("export class data")]))),_:1})),[[F,["selectclass:class:export"]]])])),status:p((({record:e})=>[m(k,{value:e.status,dict:_(V)},null,8,["value","dict"])])),action:p((({record:e})=>[m(z,null,{default:p((()=>[f((x(),v(w,{title:"details",onClick:a=>(e=>{var a;null==(a=q.value)||a.onOpen(e.id)})(e)},{default:p((()=>d[8]||(d[8]=[g("details")]))),_:2},1032,["onClick"])),[[F,["selectclass:class:detail"]]]),f((x(),v(w,{title:"modify",onClick:a=>(e=>{var a;null==(a=T.value)||a.onUpdate(e.id)})(e)},{default:p((()=>d[9]||(d[9]=[g("modify")]))),_:2},1032,["onClick"])),[[F,["selectclass:class:update"]]]),f((x(),v(w,{status:"danger",disabled:e.disabled,title:e.disabled?"cannot delete":"delete",onClick:a=>(e=>U((()=>o(e.id)),{content:`are you sure to delete the class「${e.name}」？`,showModal:!0}))(e)},{default:p((()=>d[10]||(d[10]=[g(" delete ")]))),_:2},1032,["disabled","title","onClick"])),[[F,["selectclass:class:delete"]]])])),_:2},1024)])),_:1},8,["data","columns","loading","pagination","onRefresh"]),m(l,{ref_key:"ClassAddModalRef",ref:T,onSaveSuccess:_(R)},null,8,["onSaveSuccess"]),m(s,{ref_key:"ClassDetailDrawerRef",ref:q},null,512)])}}});export{V as default};
