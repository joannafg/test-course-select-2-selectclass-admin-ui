import{_ as e}from"./index-CK_656P1.js";import{b as a}from"./index-FaVgdj3V.js";import{l as s,b as l}from"./role-C1QTvPIM.js";import{d as t,r as n,c as o,w as r,f as u,J as i,a as c,e as v,o as d,M as f}from"./index-BAyZi_co.js";const m=t({__name:"RoleAssignModal",setup(t,{expose:m}){const{width:p}=a(),b=n(""),g=n(!1),w=n([]),h=e=>{w.value=e},y=n(),_=()=>{var e;b.value="",w.value=[],null==(e=y.value)||e.onClearSelected()},k=async()=>{try{return 0===w.value.length?(f.warning("please select the user"),!1):(await l(b.value,w.value),f.success("assign successfully"),_(),!0)}catch(e){return!1}};return m({onOpen:async e=>{b.value=e;const{data:a}=await s(e);w.value=a,g.value=!0}}),(a,s)=>{const l=e,t=c("a-modal");return d(),o(t,{visible:u(g),"onUpdate:visible":s[1]||(s[1]=e=>i(g)?g.value=e:null),title:"assign role","mask-closable":!1,"esc-to-close":!1,width:u(p)>=1100?1100:"100%",draggable:"",onBeforeOk:k,onClose:_},{default:r((()=>[u(g)?(d(),o(l,{key:0,ref_key:"UserSelectRef",ref:y,value:u(w),"onUpdate:value":s[0]||(s[0]=e=>i(w)?w.value=e:null),onSelectUser:h},null,8,["value"])):v("",!0)])),_:1},8,["visible","width"])}}});export{m as _};
