import{_ as e}from"./index-B7Sos0mo.js";import t from"./ClientAddModal-Bh5tPXsd.js";import{_ as l}from"./ClientDetailDrawer.vue_vue_type_script_setup_true_lang-CRviEtzc.js";import{l as a,d as i}from"./client-DWOcxWz8.js";import{D as n}from"./common-BtD_44m1.js";import{d as s,A as o,Z as r,a1 as d,h as c,r as u,b as p,w as m,f as _,a as y,G as h,c as f,C as g,a0 as v,o as x}from"./index-BAyZi_co.js";import{u as w}from"./useTable-DUTUCT70.js";import{u as T}from"./useDict-ConFaTXJ.js";import{h as C}from"./has-CF2CDZHh.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang-D5x81qJP.js";import{_ as I}from"./GiCellTag.vue_vue_type_script_setup_true_lang-BFrLDIrR.js";import{_ as S}from"./GiCellTags.vue_vue_type_script_setup_true_lang-Byfoyq2W.js";import{_ as k}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-27S6yIFO.js";import"./index-FaVgdj3V.js";import"./index-DVDBkEOF.js";import"./GiForm-BWZRNfN-.js";import"./index.vue_vue_type_script_setup_true_lang-Dekw0iDL.js";import"./useResetReactive-NMdkdCz2.js";import"./useBreakpoint-C2fvcUp5.js";const b={class:"gi_table_page"},V=s({name:"SystemClient",__name:"index",setup(s){const{client_type:V,auth_type_enum:N}=T("client_type","auth_type_enum"),D=o({clientKey:"",clientSecret:"",authType:[],clientType:"",status:"",sort:["id,desc"]}),{tableData:K,loading:U,pagination:R,search:G,handleDelete:A}=w((e=>a({...D,...e})),{immediate:!0}),$=[{title:"index",width:66,align:"center",render:({rowIndex:e})=>r("span",{},e+1+(R.current-1)*R.pageSize),fixed:d()?void 0:"left"},{title:"client ID",dataIndex:"clientId",slotName:"clientId",ellipsis:!0,tooltip:!0,render:({record:e})=>c(j,{content:e.clientId},null)},{title:"client key",dataIndex:"clientKey",slotName:"clientKey",ellipsis:!0,tooltip:!0,align:"center"},{title:"client secret",dataIndex:"clientSecret",slotName:"clientSecret",ellipsis:!0,tooltip:!0,align:"center"},{title:"authentication type",dataIndex:"authType",slotName:"authType",ellipsis:!0,tooltip:!0,align:"center",render:({record:e})=>{return c(S,{data:(t=e.authType,t.map((e=>N.value.find((t=>t.value===e)).label)))},null);var t}},{title:"client type",dataIndex:"clientType",slotName:"clientType",ellipsis:!0,tooltip:!0,align:"center",render:({record:e})=>c(I,{value:e.clientType,dict:V.value},null)},{title:"Token active frequency",dataIndex:"activeTimeout",slotName:"activeTimeout",width:180,align:"center",render:({record:e})=>`${e.activeTimeout} s`},{title:"Token expiration",dataIndex:"timeout",slotName:"timeout",align:"center",render:({record:e})=>`${e.timeout} s`},{title:"status",dataIndex:"status",slotName:"status",align:"center",render:({record:e})=>c(k,{status:e.status},null)},{title:"create user",dataIndex:"createUserString",width:140,ellipsis:!0,tooltip:!0,show:!1},{title:"create time",dataIndex:"createTime",width:180},{title:"update user",dataIndex:"updateUserString",width:140,ellipsis:!0,tooltip:!0,show:!1},{title:"update time",dataIndex:"updateTime",width:180,show:!1},{title:"action",dataIndex:"action",slotName:"action",width:160,align:"center",fixed:d()?void 0:"right",show:C.hasPermOr(["system:client:detail","system:client:update","system:client:delete"])}],M=()=>{D.clientKey="",D.clientSecret="",D.authType=[],D.clientType="",D.status="",G()},O=u(),q=()=>{var e;null==(e=O.value)||e.onAdd()},z=u();return(a,s)=>{const o=y("a-input-search"),r=y("a-select"),d=y("icon-refresh"),u=y("a-button"),w=y("icon-plus"),T=y("a-link"),C=y("a-space"),j=e,I=v("permission");return x(),p("div",b,[c(j,{title:"","row-key":"id",data:_(K),columns:$,loading:_(U),scroll:{x:"100%",y:"100%",minWidth:1500},pagination:_(R),"disabled-tools":["size"],"disabled-column-keys":["clientKey"],onRefresh:_(G)},{"toolbar-left":m((()=>[c(o,{modelValue:_(D).clientKey,"onUpdate:modelValue":s[0]||(s[0]=e=>_(D).clientKey=e),placeholder:"search client key","allow-clear":"",onSearch:_(G)},null,8,["modelValue","onSearch"]),c(o,{modelValue:_(D).clientSecret,"onUpdate:modelValue":s[1]||(s[1]=e=>_(D).clientSecret=e),placeholder:"search client secret","allow-clear":"",onSearch:_(G)},null,8,["modelValue","onSearch"]),c(r,{modelValue:_(D).clientType,"onUpdate:modelValue":s[2]||(s[2]=e=>_(D).clientType=e),options:_(V),placeholder:"please select the client type","allow-clear":"",style:{width:"160px"},onChange:_(G)},null,8,["modelValue","options","onChange"]),c(r,{modelValue:_(D).status,"onUpdate:modelValue":s[3]||(s[3]=e=>_(D).status=e),options:_(n),placeholder:"please select the status","allow-clear":"",style:{width:"150px"},onChange:_(G)},null,8,["modelValue","options","onChange"]),c(u,{onClick:M},{icon:m((()=>[c(d)])),default:m((()=>s[4]||(s[4]=[g("reset")]))),_:1})])),"toolbar-right":m((()=>[h((x(),f(u,{type:"primary",onClick:q},{icon:m((()=>[c(w)])),default:m((()=>s[5]||(s[5]=[g("add")]))),_:1})),[[I,["system:client:add"]]])])),action:m((({record:e})=>[c(C,null,{default:m((()=>[h((x(),f(T,{title:"details",onClick:t=>(e=>{var t;null==(t=z.value)||t.onOpen(e.id)})(e)},{default:m((()=>s[6]||(s[6]=[g("details")]))),_:2},1032,["onClick"])),[[I,["system:client:detail"]]]),h((x(),f(T,{title:"modify",onClick:t=>(e=>{var t;null==(t=O.value)||t.onUpdate(e.id)})(e)},{default:m((()=>s[7]||(s[7]=[g("modify")]))),_:2},1032,["onClick"])),[[I,["system:client:update"]]]),h((x(),f(T,{status:"danger",disabled:e.disabled,title:e.disabled?"cannot delete":"delete",onClick:t=>(e=>A((()=>i(e.id)),{content:`are you sure to delete the client「${e.clientKey}(${e.clientId})」?`,showModal:!0}))(e)},{default:m((()=>s[8]||(s[8]=[g(" delete ")]))),_:2},1032,["disabled","title","onClick"])),[[I,["system:client:delete"]]])])),_:2},1024)])),_:1},8,["data","loading","pagination","onRefresh"]),c(t,{ref_key:"ClientAddModalRef",ref:O,onSaveSuccess:_(G)},null,8,["onSaveSuccess"]),c(l,{ref_key:"ClientDetailDrawerRef",ref:z},null,512)])}}});export{V as default};
